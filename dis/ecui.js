/*! ECUI 2013-07-09 */
var ecui;!function(){function a(a,b){for(;a&&1!=a.nodeType;a=a[b]);return a}var b,c=ecui={},d=c.array={},e=c.dom={},f=(c.ext={},c.json={}),g=c.string={},h=(c.ui={},c.util={}),i=window,j=document,k=Function,l=Math,m=RegExp,n=l.abs,o=(l.ceil,l.floor),p=l.max,q=(l.min,l.pow,l.round,parseInt),r=isNaN,s=navigator.userAgent,t="CSS1Compat"==j.compatMode,u=/msie (\d+\.\d)/i.test(s)?j.documentMode||m.$1-0:b,v=/firefox\/(\d+\.\d)/i.test(s)?m.$1-0:b,w=/opera\/(\d+\.\d)/i.test(s)?m.$1-0:b,x=/(\d+\.\d)(\.\d)?\s+safari/i.test(s)&&!/chrome/i.test(s)?m.$1-0:b,y={utf8:{byteLength:function(a){return a.replace(/[\x80-\u07ff]/g,"  ").replace(/[\u0800-\uffff]/g,"   ").length},codeLength:function(a){return a>2047?3:a>127?2:1}},gbk:{byteLength:function(a){return a.replace(/[\x80-\uffff]/g,"  ").length},codeLength:function(a){return a>127?2:1}},"":{byteLength:function(a){return a.length},codeLength:function(){return 1}}},z={display:8>u?{get:function(a,b){return"inline"==b.display&&1==b.zoom?"inline-block":b.display},set:function(a,b){"inline-block"==b&&(b="inline",a.style.zoom=1),a.style.display=b}}:3>v?{get:function(a,b){return"-moz-inline-box"==b.display?"inline-block":b.display},set:function(a,b){a.style.display="inline-block"==b?"-moz-inline-box":b}}:b,opacity:u?{get:function(a,b){return/alpha\(opacity=(\d+)/.test(b.filter)?(m.$1-0)/100+"":"1"},set:function(a,b){a.style.filter=a.style.filter.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*b+")"}}:b,"float":u?"styleFloat":"cssFloat"},A=(d.indexOf=function(a,b){for(var c=a.length;c--&&a[c]!==b;);return c},d.remove=function(a,b){for(var c=a.length;c--;)a[c]===b&&a.splice(c,1)},e.addClass=function(a,b){a.className+=" "+b},e.children=function(a){for(var b=[],c=a.firstChild;c;c=c.nextSibling)1==c.nodeType&&b.push(c);return b},e.contain=v?function(a,b){return a==b||!!(16&a.compareDocumentPosition(b))}:function(a,b){return a.contains(b)},e.create=function(a,b,c){return c=j.createElement(c||"DIV"),a&&(c.className=a),b&&(c.style.cssText=b),c}),B=(e.first=function(b){return a(b.firstChild,"nextSibling")},e.getAttribute=8>u?function(a,b){return a[b]}:function(a,b){return a.getAttribute(b)}),C=e.getParent=u?function(a){return a.parentElement}:function(a){return a.parentNode},D=(e.getPosition=function(a){var b=0,c=0,d=j.body,e=C(d);if(u)t||(f=D(d),r(b=q(f.borderTopWidth))&&(b=-2),r(c=q(f.borderLeftWidth))&&(c=-2)),f=a.getBoundingClientRect(),b+=e.scrollTop+d.scrollTop-e.clientTop+o(f.top),c+=e.scrollLeft+d.scrollLeft-e.clientLeft+o(f.left);else if(a==d)b=e.scrollTop+d.scrollTop,c=e.scrollLeft+d.scrollLeft;else if(a!=e){for(f=a;f;f=f.offsetParent)b+=f.offsetTop,c+=f.offsetLeft;(w||/webkit/i.test(s)&&"absolute"==D(a,"position"))&&(b-=d.offsetTop);for(var f=C(a),g=D(a);f!=d;f=C(f),g=a)c-=f.scrollLeft,w?"TR"!=f.tagName&&(b-=f.scrollTop):(a=D(f),e=v&&"visible"!=a.overflow&&"absolute"==g.position?2:1,b+=L(a.borderTopWidth)*e-f.scrollTop,c+=L(a.borderLeftWidth)*e)}return{top:b,left:c}},e.getStyle=function(a,b){var c=z[b],d=a.currentStyle||(u?a.style:getComputedStyle(a,null));return b?c&&c.get?c.get(a,d):d[c||b]:d}),E=(e.getText=v?function(a){return a.textContent}:function(a){return a.innerText},e.insertAfter=function(a,b){var c=C(b);return c?c.insertBefore(a,b.nextSibling):F(a)},e.insertBefore=function(a,b){var c=C(b);return c?c.insertBefore(a,b):F(a)},e.insertHTML=v?function(a,b,c){var d={AFTERBEGIN:"selectNodeContents",BEFOREEND:"selectNodeContents",BEFOREBEGIN:"setStartBefore",AFTEREND:"setEndAfter"}[b.toUpperCase()],e=j.createRange();e[d](a),e.collapse(b.length>9),e.insertNode(e.createContextualFragment(c))}:function(a,b,c){a.insertAdjacentHTML(b,c)}),F=(e.last=function(b){return a(b.lastChild,"previousSibling")},e.moveElements=function(a,b,c){for(var d=a.firstChild;d;d=a)a=d.nextSibling,(c||1==d.nodeType)&&b.appendChild(d)},e.next=function(b){return a(b.nextSibling,"nextSibling")},e.remove=function(a){var b=C(a);return b&&b.removeChild(a),a}),G=(e.removeClass=function(a,b){for(var c=a.className.split(/\s+/).sort(),d=b.split(/\s+/).sort(),e=c.length,f=d.length;e&&f;)c[e-1]==d[f-1]?c.splice(--e,1):c[e-1]<d[f-1]?f--:e--;a.className=c.join(" ")},e.setInput=function(a,c,d){if(!a)if("textarea"==d)a=A("","","textarea");else{if(9>u)return A("","",'<input type="'+(d||"")+'" name="'+(c||"")+'">');a=A("","","input")}return c=c===b?a.name:c,d=d===b?a.type:d,(a.name!=c||a.type!=d)&&(u&&"textarea"!=d||a.type!=d&&("textarea"==a.type||"textarea"==d)?(E(a,"AFTEREND","<"+("textarea"==d?"textarea":'input type="'+d+'"')+' name="'+c+'" class="'+a.className+'" style="'+a.style.cssText+'" '+(a.disabled?"disabled":"")+(a.readOnly?" readOnly":"")+">"),c=a,(a=a.nextSibling).value=c.value,"radio"==d&&(a.checked=c.checked),F(c)):(a.type=d,a.name=c)),a},e.setStyle=function(a,b,c){var d=z[b];d&&d.set?d.set(a,c):a.style[d||b]=c},e.setText=v?function(a,b){a.textContent=b}:function(a,b){a.innerText=b},f.parse=function(a){return new Function("return ("+a+")")()},f.stringify=function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=f[a];return b?b:(b=a.charCodeAt(),"\\u00"+o(b/16)+(b%16).toString(16))})),'"'+a+'"'}function c(a){for(var c,c,d=0,e=[],f=a.length,d=0,e=[],f=a.length;f>d;d++)(c=G(a[d]))!==b&&e.push(c);return"["+e.join(",")+"]"}function d(a){return 10>a?"0"+a:a}function e(a){return'"'+a.getFullYear()+"-"+d(a.getMonth()+1)+"-"+d(a.getDate())+"T"+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())+'"'}var f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(d){switch(typeof d){case"undefined":case"function":case"unknown":return b;case"number":if(!isFinite(d))return"null";case"boolean":return d.toString();case"string":return a(d);default:if(null===d)return"null";if(d instanceof Array)return c(d);if(d instanceof Date)return e(d);var f,g=[];for(var h in d)(f=G(d[h]))!==b&&g.push(a(h)+":"+f);return"{"+g.join(",")+"}"}}}()),H=(g.decodeHTML=function(){var a={quot:'"',lt:"<",gt:">",amp:"&"};return function(b){return b.replace(/&(quot|lt|gt|amp|#([\d]+));/g,function(b,c,d){return a[c]||String.fromCharCode(+d)})}}(),g.encodeHTML=function(a){return a+="",a.replace(/[&<>"']/g,function(a){return"&#"+a.charCodeAt(0)+";"})},g.getByteLength=function(a,b){return y[b||""].byteLength(a)},g.sliceByte=function(a,b,c){for(var d=0,e=y[c||""].codeLength;d<a.length;d++)if(b-=e(a.charCodeAt(d)),0>b)return a.slice(0,d);return a},g.toCamelCase=function(a){return a.indexOf("-")<0?a:a.replace(/\-./g,function(a){return a.charAt(1).toUpperCase()})},g.toHalfWidth=function(a){return a.replace(/[\u3000\uFF01-\uFF5E]/g,function(a){return String.fromCharCode(p(a.charCodeAt(0)-65248,32))})},g.trim=function(a){return a&&a.replace(/^\s+|\s+$/g,"")},g.formatDate=function(a,b){var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=a.getHours(),g=a.getMinutes(),h=a.getSeconds();return b.replace(/(y+|M+|d+|H+|h+|m+|s+)/g,function(a){var b=a.length;switch(a.charAt()){case"y":return b>2?c:c.toString().slice(2);case"M":a=d;break;case"d":a=e;break;case"H":a=f;break;case"h":a=f%12;break;case"m":a=g;break;case"s":a=h}return b>1&&10>a?"0"+a:a})},h.attachEvent=u?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a.addEventListener(b,c,!1)}),I=(h.blank=function(){},h.callSuper=function(a,c){function d(a,b){for(;a;a=a.constructor.superClass)if(a[c]==b){for(;a=a.constructor.superClass;)if(a[c]!=b)return a[c];return null}}var e=a.constructor.prototype,f=I.caller,g=d(e,f);return g===b&&(g=d(e,f.caller)),g?g.apply(a,f.arguments):void 0}),J=(h.cancel=function(){return!1},h.detachEvent=u?function(a,b,c){a.detachEvent("on"+b,c)}:function(a,b,c){a.removeEventListener(b,c,!1)},h.extend=function(a,b){for(var c in b)a[c]=b[c];return a}),K=(h.getView=function(){var a=j.body,b=C(a),c=t?b:a,d=b.scrollTop+a.scrollTop,e=b.scrollLeft+a.scrollLeft,f=c.clientWidth,g=c.clientHeight;return{top:d,right:e+f,bottom:d+g,left:e,width:f,height:g,pageWidth:p(b.scrollWidth,a.scrollWidth,f),pageHeight:p(b.scrollHeight,a.scrollHeight,g)}},h.inherits=function(a,b){var c=a.prototype,d=new k;return d.prototype=b.prototype,J(a.prototype=new d,c),a.prototype.constructor=a,a.superClass=b.prototype,a.prototype},h.setDefault=function(a,b,c){a.hasOwnProperty(b)||(a[b]=c)},h.timer=function(a,b,c){function d(){return(0>b?setInterval:setTimeout)(function(){a.apply(c,f),0>b||(a=c=f=null)},n(b))}var e,f=Array.prototype.slice.call(arguments,3),g=d();return function(h){(0>b?clearInterval:clearTimeout)(g),h?(e&&(g=d()),e=!e):a=c=f=null}}),L=h.toNumber=function(a){return q(a)||0};e.ready=function(){function a(){if(!e){e=!0;for(var a,b=0;a=f[b++];)a()}}var c,d,e=!1,f=[];return j.addEventListener&&!w?j.addEventListener("DOMContentLoaded",a,!1):u&&i==top?c=function(){try{j.documentElement.doScroll("left"),a()}catch(b){K(c,0)}}:x&&(c=function(){var e,f=0,g=j.readyState;if("loaded"!=g&&"complete"!=g)K(c,0);else{if(d===b&&(d=0,(e=j.getElementsByTagName("style"))&&(d+=e.length),e=j.getElementsByTagName("link")))for(;g=e[f++];)"stylesheet"==B(g,"rel")&&d++;j.styleSheets.length!=d?K(c,0):a()}}),c&&c(),H(i,"load",a),function(a){e?a():f.push(a)}}();try{j.execCommand("BackgroundImageCache",!1,!0)}catch(M){}}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=ecui,J=I.array,K=I.dom,L=I.ext,M=I.string,N=I.util,O=I.ui,P=window,Q=document,R=Date,S=Math,T=RegExp,U=S.abs,V=S.max,W=S.min,X=isNaN,Y=navigator.userAgent,Z="CSS1Compat"==Q.compatMode,$=/msie (\d+\.\d)/i.test(Y)?Q.documentMode||T.$1-0:a,_=/firefox\/(\d+\.\d)/i.test(Y)?T.$1-0:a,ab=J.indexOf,bb=J.remove,cb=K.addClass,db=K.contain,eb=K.create,fb=K.getAttribute,gb=K.getParent,hb=K.getPosition,ib=K.getStyle,jb=K.insertHTML,kb=K.ready,lb=K.remove,mb=K.removeClass,nb=K.setStyle,ob=M.toCamelCase,pb=N.attachEvent,qb=N.blank,rb=N.detachEvent,sb=N.extend,tb=N.getView,ub=N.inherits,vb=N.timer,wb=N.toNumber,xb=I.NORMAL=0,yb=I.LOADING=1,zb=I.REPAINT=2,Ab=I.findControl=function(a){for(;a;a=gb(a))if(a.getControl)return a.getControl();return null},Bb=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"];!function(){function J(b,c,d,e){for(d=d||new Xb(c),d.cancelBubble=!1;b!=e;b=b.getParent())if(d.returnValue=a,G(b,c,d),d.cancelBubble)return}function K(a,b){if(a!=b){for(var c=0,d=[],e=[];a;a=a.getParent())d.push(a);for(;b;b=b.getParent())e.push(b);for(d.reverse(),e.reverse();d[c]==e[c];c++);a=d[c-1]}return a||null}function M(){return this._cControl}function N(a,b,c,d){var e=a.getOuter().style,f=a.getX(),g=a.getY();e.left=f+"px",e.top=g+"px",e.position="absolute",c.target=a,c.actived=Ub,Hb(c),Ub=null,G(a,d+"start",b),$&&Q.body.setCapture()}function S(){if(!Tb){Sb=yb;for(a in L)_b[a]=L[a];for(a in ic)pb(Q,a,ic[a]);Tb={};var a=u(Q.body,"data-ecui");return Zb=a.name||Zb,Jb=a.globalId,Kb=ab(["class","all"],a.structural)+1,jb(Q.body,"BEFOREEND",'<div style="position:absolute;overflow:scroll;top:-90px;left:-90px;width:80px;height:80px;border:1px solid"><div style="position:absolute;top:0px;height:90px"></div></div>'),a=Q.body.lastChild,Lb=a.offsetWidth>80,Mb=a.lastChild.offsetTop,Nb=a.offsetWidth-a.clientWidth-2,lb(a),pb(P,"resize",nc),pb(P,"unload",function(){for(var b=0;a=cc[b++];)a.$dispose();Q=ac=null}),pb(P,"scroll",Fb),mc(Q.body),cb(Q.body,"ecui-loaded"),Sb=xb,!0}}function Y(){return Rb.time>(new R).getTime()-200}function Cb(a){var b=a.target,c=hb(b),d=ib(b);return a.pageX-c.left-wb(d.borderLeftWidth)>=b.clientWidth!=a.pageY-c.top-wb(d.borderTopWidth)>=b.clientHeight}function Db(a,b){J(Ub=a,"activate",b),J(a,"mousedown",b),Gb(a,b)}function Eb(a,b){if(a.oncreate&&a.oncreate(b),cc.push(a),b.id&&(Tb[b.id]=a,Jb&&(P[b.id]=a)),b.ext)for(var c in b.ext)_b[c]&&(_b[c](a,b.ext[c],b),(c=a["$init"+c.charAt(0).toUpperCase()+ob(c.slice(1))])&&c.call(a,b))}function Fb(a){a=H(a);for(var b,c=0;b=dc[c++];)G(b,"pagescroll",a);B(!0)}function Gb(a,b){for(;a;a=a.getParent())if(!a.isUserSelect())return b.preventDefault(),void 0}function Hb(a){var b={};Ib(ic,!0),sb(b,ic),sb(b,a),b.x=Pb,b.y=Qb,Ib(b),hc.push(ic),ic=b}function Ib(a,b){for(var c,d=0,e=b?rb:pb;5>d;)a[c=Bb[d++]]&&e(Q,c,a[c])}var Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb=O.Event=function(a,b){this.type=a,b?(this.pageX=b.pageX,this.pageY=b.pageY,this.which=b.which,this.target=b.target,this._oNative=b):(this.pageX=Pb,this.pageY=Qb,this.which=bc,this.target=Q)},Yb=Xb.prototype,Zb="ecui",$b=0,_b={},ac=[],bc=0,cc=[],dc=[],ec=0,fc={},gc={},hc=[],ic={click:function(a){a=H(a);var b=Ab(a.target);b&&b.isDisabled()&&a.preventDefault()},mousedown:function(b){if(Ub)return J(Ub,"deactivate"),Ub=null,void 0;b=H(b);var c="ui-monthview-item",d=b.getControl(c),e=8>$&&Cb(b),f=d;if(Rb&&Y()||(Rb={time:(new R).getTime()}),d){if(e)return;if(d._bDisabled)return Db(d,b),void 0;for(;f;f=f.getParent())if(f.isFocusable()){f!=d&&f.contain(Wb)||F(f);break}e||Db(d,b)}else(d=Ab(f=b.target))&&(Gb(d,b),("INPUT"==f.tagName||"SELECT"==f.tagName||"TEXTAREA"==f.tagName||"BUTTON"==f.tagName)&&vb(function(){f.blur()})),F(),Ub=a},mouseover:function(a){if("drag"!=ic.type&&"zoom"!=ic.type){a=H(a);var b=a.getControl(),c=K(b,Vb);J(Vb,"mouseout",a,c),J(b,"mouseover",a,c),Vb=b}},mousemove:function(a){a=H(a);var b=a.getControl();J(b,"mousemove",a)},mouseup:function(a){a=H(a);var b,c=a.getControl();null!==Ub&&(J(c,"mouseup",a),Ub&&(b=K(c,Ub),J(b,"click",a),Rb&&(Y()&&Rb.target==c?(J(b,"dblclick",a),Rb=null):Rb.target=c),J(Ub,"deactivate",a)),Ub=null)}},jc={type:"drag",mousemove:function(a){a=H(a);var b=ic.target,c=b.getX()+Pb-ic.x,d=b.getY()+Qb-ic.y,e=W(V(c,ic.left),ic.right),f=W(V(d,ic.top),ic.bottom);G(b,"dragmove",a,[e,f])&&b.setPosition(e,f),ic.x=Pb+b.getX()-c,ic.y=Qb+b.getY()-d},mouseup:function(a){a=H(a);var b=ic.target;G(b,"dragend",a),Ub=ic.actived,E(),ic.mouseover(a),ic.mouseup(a)}},kc={type:"intercept",mousedown:function(a){a=H(a);var b=ic.target,c=ic,d=a.getControl();Rb=null,Cb(a)||(d&&!d.isFocusable()?Db(d,a):G(b,"intercept",a)?E():a.cancelBubble||(c==ic?d&&Db(d,a):ic.mousedown(a)))}},lc={type:"zoom",mousemove:function(a){a=H(a);var b=ic.target,c=ic.width=Pb-ic.x+ic.width,d=ic.height=Qb-ic.y+ic.height,e=ic.minWidth,f=ic.maxWidth,g=ic.minHeight,h=ic.maxHeight;ic.x=Pb,ic.y=Qb,c=e>c?e:c>f?f:c,d=g>d?g:d>h?h:d,b.setPosition(ic.left+W(c,0),ic.top+W(d,0)),G(b,"zoom",a)&&b.setSize(U(c),U(d))},mouseup:function(a){a=H(a);var b=ic.target;G(b,"zoomend",a),Ub=ic.actived,E(),nc(),ic.mouseover(a),ic.mouseup(a)}},mc=I.init=function(a){if(!S()&&a){var b,c=0,d=[],f=a.all||a.getElementsByTagName("*"),g=[a],h={};for($b++||rb(P,"resize",nc);b=f[c++];)fb(b,Zb)&&g.push(b);for(c=0;a=g[c];c++)f=u(a),(b=f.type)&&(f.main=a,d.push(e(O[ob(b.charAt(0).toUpperCase()+b.slice(1))],f)),f.id&&(h[f.id]=d[d.length-1]));for(c=0;b=d[c++];)b.cache();for(c=0;b=d[c++];)b.init();return--$b||pb(P,"resize",nc),h}},nc=I.repaint=function(){var b,c=0,d=[],e=[];if($){if(b=(Z?Q.documentElement:Q.body).clientWidth,Ob==b)return Fb(new Xb("scroll")),void 0;Ob=b}if(Sb=zb,b=ic.type,B(!1),"zoom"!=b){for("drag"==b&&ic.mouseup(),b=null;b!==a;b=d[c++])for(var f=0,g=D({parent:b});b=g[f++];)b.isShow()&&b.isResizable()&&d.push(b);for(c=0;b=d[c++];)b.repaint=qb,G(b,"resize"),delete b.repaint,8>$&&(b=ib(f=b.getMain()),"auto"==b.width&&"block"==b.display&&(f.style.width="100%"));if(8>$){for(c=0;b=d[c];)e[c++]=b.getMain().offsetWidth;for(;b=d[c--];)b.getMain().style.width=e[c]-(Lb?2*b.$getBasicWidth():0)+"px"}for(c=0;b=d[c++];)b.cache(!0,!0);for(c=0;b=d[c++];)b.$setSize(b.getWidth(),b.getHeight())}8>$?vb(B,0,null,!0):B(!0),Sb=xb};b=I.$bind=function(a,b){a._cControl=b,a.getControl=M},d=I.$clearState=function(a){var b=a.getParent();A(a),a.contain(Ub)&&J(Ub,"deactivate",null,Ub=b),a.contain(Vb)&&J(Vb,"mouseout",null,Vb=b)},c=I.$connect=function(a,b,c){if(c){var d=Tb[c];d?b.call(a,d):(fc[c]=fc[c]||[]).push({func:b,caller:a})}},e=I.$create=function(a,b){a=a.client||a,b=b||{};var c,d=0,e=b.parent,f=b.main,g=b.primary||"";if(b.uid="ecui-"+ ++ec,f){if(Kb?c=f.className:f.className=c=f.className+" "+g+a.agent.TYPES,g||(/\s*([^\s]+)/.test(c),b.primary=T.$1),f.getControl)return f.getControl()}else f=b.main=eb(g+a.agent.TYPES),g||(b.primary=a.agent.types[0]);if(a=new a(f,b),e?e instanceof O.Control?a.setParent(e):a.appendTo(e):a.$setParent(Ab(gb(a.getOuter()))),Eb(a,b),dc.push(a),f=fc[b.id])for(fc[b.id]=null;g=f[d++];)g.func.call(g.caller,a);return a},f=I.$fastCreate=function(a,b,c,d){return a=a.client||a,d=d||{},d.uid="ecui-"+ ++ec,d.primary||(/\s*([^\s]+)/.test(b.className),d.primary=T.$1),a=new a(b,d),a.$setParent(c),Eb(a,d),a},I.addEventListener=function(a,b,c){b=a.getUID()+b,(gc[b]=gc[b]||[]).push(c)},g=I.calcHeightRevise=function(a){return Lb?wb(a.borderTopWidth)+wb(a.borderBottomWidth)+wb(a.paddingTop)+wb(a.paddingBottom):0},h=I.calcLeftRevise=function(a){var b=ib(a.offsetParent);return!_||"visible"!=b.overflow&&"absolute"==ib(a,"position")?wb(b.borderLeftWidth)*Mb:0},i=I.calcTopRevise=function(a){var b=ib(a.offsetParent);return!_||"visible"!=b.overflow&&"absolute"==ib(a,"position")?wb(b.borderTopWidth)*Mb:0},j=I.calcWidthRevise=function(a){return Lb?wb(a.borderLeftWidth)+wb(a.borderRightWidth)+wb(a.paddingLeft)+wb(a.paddingRight):0},k=I.create=function(a,b){return a=e("string"==typeof a?O[a]:a,b),a.cache(),a.init(),a},l=I.dispose=function(a){var b,c=cc.length,e=a instanceof O.Control,f={},g=[];e?d(a):(b=Ab(gb(a)),Wb&&db(a,Wb.getOuter())&&F(b),Ub&&db(a,Ub.getOuter())&&J(Ub,"deactivate",null,Ub=b),Vb&&db(a,Vb.getOuter())&&J(Vb,"mouseout",null,Vb=b));for(b in Tb)f[Tb[b].getUID()]=b;for(;c--;)b=cc[c],(e?a.contain(b):!!b.getOuter()&&db(a,b.getOuter()))&&(g.push(b),bb(dc,b),(b=f[b.getUID()])&&delete Tb[b],cc.splice(c,1));for(;b=g[++c];)b.$dispose()},I.$dispose=function(a,b){var c,e,f=a instanceof O.Control,g={},h=[],i=[];f?d(a):(c=Ab(gb(a)),Wb&&db(a,Wb.getOuter())&&F(c),Ub&&db(a,Ub.getOuter())&&J(Ub,"deactivate",null,Ub=c),Vb&&db(a,Vb.getOuter())&&J(Vb,"mouseout",null,Vb=c));for(c in Tb)g[Tb[c].getUID()]=c,i.push(Tb[c]);for(b&&(i=[a]),e=0;c=i[e];e++)(f?a.contain(c):!!c.getOuter()&&db(a,c.getOuter()))&&(h.push(c),bb(dc,c),bb(cc,c),(c=g[c.getUID()])&&delete Tb[c]);for(e=0;c=h[e];e++)c.$dispose()},m=I.drag=function(a,b,c){if("mousedown"==b.type){var d=a.getOuter().offsetParent,e=ib(d);sb(jc,"BODY"==d.tagName||"HTML"==d.tagName?tb():{top:0,right:d.offsetWidth-wb(e.borderLeftWidth)-wb(e.borderRightWidth),bottom:d.offsetHeight-wb(e.borderTopWidth)-wb(e.borderBottomWidth),left:0}),sb(jc,c),jc.right=V(jc.right-a.getWidth(),jc.left),jc.bottom=V(jc.bottom-a.getHeight(),jc.top),N(a,b,jc,"drag")}},I.get=function(a){return S(),Tb[a]||null},n=I.getActived=function(){return Ub||null},o=I.getAttributeName=function(){return Zb},p=I.getFocused=function(){return Wb||null},q=I.getHovered=function(){return Vb},r=I.getKey=function(){return bc},s=I.getMouseX=function(a){return a?(a=a.getBody(),Pb-hb(a).left-wb(ib(a,"borderLeftWidth"))):Pb},t=I.getMouseY=function(a){return a?(a=a.getBody(),Qb-hb(a).top-wb(ib(a,"borderTopWidth"))):Qb},I.getNamedControls=function(){return sb({},Tb)},u=I.getOptions=function(a,b){b=b||Zb;var c,d=fb(a,b);if(d){if(a.removeAttribute(b),I.onparseoptions&&(c=I.onparseoptions(d)))return c;for(c={};/^(\s*;)?\s*(ext\-)?([\w\-]+)\s*(:\s*([^;\s]+(\s+[^;\s]+)*)\s*)?($|;)/.test(d);)d=T["$'"],a=T.$5,b=T.$2?c.ext=c.ext||{}:c,b[ob(T.$3)]=a&&"true"!=a?"false"==a?!1:X(+a)?a:+a:!0;return c}return{}},v=I.getScrollNarrow=function(){return Nb},w=I.getStatus=function(){return Sb},x=I.inherits=function(a,b,c,d){var e=function(a){return k(e.client,a)},f=e.client=function(b,c){e.preprocess&&(b=e.preprocess.call(this,b,c)||b),a&&a.client.call(this,b,c),d&&d.call(this,b,c)};return e.preprocess=c,a?(ub(e,a),b&&"*"==b.charAt(0)?(e.types=a.types.slice())[0]=b.slice(1):e.types=(b?[b]:[]).concat(a.types)):e.types=[],e.TYPES=" "+e.types.join(" "),ub(f,e),f.agent=e,e},y=I.intercept=function(a){kc.target=a,Hb(kc)},z=I.isContentBox=function(){return Lb},A=I.loseFocus=function(a){a.contain(Wb)&&F(a.getParent())},B=I.mask=function(b,c){var d=0,e=Q.body,f=tb(),g=V(f.top-2*f.height,0),h=V(f.left-2*f.width,0),i=";top:"+g+"px;left:"+h+"px;width:"+W(5*f.width,f.pageWidth-h)+"px;height:"+W(5*f.height,f.pageHeight-g)+"px;display:";if("boolean"==typeof b)for(i+=b?"block":"none";f=ac[d++];)f.style.cssText+=i;else b===a?(lb(ac.pop()),ac.length||mb(e,"ecui-mask")):(ac.length||cb(e,"ecui-mask"),ac.push(f=e.appendChild(eb("","position:absolute;background-color:#000;z-index:"+(c||32767)))),nb(f,"opacity",b),f.style.cssText+=i+"block")},C=I.needInitClass=function(){return!Kb},D=I.query=function(b){b=b||{};for(var c,d=0,e=[],f=b.parent,g=b.custom;c=dc[d++];)b.type&&!(c instanceof b.type)||f!==a&&c.getParent()!==f||g&&!g.call(this,c)||e.push(c);return e},I.removeEventListener=function(a,b,c){(b=gc[a.getUID()+b])&&bb(b,c)},E=I.restore=function(){$&&("drag"==ic.type||"zoom"==ic.type)&&Q.body.releaseCapture(),Ib(ic,!0),Ib(ic=hc.pop())},F=I.setFocused=function(a){a&&a.isDisabled()&&(a=null);var b=K(Wb,a);J(Wb,"blur",null,b),J(Wb=a,"focus",null,b)},G=I.triggerEvent=function(a,b,c,d){if(d&&c?d.splice(0,0,c):c?d=[c]:(c={returnValue:c,preventDefault:Yb.preventDefault},d=d||[]),e=gc[a.getUID()+b])for(var e,f,g=0;f=e[g++];)f.apply(a,d);return(a["on"+b]&&a["on"+b].apply(a,d)===!1||c.returnValue===!1||a["$"+b]&&a["$"+b].apply(a,d)===!1)&&c.preventDefault(),c.returnValue!==!1},H=I.wrapEvent=function(a){if(a instanceof Xb)return a;var b=Q.body,c=gb(b);return $&&(a=P.event,a.pageX=c.scrollLeft+b.scrollLeft-c.clientLeft+a.clientX-b.clientLeft,a.pageY=c.scrollTop+b.scrollTop-c.clientTop+a.clientY-b.clientTop,a.target=a.srcElement,a.which=a.keyCode),"mousemove"==a.type&&(Rb=null),Pb=a.pageX,Qb=a.pageY,new Xb(a.type,a)},I.zoom=function(a,b,c){"mousedown"==b.type&&(c&&sb(lc,c),lc.top=a.getY(),lc.left=a.getX(),lc.width=a.getWidth(),lc.height=a.getHeight(),N(a,b,lc,"zoom"))},ic.keydown=ic.keypress=ic.keyup=function(a){a=H(a);var b=a.type,c=a.which;"keydown"==b&&(bc=c),J(Wb,b,a),"keyup"==b&&bc==c&&(bc=0)},$&&(ic.dblclick=function(a){ic.mousedown(a),ic.mouseup(a)},ic.selectstart=function(a){a=H(a),Gb(Ab(a.target),a)}),ic[_?"DOMMouseScroll":"mousewheel"]=function(b){b=H(b),b.detail=b._oNative.detail===a?b._oNative.wheelDelta/-40:b._oNative.detail,"drag"==ic.type?b.preventDefault():(J(Vb,"mousewheel",b),b.cancelBubble||J(Wb,"mousewheel",b))},Yb.getControl=function(a){var b=Ab(this.target);if(b&&!b.isDisabled())for(;b;b=b.getParent())if(b.isCapturable())return b;if(b&&b._sPrimary==a)for(;b;b=b.getParent())if(b.isCapturable())return b;return null},Yb.getNative=function(){return this._oNative},Yb.preventDefault=function(){this.returnValue=!1,this._oNative&&($?this._oNative.returnValue=!1:this._oNative.preventDefault())},Yb.stopPropagation=function(){this.cancelBubble=!0,this._oNative&&($?this._oNative.cancelBubble=!1:this._oNative.stopPropagation())},Yb.exit=function(){this.preventDefault(),this.stopPropagation()},kb(mc)}()}(),function(){function a(a,b,c){var d=a._cParent,e=a.getOuter(),f=a._bCreated&&a.isShow();if(b!=d){if(d&&!L(d,"remove",null,[a]))return;b&&(L(b,"append",null,[a])||(b=c=null))}c!=o(e)&&(c?c.appendChild(e):r(e),a.$setParent(b)),f!=(a._bCreated&&a.isShow())&&L(a,f?"hide":"show",!1)}var b,c,d=ecui,e=d.array,f=d.dom,g=d.ui,h=d.util,i=document,j=RegExp,k=navigator.userAgent,l=/msie (\d+\.\d)/i.test(k)?i.documentMode||j.$1-0:b,m=e.remove,n=f.addClass,o=f.getParent,p=f.getStyle,q=f.removeClass,r=f.remove,s=h.blank,t=h.timer,u=h.toNumber,v=d.REPAINT,w=d.$bind,x=d.$clearState,y=d.calcLeftRevise,z=d.calcTopRevise,A=d.dispose,B=d.findControl,C=d.getActived,D=d.getFocused,E=d.getHovered,F=d.getStatus,G=d.inherits,H=d.isContentBox,I=d.loseFocus,J=d.query,K=d.setFocused,L=d.triggerEvent,M=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],N=g.Control=G(null,null,null,function(a,b){w(a,this),this._bDisabled=!!b.disabled,this._sUID=b.uid,this._sPrimary=b.primary||"",this._sClass=b.current||this._sPrimary,this._eMain=this._eBody=a,this._cParent=null,this._bCapturable=b.capturable!==!1,this._bUserSelect=b.userSelect!==!1,this._bFocusable=b.focusable!==!1,b.resizable!==!1?(this._bResizable=!0,a=a.style,this._sWidth=a.width,this._sHeight=a.height):this._bResizable=!1,this._aStatus=[""," "]}),O=N.prototype,P={custom:function(a){return this!=a&&this.contain(a)&&a.isShow()}};O.$activate=function(){this.alterClass("+active")},O.$blur=function(){this.alterClass("-focus")},O.$cache=function(a,b){if(8>l)c=a.borderWidth,c.indexOf(" ")>0?(c=c.split(" "),this.$$borderTopWidth=u(c[0]),this.$$borderRightWidth=u(c[1]),this.$$borderBottomWidth=c[2]?u(c[2]):this.$$borderTopWidth,this.$$borderLeftWidth=c[3]?u(c[3]):this.$$borderRightWidth=u(c[1])):this.$$borderTopWidth=this.$$borderLeftWidth=this.$$borderRightWidth=this.$$borderBottomWidth=u(c),c=a.padding,c.indexOf(" ")>0?(c=c.split(" "),this.$$paddingTop=u(c[0]),this.$$paddingRight=u(c[1]),this.$$paddingBottom=c[2]?u(c[2]):this.$$paddingTop,this.$$paddingLeft=c[3]?u(c[3]):this.$$paddingRight):this.$$paddingTop=this.$$paddingLeft=this.$$paddingRight=this.$$paddingBottom=u(c);else for(var c,d=0,e=["borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","paddingTop","paddingLeft","paddingRight","paddingBottom"];c=e[d++];)this["$$"+c]=u(a[c]);this.$$position=a.position,b!==!1&&(c=H(),this.$$width=this._eMain.offsetWidth||u(a.width)+(c?this.$getBasicWidth():0),this.$$height=this._eMain.offsetHeight||u(a.height)+(c?this.$getBasicHeight():0))},O.$deactivate=function(){this.alterClass("-active")},O.$dispose=function(){try{L(this,"dispose",!1)}catch(a){}this._eMain.getControl=b,this._eMain=this._eBody=null,this.$ready=s},O.$focus=function(){this.alterClass("+focus")},O.$getBasicHeight=function(){return this.$$borderTopWidth+this.$$borderBottomWidth+this.$$paddingTop+this.$$paddingBottom},O.$getBasicWidth=function(){return this.$$borderLeftWidth+this.$$borderRightWidth+this.$$paddingLeft+this.$$paddingRight},O.$getSection=function(a){return this["_u"+a]},O.$hide=function(){if(this._sDisplay===b){if(this._bCreated)for(var a,c=0,d=J.call(this,P);a=d[c++];)L(a,"hide",!1);a=this.getOuter().style,this._sDisplay=a.display,a.display="none",x(this)}},O.$locate=function(){"static"==this.$$position&&(this._eMain.style.position=this.$$position="relative")},O.$mouseout=function(){this.alterClass("-hover")},O.$mouseover=function(){this.alterClass("+hover")},O.$resize=function(){var a=this._eMain,b=a.style;if(b.width=this._sWidth,8>l&&F()!=v){var c=p(a);"auto"==c.width&&"block"==c.display&&(b.width="100%",b.width=a.offsetWidth-(H()?2*this.$getBasicWidth():0)+"px")}b.height=this._sHeight},O.$setBody=function(a){this._eBody=a},O.$setParent=function(a){this._cParent=a},O.$setSize=function(a,b){var c=this._eMain.style,d=this._eMain.tagName,e=H()&&"BUTTON"!=d&&"INPUT"!=d;a&&(d=a-(e?this.$getBasicWidth():0))>0&&(c.width=d+"px",this.$$width=a),b&&(d=b-(e?this.$getBasicHeight():0))>0&&(c.height=d+"px",this.$$height=b)},O.$show=function(){if(this.getOuter().style.display=this._sDisplay||"",this._sDisplay=b,this._bCreated)for(var a,c=0,d=J.call(this,P);a=d[c++];)L(a,"show",!1)},O.alterClass=function(a){var b="+"==a.charAt(0);b?a="-"+a.slice(1)+" ":a+=" ",(b?n:q)(this._eMain,this.getTypes().concat([this._sClass,""]).join(a)),b?this._aStatus.push(a):m(this._aStatus,a)},O.appendTo=function(b){a(this,b&&B(b),b)},O.blur=function(){I(this)},O.cache=function(a,b){(b||!this._bCached)&&(this._bCached=!0,this.$cache(p(this._eMain),a))},O.clearCache=function(){this._bCached=!1},O.contain=function(a){for(;a;a=a._cParent)if(a==this)return!0;return!1},O.disable=function(){return this._bDisabled?!1:(this.alterClass("+disabled"),this._bDisabled=!0,x(this),!0)},O.dispose=function(){A(this)},O.enable=function(){return this._bDisabled?(this.alterClass("-disabled"),this._bDisabled=!1,!0):!1},O.focus=function(){this.isFocused()||K(this)},O.getBody=function(){return this._eBody},O.getBodyHeight=function(){return this.getHeight()-this.getMinimumHeight()},O.getBodyWidth=function(){return this.getWidth()-this.getMinimumWidth()},O.getClass=function(){return this._sClass},O.getContent=function(){return this._eBody.innerHTML},O.getHeight=function(){return this.cache(),this.$$height},O.getMain=function(){return this._eMain},O.getMinimumHeight=function(){return this.cache(),this.$getBasicHeight()+(this.$$bodyHeightRevise||0)},O.getMinimumWidth=function(){return this.cache(),this.$getBasicWidth()+(this.$$bodyWidthRevise||0)},O.getOuter=function(){return this._eMain},O.getParent=function(){return this._cParent||null},O.getPrimary=function(){return this._sPrimary},O.getType=function(){return this.constructor.agent.types[0]},O.getTypes=function(){return this.constructor.agent.types.slice()},O.getUID=function(){return this._sUID},O.getWidth=function(){return this.cache(),this.$$width},O.getX=function(){var a=this.getOuter();return this.isShow()?a.offsetLeft-y(a):0},O.getY=function(){var a=this.getOuter();return this.isShow()?a.offsetTop-z(a):0},O.hide=function(){this.isShow()&&L(this,"hide")},O.init=function(){this._bCreated||(this._bDisabled&&this.alterClass("+disabled"),this.$setSize(this.getWidth(),this.getHeight()),null===c?this.$ready():(c||(c=[],t(function(){for(var a,b=0;a=c[b++];)a.$ready();c=null})),this.$ready!=s&&c.push(this)),this._bCreated=!0)},O.isActived=function(){return this.contain(C())},O.isCapturable=function(){return this._bCapturable},O.isDisabled=function(){return this._bDisabled||!!this._cParent&&this._cParent.isDisabled()},O.isFocusable=function(){return this._bFocusable},O.isFocused=function(){return this.contain(D())},O.isHovered=function(){return this.contain(E())},O.isResizable=function(){return this._bResizable},O.isShow=function(){return!!this.getOuter().offsetWidth},O.isUserSelect=function(){return this._bUserSelect},O.render=function(){this.resize()},O.repaint=function(){this.cache(!0,!0),this.$setSize(this.getWidth(),this.getHeight())},O.resize=function(){this._bResizable&&(this.$resize(),this.repaint())},O.setBodySize=function(a,b){this.setSize(a&&a+this.getMinimumWidth(),b&&b+this.getMinimumHeight())},O.setClass=function(a){var b=0,c=this._sClass,d=this.getTypes(),e=[];if(a=a||this._sPrimary,a!=c){for(d.splice(0,0,this._sClass=a);d[b];)e[b]=this._aStatus.join(d[b++]);d[0]=c,this._eMain.className=e.join("")+this._eMain.className.split(/\s+/).join("  ").replace(new j("(^| )("+d.join("|")+")(-[^ ]+)?( |$)","g"),"")}},O.setContent=function(a){this._eBody.innerHTML=a},O.setParent=function(b){a(this,b,b&&b._eBody)},O.setPosition=function(a,b){var c=this.getOuter().style;c.left=a+"px",c.top=b+"px"},O.setSize=function(a,b){if(this._bResizable){this.cache();var c=this._eMain.style;a<this.getMinimumWidth()&&(a=0),b<this.getMinimumHeight()&&(b=0),this.$setSize(a,b),a&&(this._sWidth=c.width),b&&(this._sHeight=c.height)}},O.show=function(){return this.isShow()?!1:(L(this,"show"),!0)},function(){for(var a,b=0;a=M[b++];)O["$"+a]=O["$"+a]||s;O.$intercept=O.$append=O.$remove=O.$zoomstart=O.$zoom=O.$zoomend=O.$dragstart=O.$dragmove=O.$dragend=O.$ready=O.$pagescroll=s}()}(),function(){var a=ecui,b=a.dom,c=a.ui,d=a.util,e=b.setText,f=d.setDefault,g=a.inherits,h=c.Control,i=h.prototype,j=c.Button=g(h,"ui-button",function(a,b){f(b,"userSelect",!1),b.text&&e(a,b.text)}),k=j.prototype;k.$activate=function(a){i.$activate.call(this,a),a.stopPropagation()},k.$mouseout=function(a){i.$mouseout.call(this,a),this.isActived()&&this.alterClass("-active")},k.$mouseover=function(a){i.$mouseover.call(this,a),this.isActived()&&this.alterClass("+active")},k.setText=function(a){e(this.getBody(),a)}}(),function(){function a(b,c,d){var e=b._nValue,f=b.getMouseDirection();b._oStop(),-1==f&&0>c||1==f&&c>0?b.setValue(e+c):e=-1,b._oStop=b._nValue!=e?n(a,d||200,null,b,c,40):l}function b(a){var b,c=a.getParent();c&&(c.$scroll(),z[b=c.getUID()]||(n(function(){delete z[b],u(c,"scroll",!1)}),z[b]=!0))}var c=ecui,d=c.dom,e=c.ui,f=c.util,g=Math,h=g.floor,i=g.max,j=g.min,k=d.children,l=f.blank,m=f.setDefault,n=f.timer,o=c.$fastCreate,p=c.drag,q=c.getActived,r=c.getMouseX,s=c.getMouseY,t=c.inherits,u=c.triggerEvent,v=e.Control,w=v.prototype,x=e.Button,y=x.prototype,z=e.Scrollbar=t(v,"ui-scrollbar",function(a,b){m(b,"userSelect",!1),m(b,"focusable",!1);
var c=this.getType();a.innerHTML='<div class="'+c+"-prev"+this.Button.TYPES+'" style="position:absolute;top:0px;left:0px"></div><div class="'+c+"-next"+this.Button.TYPES+'" style="position:absolute;top:0px;left:0px"></div><div class="'+this.Thumb.TYPES+'" style="position:absolute"></div>'},function(a){a=k(a),this._nValue=this._nTotal=0,this._nStep=1,this._uPrev=o(this.Button,a[0],this,{focusable:!1}),this._uNext=o(this.Button,a[1],this,{focusable:!1}),this._uThumb=o(this.Thumb,a[2],this,{focusable:!1}),this._oStop=l}),A=z.prototype,B=(A.Thumb=t(x,"ui-scrollbar-thumb")).prototype,C=(A.Button=t(x,"ui-scrollbar-button")).prototype;B.$activate=function(a){y.$activate.call(this,a),p(this,a,this._oRange)},B.$dragmove=function(a,c,d){y.$dragmove.call(this,a,c,d);var e=this.getParent(),f=e.$calculateValue(c,d);e.$setValue(f==e._nTotal?f:f-f%e._nStep),b(e)},B.setRange=function(a,b,c,d){this._oRange={top:a,right:b,bottom:c,left:d}},C.$activate=function(b){y.$activate.call(this,b);var c=this.getParent();a(c,c.getMouseDirection()*i(c._nStep,5))},C.$deactivate=function(a){y.$deactivate.call(this,a),this.getParent()._oStop()},C.$mouseout=function(a){y.$mouseout.call(this,a),q()==this&&this.getParent()._oStop(!0)},C.$mouseover=function(a){y.$mouseover.call(this,a),q()==this&&this.getParent()._oStop(!0)},A.$activate=function(b){w.$activate.call(this,b),a(this,this.getMouseDirection()*this.$getPageStep())},A.$cache=function(a,b){w.$cache.call(this,a,b),this._uPrev.cache(!0,!0),this._uNext.cache(!0,!0),this._uThumb.cache(!0,!0)},A.$deactivate=function(a){w.$deactivate.call(this,a),this._oStop()},A.$hide=function(){w.$hide.call(this),A.setValue.call(this,0)},A.$mouseout=function(a){w.$mouseout.call(this,a),q()==this&&this._oStop(!0)},A.$mouseover=function(a){w.$mouseover.call(this,a),q()==this&&this._oStop(!0)},A.$setPageStep=function(a){this._nPageStep=a},A.$setSize=function(a,b){w.$setSize.call(this,a,b),this.$locate()},A.$setValue=function(a){this._nValue=a},A.getStep=function(){return this._nStep},A.getTotal=function(){return this._nTotal},A.getValue=function(){return this._nValue},A.init=function(){w.init.call(this),this._uPrev.init(),this._uNext.init(),this._uThumb.init()},A.setStep=function(a){a>0&&(this._nStep=a)},A.setTotal=function(a){a>=0&&this._nTotal!=a&&(this._nTotal=a,this._nValue>a&&(this._nValue=a,b(this)),this.$flushThumb())},A.setValue=function(a){a=j(i(0,a),this._nTotal),this._nValue!=a&&(this._nValue=a,b(this),this.$flushThumb())},A.skip=function(a){this.setValue(this._nValue+a*this._nStep)};var D=e.VScrollbar=t(z,"ui-vscrollbar"),E=D.prototype;E.$calculateValue=function(a,b){var c=this._uThumb,d=c._oRange;return(b-d.top)/(d.bottom-this._uPrev.getHeight()-c.getHeight())*this._nTotal},E.$flushThumb=function(){var a=this._uThumb,b=this._nTotal,c=this.getHeight(),d=this._uPrev.getHeight(),e=this.getBodyHeight(),f=i(h(e*c/(c+b)),a.getMinimumHeight()+5);b&&(a.$setSize(0,f),a.setPosition(0,d+h(this._nValue/b*(e-f))),a.setRange(d,0,e+d,0))},E.$getPageStep=function(){var a=this.getHeight();return this._nPageStep||a-a%this._nStep},E.$setSize=function(a,b){A.$setSize.call(this,a,b);var c=this.getBodyWidth(),d=this.$$paddingTop,e=this._uNext;this._uPrev.$setSize(c,d),e.$setSize(c,this.$$paddingBottom),this._uThumb.$setSize(c),e.setPosition(0,this.getBodyHeight()+d),this.$flushThumb()},E.getMouseDirection=function(){return s(this)<this._uThumb.getY()?-1:s(this)>this._uThumb.getY()+this._uThumb.getHeight()?1:0};var F=e.HScrollbar=t(z,"ui-hscrollbar"),G=F.prototype;G.$calculateValue=function(a){var b=this._uThumb,c=b._oRange;return(a-c.left)/(c.right-this._uPrev.getWidth()-b.getWidth())*this._nTotal},G.$flushThumb=function(){var a=this._uThumb,b=this._nTotal,c=this.getWidth(),d=this._uPrev.getWidth(),e=this.getBodyWidth(),f=i(h(e*c/(c+b)),a.getMinimumWidth()+5);b&&(a.$setSize(f),a.setPosition(d+h(this._nValue/b*(e-f)),0),a.setRange(0,e+d,0,d))},G.$getPageStep=function(){var a=this.getWidth();return a-a%this._nStep},G.$setSize=function(a,b){A.$setSize.call(this,a,b);var c=this.getBodyHeight(),d=this.$$paddingLeft,e=this._uNext;this._uPrev.$setSize(d,c),e.$setSize(this.$$paddingRight,c),this._uThumb.$setSize(0,c),e.setPosition(this.getBodyWidth()+d,0),this.$flushThumb()},G.getMouseDirection=function(){return r(this)<this._uThumb.getX()?-1:r(this)>this._uThumb.getX()+this._uThumb.getWidth()?1:0}}(),function(){function a(a){z(v(k(A(a).target)),"scroll")}var b=ecui,c=b.dom,d=b.ui,e=b.util,f=Math,g=f.max,h=f.min,i=f.floor,j=c.create,k=c.getParent,l=c.getPosition,m=c.getStyle,n=c.moveElements,o=e.attachEvent,p=e.blank,q=e.detachEvent,r=e.toNumber,s=b.$fastCreate,t=b.calcHeightRevise,u=b.calcWidthRevise,v=b.findControl,w=b.getKey,x=b.getScrollNarrow,y=b.inherits,z=b.triggerEvent,A=b.wrapEvent,B=d.Control,C=B.prototype,D=d.VScrollbar,E=d.HScrollbar,F=y(B,null,null,function(b){q(b,"scroll",a),o(b,"scroll",a)}),G=F.prototype;G.$hide=G.hide=function(){this.getMain().style[this._aProperty[0]]="hidden",G.setValue.call(this,0)},G.$setValue=function(a){this.getMain()[this._aProperty[1]]=h(g(0,a),this.getTotal())},G.$show=G.show=function(){this.getMain().style[this._aProperty[0]]="scroll"},G.getHeight=function(){return this._aProperty[4]?this.getMain()[this._aProperty[4]]:x()},G.getTotal=function(){return r(this.getMain().lastChild.style[this._aProperty[2]])},G.getValue=function(){return this.getMain()[this._aProperty[1]]},G.getWidth=function(){return this._aProperty[3]?this.getMain()[this._aProperty[3]]:x()},G.isShow=function(){return"hidden"!=this.getMain().style[this._aProperty[0]]},G.setTotal=function(a){this.getMain().lastChild.style[this._aProperty[2]]=a+"px"},G.setValue=function(a){this.$setValue(a),z(this.getParent(),"scroll")},G.$cache=G.$getPageStep=G.$setPageStep=G.$setSize=G.alterClass=G.cache=G.getStep=G.init=G.setPosition=G.setStep=G.skip=p;var H=y(F,null,null,function(){this._aProperty=["overflowY","scrollTop","height",null,"offsetHeight"]}),I=y(F,null,null,function(){this._aProperty=["overflowX","scrollLeft","width","offsetWidth",null]}),J=y(B),K=J.prototype;!function(){for(var a in C)K[a]=p}();var L=d.Panel=y(B,"ui-panel",function(a,b){var c=b.vScroll!==!1,d=b.hScroll!==!1,e=this.getType(),f=j(e+"-body","position:absolute;top:0px;left:0px"+(d?";white-space:nowrap":""));a.style.overflow="hidden",n(a,f,!0),a.innerHTML=(b.browser?'<div style="position:absolute;top:0px;left:0px;overflow:auto;padding:0px;border:0px"><div style="width:1px;height:1px;padding:0px;border:0px"></div></div>':(c?'<div class="'+e+"-vscrollbar"+this.VScrollbar.TYPES+'" style="position:absolute"></div>':"")+(d?'<div class="'+e+"-hscrollbar"+this.HScrollbar.TYPES+'" style="position:absolute"></div>':"")+(c&&d?'<div class="'+e+"-corner"+B.TYPES+'" style="position:absolute"></div>':""))+'<div class="'+e+'-layout" style="position:relative;overflow:hidden;padding:0px"></div>',a.lastChild.appendChild(f)},function(a,b){var c,d=0,e=b.browser,f=b.vScroll!==!1,g=b.hScroll!==!1,h=[[f,"_uVScrollbar",e?H:this.VScrollbar],[g,"_uHScrollbar",e?I:this.HScrollbar],[f&&g,"_uCorner",e?J:B]];for(this.$setBody(a.lastChild.lastChild),this._bAbsolute=b.absolute,this._nWheelDelta=b.wheelDelta,a=a.firstChild,e&&(this._eBrowser=a);c=h[d++];)c[0]&&(this[c[1]]=s(c[2],a,this),e||(a=a.nextSibling))}),M=L.prototype;M.VScrollbar=D,M.HScrollbar=E,M.$cache=function(a,b){C.$cache.call(this,a,b);var c=this.getBody(),d=c.offsetWidth,e=c.offsetHeight;if(a=m(k(c)),this.$$bodyWidthRevise=u(a),this.$$bodyHeightRevise=t(a),this._bAbsolute)for(var f=0,h=c.all||c.getElementsByTagName("*"),i=l(c);c=h[f++];)c.offsetWidth&&"absolute"==m(c,"position")&&(a=l(c),d=g(d,a.left-i.left+c.offsetWidth),e=g(e,a.top-i.top+c.offsetHeight));this.$$mainWidth=d,this.$$mainHeight=e,this._uVScrollbar&&this._uVScrollbar.cache(!0,!0),this._uHScrollbar&&this._uHScrollbar.cache(!0,!0),this._uCorner&&this._uCorner.cache(!0,!0)},M.$dispose=function(){this._eBrowser=null,C.$dispose.call(this)},M.$keydown=M.$keypress=function(a){var b=w(),c=b%2?this._uHScrollbar:this._uVScrollbar;return b>=37&&40>=b&&!a.target.value?(c&&c.skip(b+b%2-39),!1):void 0},M.$mousewheel=function(a){if(this.isHovered()&&(b=this._uVScrollbar,b&&b.isShow())){var b,c=b.getValue(),d=this._nWheelDelta||i(20/b.getStep())||1;return b.skip(a.detail>0?d:-d),a.stopPropagation(),c==b.getValue()}},M.$scroll=function(){var a=this.getBody().style;a.left=-g(this.getScrollLeft(),0)+"px",a.top=-g(this.getScrollTop(),0)+"px"},M.$setSize=function(a,b){C.$setSize.call(this,a,b),this.$locate();var c=this.$getBasicWidth(),d=this.$getBasicHeight(),e=this.$$paddingLeft+this.$$paddingRight,f=this.$$paddingTop+this.$$paddingBottom,g=this.getWidth()-c,h=this.getHeight()-d,i=this.$$mainWidth,j=this.$$mainHeight,l=this._eBrowser,m=this._uVScrollbar,n=this._uHScrollbar,o=this._uCorner,p=m?m.getWidth():0,q=n?n.getHeight():0,r=g-p,s=h-q,t=r+e,u=s+f;if(m&&m.setPosition(t,0),n&&n.setPosition(0,u),o&&o.setPosition(t,u),g>=i&&h>=j)m&&m.$hide(),n&&n.$hide(),o&&o.$hide(),r=g,s=h;else for(;;){if(o){if(i>r&&j>s){n.$setSize(t),n.setTotal(l?i+c:i-r),n.$show(),m.$setSize(0,u),m.setTotal(l?j+d:j-s),m.$show(),o.$setSize(p,q),o.$show();break}o.$hide()}n&&(i>g?(n.$setSize(g+e),n.setTotal(l?i+c:i-g),n.$show(),m&&m.$hide(),r=g):n.$hide()),m&&(j>h?(m.$setSize(0,h+f),m.setTotal(l?j+d:j-h),m.$show(),n&&n.$hide(),s=h):m.$hide());break}r-=this.$$bodyWidthRevise,s-=this.$$bodyHeightRevise,m&&m.$setPageStep(s),n&&n.$setPageStep(r),l&&(o=l.style,o.width=g+e+"px",o.height=h+f+"px"),o=k(this.getBody()).style,o.width=r+"px",o.height=s+"px"},M.getScrollLeft=function(){var a=this._uHScrollbar;return a?a.getValue():-1},M.getScrollTop=function(){var a=this._uVScrollbar;return a?a.getValue():-1},M.init=function(){C.init.call(this),this._uVScrollbar&&this._uVScrollbar.init(),this._uHScrollbar&&this._uHScrollbar.init(),this._uCorner&&this._uCorner.init()},M.reset=function(){this._uVScrollbar&&this._uVScrollbar.setValue(0),this._uHScrollbar&&this._uHScrollbar.setValue(0)}}(),function(){var a,b=ecui,c=b.array,d=b.dom,e=b.string,f=b.ui,g=b.util,h=c.indexOf,i=c.remove,j=d.children,k=d.create,l=d.insertBefore,m=e.trim,n=g.blank,o=g.callSuper,p=b.$fastCreate,q=b.getOptions,r=b.inherits,s=b.triggerEvent,t=f.Control,u=t.prototype,v=f.Item=r(t,"ui-item",function(a){a.style.overflow="hidden"}),w=v.prototype,x=f.Items={};w.$click=function(a){u.$click.call(this,a);var b=this.getParent();b&&s(b,"itemclick",a,[h(x[b.getUID()],this)])},x.$append=function(a){return a instanceof(this.Item||v)&&o(this,"$append")!==!1?(x[this.getUID()].push(a),this.$alterItems(),void 0):!1},x.$cache=function(){o(this,"$cache");for(var a,b=0,c=x[this.getUID()];a=c[b++];)a.cache(!0,!0)},x.$dispose=function(){delete x[this.getUID()],o(this,"$dispose")},x.$initItems=function(){this.$alterItems=this.$initItems=n,x[this.getUID()]=[];for(var a,b=0,c=j(this.getBody());a=c[b++];)this.add(a);delete this.$alterItems},x.$remove=function(a){o(this,"$remove"),i(x[this.getUID()],a),this.$alterItems()},x.add=function(a,b,c){var d,e=x[this.getUID()];return a instanceof v?a.setParent(this):("string"==typeof a&&(this.getBody().appendChild(d=k()),d.innerHTML=a,a=d),d=this.Item||v,a.className=m(a.className)+" "+this.getType()+"-item"+d.TYPES,c=c||q(a),c.parent=this,c.select=!1,e.push(a=p(d,a,this,c)),this.$alterItems()),a.getParent()&&(d=e[b])&&d!=a&&(l(a.getOuter(),d.getOuter()),e.splice(b,0,e.pop())),a},x.append=function(b,c){this.add(b,a,c)},x.getItems=function(){return x[this.getUID()].slice()},x.init=function(){o(this,"init"),this.$alterItems()},x.remove=function(a){return"number"==typeof a&&(a=x[this.getUID()][a]),a&&a.setParent(),a||null},x.setItemSize=function(a,b){for(var c,d=0,e=x[this.getUID()];c=e[d++];)c.$setSize(a,b)}}(),function(){function a(a){if(t(a._eInput,a),!a._bHidden)for(var b in B)q(a._eInput,b,B[b])}var b,c=ecui,d=c.dom,e=c.string,f=c.ui,g=c.util,h=document,i=RegExp,j=navigator.userAgent,k=/msie (\d+\.\d)/i.test(j)?h.documentMode||i.$1-0:b,l=d.create,m=d.insertBefore,n=d.setInput,o=d.setStyle,p=e.encodeHTML,q=g.attachEvent,r=g.blank,s=g.detachEvent,t=(g.timer,c.$bind),u=c.inherits,v=c.triggerEvent,w=c.wrapEvent,x=f.Control,y=x.prototype,z=f.InputControl=u(x,null,function(a,c){if("INPUT"==a.tagName||"TEXTAREA"==a.tagName){var d=a;m(a=l(d.className,d.style.cssText,"span"),d).appendChild(d),d.className=""}else d=a.getElementsByTagName("INPUT")[0]||a.getElementsByTagName("TEXTAREA")[0],d||(d=n(null,c.name,c.inputType),d.defaultValue=d.value=c.value===b?"":c.value.toString(),a.appendChild(d));return o(a,"display","inline-block"),d.style.border="0px",c.hidden&&(d.style.display="none"),c.checked&&(d.defaultChecked=d.checked=!0),a},function(b,c){this._bHidden=c.hidden,this._eInput=b.getElementsByTagName("INPUT")[0]||b.getElementsByTagName("TEXTAREA")[0],g.validator&&(this._aValidateRules=g.validator.collectRules(c)),a(this)}),A=z.prototype,B={};B.blur=B.focus=function(a){var b=a.type;w(a).target.getControl&&(a=w(a).target.getControl(),a["$"+b]=y["$"+b],a[b](),delete a["$"+b])},B.dragover=B.drop=function(a){w(a).exit()},k?B.propertychange=function(a){"value"==a.propertyName&&v(w(a).target.getControl(),"change")}:B.input=function(){v(this.getControl(),"change")},A.$dispose=function(){this._eInput.getControl=b,this._eInput=null,y.$dispose.call(this)},A.$reset=function(){this.$ready()},A.$setParent=function(a){y.$setParent.call(this,a),(a=this._eInput.form)&&a.getControl&&a.getControl().addItem(this.getName(),this)},A.$setSize=function(a,b){y.$setSize.call(this,a,b),this._eInput.style.width=this.getBodyWidth()+"px",this._eInput.style.height=this.getBodyHeight()+"px"},A.$submit=r,A.disable=function(){if(y.disable.call(this)){var a=this.getBody();return this._bHidden?this._eInput.disabled=!0:(a.removeChild(this._eInput),"password"!=this._eInput.type&&(a.innerHTML=p(this._eInput.value))),!0}return!1},A.enable=function(){if(y.enable.call(this)){var a=this.getBody();return this._bHidden?this._eInput.disabled=!1:(a.innerHTML="",a.appendChild(this._eInput)),!0}return!1},A.getInput=function(){return this._eInput},A.getName=function(){return this._eInput.name},A.getSelectionEnd=k?function(){var a=h.selection.createRange().duplicate();return a.moveStart("character",-this._eInput.value.length),a.text.length}:function(){return this._eInput.selectionEnd},A.getSelectionStart=k?function(){var a=h.selection.createRange().duplicate(),b=this._eInput.value.length;return a.moveEnd("character",b),b-a.text.length}:function(){return this._eInput.selectionStart},A.getValue=function(){return this._eInput.value},A.setCaret=k?function(a){var b=this._eInput.createTextRange();b.collapse(),b.select(),b.moveStart("character",a),b.collapse(),b.select()}:function(a){this._eInput.setSelectionRange(a,a)},A.setName=function(b){var c=n(this._eInput,b||"");this._eInput!=c&&(a(this),this._eInput=c)},A.setValue=function(a){var b=this._eInput,c=B.propertychange;c&&s(b,"propertychange",c),b.value=a,c&&q(b,"propertychange",c)},A.validate=function(){return!0},A.setDefaultValue=function(){var a=this.getValue();this._eInput.defaultValue=a},function(){function a(a){A["$"+a]=function(){y["$"+a].call(this);var b=this._eInput;s(b,a,B[a]);try{b[a]()}catch(c){}q(b,a,B[a])}}a("blur"),a("focus")}()}(),function(){function a(a){b.hide(),this._fAction&&this._fAction.call(null,a)}var b,c=ecui,d=c.dom,e=d.create,f=c.create,g=c.dispose,h=[];c.$messagebox=function(c,d,i,j){b||(b=f("Form",{main:e("ui-form ui-messagebox"),hide:!0,parent:document.body,autoCenter:!0,closeButton:!1}),n=b.getBody(),n.innerHTML='<div class="ui-messagebox-text"></div><div class="ui-messagebox-bottom"></div>');var k,l=0,m=i.length,n=b.getBody(),o=n.lastChild;if(!b.isShow()){for(;m>h.length;)h.push(f("Button",{element:e("ui-button","","span"),parent:o}));for(g(n=n.firstChild),n.innerHTML=c;k=h[l];l++)m>l?(k.setContent(i[l].text),k.$show(),k._fAction=i[l].action,k.onclick=a,i[l].className?k.setClass(i[l].className):k.setClass(k.getPrimary())):k.$hide();b.setTitle(d||"提示"),b.showModal(j)}},c.alert=function(a,b){c.$messagebox(a,"提示",[{text:"确定",className:"ui-button-g",action:b}])},c.confirm=function(a,b,d){c.$messagebox(a,"确认",[{text:"确定",className:"ui-button-g",action:b},{text:"取消",action:d}])}}(),function(){var a=ecui,b=a.ui,c=a.util,d=a.inherits,e=(a.triggerEvent,c.blank),f=c.extend,g=b.Control,h=g.prototype,i=b.Items,j=b.InputControl,k=j.prototype,l=b.Score=d(j,"ui-score",function(a,b){var c,d=b.max=b.max||5,e=[];for(b.hidden=!0,b.value=b.value||0,c=1;d>=c;c++)e.push('<span ecui="score:'+c+'"></span>');a.innerHTML=e.join("")},function(a,b){this._bStatic=b["static"]===!0,this.$initItems()}),m=l.prototype,n=m.Item=d(g,"ui-score-item",function(a,b){b.resizable=!1},function(a,b){this._nScore=b.score}),o=n.prototype;f(m,i),m.init=function(){k.init.call(this),this.$score(this.getValue())},m.$score=function(a){var b,c,d=this.getItems();for(a=a||this.getValue(),b=0;c=d[b];b++)c.alterClass(a>b?"+marked":"-marked")},m.setValue=function(a){k.setValue.call(this,a),this.$score(a)},m.$alterItems=e,o.getScore=function(){return this._nScore},o.$click=function(){this.getParent()._bStatic||(this.getParent().setValue(this.getScore()),k.$click.call(this))},o.$mouseout=function(){this.getParent()._bStatic||(this.getParent().$score(),h.$mouseout.call(this))},o.$mouseover=function(){this.getParent()._bStatic||(this.getParent().$score(this.getScore()),h.$mouseover.call(this))},o.$setSize=e}(),function(){function a(){var a;return s||(a=document.body.appendChild(h(v.TYPES)),s=g(v,a),s.cache(),s.init()),s}var b=ecui,c=(b.array,b.dom),d=b.ui,e=b.util,f=b.string,g=b.$fastCreate,h=(b.setFocused,c.create),i=c.children,j=(c.last,c.moveElements,c.getPosition),k=(c.setText,b.inherits),l=(b.isContentBox,b.getStatus,e.getView),m=b.triggerEvent,n=f.trim,o=d.Control,p=o.prototype,q=500,r=200,s=(b.REPAINT,null),t=d.Tip=k(o,"ui-tip",function(a,b){b.message=n(a.innerHTML)||b.message,a.innerHTML=""},function(a,b){this._sTarget=b.target,this._sMessage=b.message,this._oTimer=null,this._bAsyn=b.asyn===!0,this._bLoad=!1}),u=t.prototype,v=u.Layer=k(o,"ui-tip-layer",function(a){a.appendChild(h(this.getTypes()+"-corner")),a.appendChild(h())},function(a){a=i(a),this._eCorner=a[0],this.$setBody(a[1])}),w=v.prototype;u.$mouseover=function(){var b=this;p.$mouseover.call(this),clearTimeout(this._oTimer),this._bShow||(this._bAsyn?(a(),this.close(),b._oTimer=setTimeout(function(){b._bLoad=!1,m(b,"loadData",function(){b.open()})},q)):this._oTimer=setTimeout(function(){b.open()},q))},u.$mouseout=function(){var a=this;p.$mouseout.call(this),clearTimeout(this._oTimer),this._bShow&&(this._oTimer=setTimeout(function(){a.close()},r))},u.$getTarget=function(a){return document.getElementById(a)},u.setTarget=function(a){this._sTarget=a},u.open=function(){var b=a();if(this._sTarget){var c=this.$getTarget(this._sTarget);c&&(b.getBody().innerHTML="[object String]"==Object.prototype.toString.call(c)?c:c.innerHTML)}else this._sMessage&&b.setContent(this._sMessage);b.show(this),this._bShow=!0},u.close=function(){a().hide(),this._bShow=!1},w.show=function(a){var b=j(a.getOuter()),c=this.getTypes()[0],d=l(),e=13,f=a.getWidth(),g=a.getHeight(),h=9,i=[];a&&(this._uHost=a),p.show.call(this),this.resize(),b.left+this.getWidth()>d.right?(b.left=b.left+f-this.getWidth()+h,i.push("-right")):(b.left=b.left-h,i.push("-left")),b.top-e-this.getHeight()<d.top&&b.top+g+e+this.getHeight()<d.bottom?(b.top+=g+e,i.push("-bottom")):(b.top-=e+this.getHeight(),i.push("-top")),this._eCorner.className=c+"-corner "+c+"-corner"+i.join(""),this.setPosition(b.left,b.top)},w.$mouseover=function(){p.$mouseover.call(this),this._uHost.$mouseover()},w.$mouseout=function(){p.$mouseout.call(this),this._uHost.$mouseout()},w.$resize=function(){var a=this._eMain,b=a.style;b.width=this._sWidth,b.height=this._sHeight,this.repaint()}}(),function(){function a(a,c){if(c!==a._nStatus){a.setClass(a.getPrimary()+["-checked","","-part"][c]),a._nStatus=c;var d=a.getInput();d.defaultChecked=d.checked=!c,a._cSubject&&b(a._cSubject)}}function b(b){for(var d,e,f=0;e=b._aDependents[f++];){if(d!==c&&d!=e._nStatus){d=2;break}d=e._nStatus}d!==c&&a(b,d)}var c,d=ecui,e=d.array,f=d.ui,g=d.util,h=e.remove,i=g.setDefault,j=d.$connect,k=d.getKey,l=d.inherits,m=f.InputControl,n=m.prototype,o=f.Checkbox=l(m,"ui-checkbox",function(a,b){i(b,"hidden",!0),i(b,"inputType","checkbox")},function(a,b){this._bDefault=this.getInput().defaultChecked,this._aDependents=[],j(this,this.setSubject,b.subject)}),p=o.prototype;p.$click=function(a){n.$click.call(this,a),this.setChecked(!!this._nStatus)},p.$dispose=function(){var a,b,c=this._aDependents.slice(0);for(this.setSubject(),a=0;b=c[a];a++)b.setSubject();n.$dispose.call(this)},p.$keydown=p.$keypress=p.$keyup=function(a){n["$"+a.type].call(this,a),32==k()&&("keyup"==a.type&&this.setChecked(!!this._nStatus),a.preventDefault())},p.$ready=function(){this._aDependents.length||a(this,this.getInput().checked?0:1)},p.$reset=function(a){this.getInput().checked=this._bDefault,n.$reset.call(this,a)},p.getDependents=function(){return this._aDependents.slice()},p.getSubject=function(){return this._cSubject||null},p.isChecked=function(){return!this._nStatus},p.setChecked=function(b){a(this,b?0:1);for(var c,d=0;c=this._aDependents[d++];)c.setChecked(b)},p.setDefaultValue=function(){this._bDefault=this.isChecked()},p.setSubject=function(a){var c=this._cSubject;c!=a&&(this._cSubject=a,c&&(h(c._aDependents,this),b(c)),a&&(a._aDependents.push(this),b(a)))}}(),function(){function a(a,c){if(c!==b){var d=a.getInput();d.defaultChecked=d.checked=c}a.setClass(a.getPrimary()+(a.isChecked()?"-checked":""))}var b,c=ecui,d=c.ui,e=c.util,f=e.setDefault,g=c.getKey,h=c.inherits,i=c.query,j=d.InputControl,k=j.prototype,l=d.Radio=h(j,"ui-radio",function(a,b){f(b,"hidden",!0),f(b,"inputType","radio")},function(){this._bDefault=this.getInput().defaultChecked}),m=l.prototype;m.$click=function(a){k.$click.call(this,a),this.setChecked(!0)},m.$keydown=m.$keypress=m.$keyup=function(a){k["$"+a.type].call(this,a),32==a.which&&("keyup"==a.type&&32==g()&&this.setChecked(!0),a.preventDefault())},m.$ready=function(){a(this)},m.$reset=function(a){this.getInput().checked=this._bDefault,k.$reset.call(this,a)},m.getItems=function(){var a=0,b=this.getInput(),c=b.form,d=b.name,e=[];if(d){if(c){for(b=c[d];d=b[a++];)d.getControl&&e.push(d.getControl());return e}return i({type:l,custom:function(a){return!a.getInput().form&&a.getName()==d}})}return[this]},m.isChecked=function(){return this.getInput().checked},m.setChecked=function(b){if(this.isChecked()!=b)if(b)for(var c,d=0,e=this.getItems();c=e[d++];)a(c,c==this);else a(this,!1)},m.setDefaultValue=function(){this._bDefault=this.isChecked()}}(),function(){var a=ecui,b=a.ui,c=a.util,d=a.inherits,e=a.$connect,f=a.triggerEvent,g=c.blank,h=b.Control,i=h.prototype,j=["click","mouseover","mouseout","mouseup","mousedown"],k=b.Label=d(h,"ui-label",null,function(a,b){this._bResizable=!1,e(this,this.setFor,b["for"])}),l=k.prototype;l.setFor=function(a){this._cFor=a},l.$setSize=g,function(){var a,b;for(a=0;b=j[a];a++)l["$"+b]=function(a){return function(b){i["$"+a].call(this,b);var c=this._cFor;c&&!c.isDisabled()&&f(c,a,b)}}(b)}()}(),function(){function a(a){var b,c=a||window.event;c.preventDefault?c.preventDefault():c.cancelBuble=!0,c=c.target||c.srcElement,b=c.parentNode.getControl(),b.getInput().focus()}function b(a,b){a._eTip&&(a._eTip.style.display=b?"":"none")}var c=ecui,d=c.dom,e=c.string,f=c.ui,g=c.util,h=g.attachEvent,i=d.create,j=(e.trim,c.setFocused,g.blank),k=c.inherits,l=f.Control,m=l.prototype,n=f.InputControl,o=n.prototype,p=f.Input=k(n,"ui-input",function(a,b){b.resizable=!1},function(b,c){var d,e=this.getType();this.getInput().style.border="",c.maxLength&&(this._sMaxLength=c.maxLength),c.tip&&(d=i(e+"-tip","display:none"),d.innerHTML=c.tip,this.getBody().appendChild(d),this._eTip=d,h(this._eTip,"mousedown",a))}),q=p.prototype;f.Textarea=k(p,"ui-textarea",function(a,b){b.inputType="textarea"}),q.$keydown=function(){b(this,!1)},q.$keyup=function(){var a=this.getValue();this._sMaxLength&&baidu.string.getByteLength(a)>this._sMaxLength&&this.setValue(baidu.string.subByte(a,this._sMaxLength)),a||b(this,!0)},q.$blur=function(){m.$blur.call(this),this.getValue()||b(this,!0)},q.$setSize=j,q.setValue=function(a){o.setValue.call(this,a),b(this,a?!1:!0)},q.init=function(){this.getValue()||b(this,!0),o.init.call(this)}}(),function(){function a(a){H.push(H.splice(k(H,a),1)[0]);for(var b,c=0,d=H.length-I;b=H[c++];)b.getOuter().style.zIndex=c>d?32767+2*(c-d):4095+c}var b,c=ecui,d=c.array,e=c.dom,f=c.ui,g=c.string,h=c.util,i=Math,j=i.max,k=d.indexOf,l=e.children,m=e.create,n=e.first,o=e.getStyle,p=e.moveElements,q=g.encodeHTML,r=h.getView,s=c.$fastCreate,t=c.calcHeightRevise,u=c.calcWidthRevise,v=c.drag,w=c.inherits,x=c.loseFocus,y=c.mask,z=c.setFocused,A=f.Control,B=f.Control.prototype,C=f.Button,D=f.Form=w(A,"ui-form",function(a,b){var c=this.getType(),d=m(c+"-body","position:relative;overflow:auto"),e=n(a);p(a,d,!0),e&&"LABEL"==e.tagName?(a.innerHTML='<div class="'+c+"-close"+this.Close.TYPES+'" style="position:absolute"></div>',a.insertBefore(e,a.firstChild),e.className=c+"-title"+this.Title.TYPES,e.style.position="absolute"):(a.innerHTML='<label class="'+c+"-title"+this.Title.TYPES+'" style="position:absolute">'+(b.title?q(b.title):"")+'</label><div class="'+c+"-close"+this.Close.TYPES+'" style="position:absolute"></div>',e=a.firstChild),a.style.overflow="hidden",a.appendChild(d)},function(a,b){this._bAutoHeight=!a.style.height,a=l(a),this._bFlag=b.hide,this._bAutoTitle=b.autoTitle!==!1,this._bAutoCenter=b.autoCenter===!0,this._uTitle=s(this.Title,a[0],this,{userSelect:!1}),this._uClose=s(this.Close,a[1],this),b.closeButton===!1&&this._uClose.$hide(),this.$setBody(a[2])}),E=D.prototype,F=(E.Title=w(A)).prototype,G=(E.Close=w(C)).prototype,H=[],I=0;F.$activate=function(a){B.$activate.call(this,a),v(this.getParent(),a)},G.$click=function(a){B.$click.call(this,a),this.getParent().hide()},E.$cache=function(a,b){B.$cache.call(this,a,b),a=o(this.getMain().lastChild),this.$$bodyWidthRevise=u(a),this.$$bodyHeightRevise=t(a),this._uTitle.cache(!0,!0),this._uClose.cache(!0,!0)},E.$dispose=function(){if(k(H,this)>=0)try{this.$hide()}catch(a){}B.$dispose.call(this)},E.$focus=function(){B.$focus.call(this),a(this)},E.$hide=function(){var a=k(H,this);a>=0&&H.splice(a,1),a>H.length-I&&(this._bFlag&&(a==H.length?y():H[a]._bFlag=!0,this._bFlag=!1),I--),B.$hide.call(this),x(this)},E.$setSize=function(a,b){this._bAutoHeight&&(b=null),B.$setSize.call(this,a,b),this.$locate();var c=this.getMain().lastChild.style;c.width=this.getBodyWidth()+"px",this._bAutoHeight||(c.height=this.getBodyHeight()+"px"),this._bAutoTitle&&this._uTitle.$setSize(this.getWidth()-this.$getBasicWidth())},E.$show=function(){H.push(this),B.$show.call(this),z(this)},E.center=function(){if(a=this.getOuter(),a.style.position=this.$$position="absolute",a=a.offsetParent,a&&"BODY"!=a.tagName&&"HTML"!=a.tagName)b=a.offsetWidth,c=a.offsetHeight;else var a=r(),b=a.right+a.left,c=a.bottom+a.top;this.setPosition(j((b-this.getWidth())/2,0),j((c-this.getHeight())/2,0))},E.hide=function(){for(var a,b=k(H,this);a=H[++b];)if(a._bFlag)return!1;return B.hide.call(this)},E.init=function(){B.init.call(this),this._uTitle.init(),this._uClose.init(),this._bFlag?(this._bFlag=!1,this.$hide()):this.$show()},E.setTitle=function(a){this._uTitle.setContent(a||"")},E.show=function(){I&&k(H,this)<H.length-I&&I++;var b=B.show.call(this);return b?this._bAutoCenter&&this.center():a(this),b},E.$resize=function(){var a=this.getMain().lastChild.style;B.$resize.call(this),a.width="",a.height=""},E.getHeight=function(){return this._bAutoHeight&&this.cache(!0,!0),B.getHeight.call(this)},E.showModal=function(c){this._bFlag||(k(H,this)<H.length-I&&I++,y(c!==b?c:.05,32766+2*I),this._bFlag=!0,B.show.call(this)?this._bAutoCenter&&this.center():a(this))}}(),function(){var a=ecui,b=(a.array,a.dom),c=a.ui,d=a.util,e=(a.string,a.$fastCreate),f=a.setFocused,g=b.create,h=b.children,i=b.moveElements,j=b.getPosition,k=a.inherits,l=a.triggerEvent,m=d.getView,n=d.blan,o=c.Control,p=o.prototype,q=c.Button,r=q.prototype,s=c.Pop=k(o,"ui-pop",null,function(a,b){var c,d=this.getTypes()[0],f=g();a.style.position="absolute",b.noButton!==!0&&(f.innerHTML='<div class="'+d+'-buttons"><div class="ui-button ui-button-g">确定</div><div class="ui-button">取消</div></div>',c=h(f.firstChild),this._uSubmitBtn=e(this.Button,c[0],this,{command:"submit",primary:"ui-button-g"}),this._uCancelBtn=e(this.Button,c[1],this,{command:"cancel"}),i(f,a,!0))}),t=s.prototype;UI_POP_BTN=t.Button=k(q,null,function(a,b){this._sCommand=b.command}),UI_POP_BTN_CLASS=UI_POP_BTN.prototype,t.show=function(a,b){var c,d,e=m(),g=j(a.getOuter());p.show.call(this),this.resize(),d=this.getWidth(),c=a.getHeight()+g.top,d=b||"left"!=b?g.left+a.getWidth()-d<0?g.left:g.left+a.getWidth()-d:g.left+d>e.right?g.left+a.getWidth()-d:g.left,c+this.getHeight()>e.bottom&&(c=e.bottom-this.getHeight());var h=this.getOuter().offsetParent;if(!h||"BODY"!==h.tagName&&"HTML"!==h.tagName){var i=j(this.getOuter().offsetParent);d-=i.left,c-=i.top}this.setPosition(d,c),f(this)},t.$resize=function(){var a=this._eMain,b=a.style;b.width=this._sWidth,b.height=this._sHeight,this.repaint()},t.init=function(){p.init.call(this),this.$hide()},t.$blur=function(){this.hide(),l(this,"cancel")},UI_POP_BTN_CLASS.$click=function(){var a=this.getParent();r.$click.call(this),l(a,this._sCommand)&&(a.$blur=n,a.hide(),delete a.$blur)};var u=c.PopButton=k(q,"ui-pop-button",function(a,b){var c=this.getTypes()[0],d=g(c+"-icon","position:absolute");this._sAlign=b.align,a.appendChild(d),this._sTargetId=b.target},function(a,b){var c=this.getTypes()[0];"text"==b.mode&&this.setClass(c+"-text")}),v=u.prototype;v.$click=function(){var b;r.$click.call(this),this._sTargetId&&(b=a.get(this._sTargetId),b.show(this,this._sAlign))}}(),function(){function a(a){var b=a._uOptions,c=b.$getSection("VScrollbar"),d=b.getOuter(),e=r(a.getOuter()),f=a._cSelected,g=e.top+a.getHeight();q(d)||(j.body.appendChild(d),a.cache(!1,!0),a.$alterItems()),b.isShow()&&(f&&H(f),c.setValue(c.getStep()*n(a.getItems(),f)),a=b.getHeight(),b.setPosition(e.left,g+a<=y().bottom?g:e.top-a))}function b(a,b){b!==a._cSelected&&(a._uText.setContent(b?b.getBody().innerHTML:""),K.setValue.call(a,b?b._sValue:""),a._cSelected=b,a._uOptions.isShow()&&H(b))}var c,d=ecui,e=d.array,f=d.dom,g=d.string,h=d.ui,i=d.util,j=document,k=Math,l=k.max,m=k.min,n=e.indexOf,o=f.children,p=f.create,q=f.getParent,r=f.getPosition,s=f.getText,t=(f.insertAfter,f.insertBefore),u=f.moveElements,v=f.remove,w=g.encodeHTML,x=i.extend,y=i.getView,z=i.setDefault,A=d.$fastCreate,B=d.getAttributeName,C=d.getFocused,D=d.inherits,E=d.intercept,F=d.mask,G=d.restore,H=d.setFocused,I=d.triggerEvent,J=h.InputControl,K=J.prototype,L=h.Button,M=h.Scrollbar,N=h.Panel,O=N.prototype,P=h.Item,Q=P.prototype,R=h.Items,S=h.Select=D(J,"ui-select",function(a,b){var c=a.name||b.name||"",d=this.getType(),e=b.id||"id_notset",f=p(d+"-options"+this.Options.TYPES,"position:absolute;z-index:65535;display:none");if(f.setAttribute("ecui_id",e),z(b,"hidden",!0),"SELECT"==a.tagName){var g=0,h=[],i=a.options,j=a;for(b.value=a.value,a=t(p(a.className,a.style.cssText,"span"),a),v(j);j=i[g];)h[g++]="<div "+B()+'="value:'+w(j.value)+'">'+j.text+"</div>";f.innerHTML=h.join("")}else u(a,f);return a.innerHTML='<span class="'+d+"-text"+P.TYPES+'"></span><span class="'+d+"-button"+L.TYPES+'" style="position:absolute"></span><input name="'+c+'" value="'+w(b.value||"")+'">',a.appendChild(f),a},function(a,b){a=o(a),this._uText=A(P,a[0],this,{capturable:!1}),this._uButton=A(L,a[1],this,{capturable:!1}),this._uOptions=A(this.Options,v(a[3]),this,{hScroll:!1,browser:b.browser}),this.$setBody(this._uOptions.getBody()),this._nOptionSize=b.optionSize||5,this.$initItems()}),T=S.prototype,U=(T.Options=D(N)).prototype,V=(T.Item=D(P,null,null,function(a,b){this._sValue=b.value===c?s(a):""+b.value})).prototype;x(T,R),U.$dispose=function(){this.hide(),O.$dispose.call(this)
},U.$hide=function(){O.$hide.call(this),F(),G()},V.$mouseover=function(a){Q.$mouseover.call(this,a),H(this)},V.getValue=function(){return this._sValue},V.setValue=function(a){var b=this.getParent();this._sValue=a,b&&this==b._cSelected&&K.setValue.call(b,a)},T.$activate=function(b){b.getControl()instanceof M||(K.$activate.call(this,b),this._uOptions.show(),E(this),F(0,65534),a(this),b.stopPropagation())},T.$alterItems=function(){var a=this._uOptions,b=a.$getSection("VScrollbar"),c=this._nOptionSize,d=this.getBodyHeight(),e=this.getWidth(),f=this.getItems().length;q(a.getOuter())&&(b.setStep(d),this.setItemSize(e-a.getMinimumWidth()-(f>c?b.getWidth():0),d),a.$$mainHeight=f*d+a.$$bodyHeightRevise,a.$setSize(e,(m(f,c)||1)*d+a.getMinimumHeight()))},T.$cache=function(a,b){(q(this._uOptions.getOuter())?R:K).$cache.call(this,a,b),this._uText.cache(!1,!0),this._uButton.cache(!1,!0),this._uOptions.cache(!1,!0)},T.$intercept=function(a){this._uOptions.hide();for(var c=a.getControl();c;c=c.getParent())if(c instanceof this.Item){c!=this._cSelected&&(b(this,c),I(this,"change"));break}a.exit()},T.$keydown=T.$keypress=function(a){K["$"+a.type](a);var c=this._uOptions,d=c.$getSection("VScrollbar"),e=this._nOptionSize,f=a.which,g=this.getItems(),h=g.length,i=C();if(this.isFocused()){if(40==f||38==f)return h&&(c.isShow()?(H(g[f=m(l(0,n(g,i)+f-39),h-1)]),f-=d.getValue()/d.getStep(),d.skip(0>f?f:f>=e?f-e+1:0)):this.setSelectedIndex(m(l(0,n(g,this._cSelected)+f-39),h-1))),!1;if(27==f||13==f&&c.isShow())return c.hide(),13==f&&(b(this,i),I(this,"change")),!1}},T.$mousewheel=function(a){if(this.isFocused()){var b=this._uOptions,c=this.getItems(),d=c.length;b.isShow()?b.$mousewheel(a):(b=n(c,this._cSelected)+(a.detail>0?1:-1),this.setSelectedIndex(d?m(l(0,b),d-1):null),b>=0&&d>b&&I(this,"change")),a.exit()}},T.$ready=function(){this.setValue(this.getValue())},T.remove=function(a){return"number"==typeof a&&(a=this.getItems()[a]),a==this._cSelected&&b(this),R.remove.call(this,a)},T.add=function(a,b,c){return a=R.add.call(this,a,b,c),q(this._uOptions.getOuter())&&a.cache(!0,!0),a},T.$setSize=function(a,b){K.$setSize.call(this,a,b),this.$locate(),b=this.getBodyHeight(),this._uText.$setSize(a=this.getBodyWidth()-b,b),this._uButton.$setSize(b,b),this._uButton.setPosition(a,0)},T.getSelected=function(){return this._cSelected||null},T.setOptionSize=function(b){this._nOptionSize=b,this.$alterItems(),a(this)},T.setSelectedIndex=function(a){b(this,this.getItems()[a])},T.setValue=function(a){for(var c,d=0,e=this.getItems();c=e[d++];)if(c._sValue==a)return b(this,c),void 0;b(this)},T.clear=function(){for(var a=this.getItems()||[],b=a.length;b-->0;)this.remove(0);this._uOptions.reset()}}(),function(){var a=ecui,b=a.ui,c=(a.dom,a.string),d=(a.util,a.$fastcreate,a.$connect),e=a.inherits,f=a.triggerEvent,g=(c.encodeHTML,b.Control),h=(g.prototype,b.Select),i=h.prototype,j=b.CascadeSelect=e(h,null,function(){},function(a,b){this._bTarget=b.target,d(this,function(a){this._cTarget=a},this._bTarget)}),k=j.prototype;k.$change=function(){i.$click.call(this);var a=this._cTarget,b=this.getValue();f(a,"loaddata",function(b,c){var d=a;d.clear();for(var e,f=0;e=b[f];f++)d.add(e.text,null,{value:e.value});c?d.setValue(c):d.setSelectedIndex(0)},[b])}}(),function(){function a(a,b){var c=a.getItems();if(a._bSelectAllBtn)if(void 0===b)b=a.getSelected().length===c.length-1,c[0].$setSelected(b);else for(var d,e=0;d=c[e];e++)d.$setSelected(b)}function b(a){var b;if(a){for(var c,d=!1,e=0,f=a.getItems(),g=[];c=f[e++];)c.isSelected()&&(c._bSelectAllBtn?d=!0:g.push(c._sTip));b='<span title="'+g.join(",")+'">',a._sTextAll&&(0!=g.length||d)&&g.length==f.length+(a._bSelectAllBtn?-1:0)?g=a._sTextAll:0==g.length&&a._sTextNone?g=a._sTextNone:(g=g.join(","),a._nTextLen&&g.length>a._nTextLen&&(g=g.substring(0,a._nTextLen)+"...")),a._bTip&&(g=b+g+"</span>"),a.$getSection("Text").setContent(g)}}var c=ecui,d=c.array,e=c.dom,f=c.ui,g=c.util,h=d.indexOf,i=e.getText,j=(e.remove,e.create),k=e.setInput,l=g.extend,m=(g.inherits,c.getKey),n=(c.mask,c.inherits),o=c.triggerEvent,p=f.InputControl,q=p.prototype,r=f.Items,s=f.Select,t=s.prototype,u=t.Item,v=u.prototype,w=f.MultiSelect=n(s,"ui-multi-select",function(a,b){b.hide=!0,b.value&&(b.value=b.value.toString())},function(a,b){b.maxlength&&(this._nTextLen=b.maxlength),b.textAll&&(this._sTextAll=b.textAll),b.textNone&&(this._sTextNone=b.textNone),b.maxSelected?this._nMaxSelected=b.maxSelected:b.selectAllButton&&(this.add("全部",0,{selectAllButton:!0}),this._bSelectAllBtn=!0),b.tip&&(this._bTip=!0),b.value&&this.setValue(b.value),b.selectAll&&(this._bInitSelectAll=!0),b.minSelected&&(this._nMinSelected=b.minSelected),this._eInput.disabled=!0}),x=w.prototype,y=x.Item=n(u,"ui-multi-select-item",function(a,b){var c=this.getTypes()[0],d=j(c+"-icon");this._bSelectAllBtn=b.selectAllButton,this._sTip=b.tip?b.tip:i(a),a.insertBefore(d,a.firstChild),a=this._eInput=b.parent.getMain().appendChild(k(null,b.parent.getName(),"checkbox")),a.value=void 0===b.value?"":b.value,a.style.display="none"}),z=y.prototype;l(x,r),z.$click=function(a){var b=this.getParent(),c=b.getSelected().length;v.$click.call(this,a),this.isSelected()?(!b._nMinSelected||b._nMinSelected<=c-1)&&this.setSelected(!1):(!b._nMaxSelected||b._nMaxSelected>=c+1)&&this.setSelected(!0)},z.$dispose=function(){this._eInput=null,v.$dispose.call(this)},z.isSelected=function(){return this._eInput.checked},z.$setSelected=function(a){this._eInput.checked=a!==!1,this.setClass(this.getPrimary()+(this._eInput.checked?"-selected":""))},z.setSelected=function(c){this.$setSelected(c),a(this.getParent(),this._bSelectAllBtn?c:void 0),b(this.getParent())},x.$alterItems=function(){t.$alterItems.call(this),a(this),b(this)},x.$append=function(a){t.$append.call(this,a),this.getMain().appendChild(k(a._eInput,this.getName()))},x.$cache=t.$cache,x.$intercept=function(a){for(var b=a.getControl();b;b=b.getParent())if(b instanceof y)return a.target=b.getOuter(),!1;this.$getSection("Options").hide(),o(this,"change"),a.exit()},x.$keydown=x.$keypress=x.$keyup=function(a){if(q["$"+a.type].call(this,a),!this.$getSection("Options").isShow())return!1;var b=m();return 13==b||32==b?("keyup"==a.type&&(b=this.getActived(),b.setSelected(!b.isSelected())),!1):void 0},x.$mousewheel=function(a){var b=this.$getSection("Options");return b.isShow()&&b.$mousewheel(a),!1},x.$deactivate=t.$deactivate,x.$activate=function(a){var b=a.getControl();b instanceof y||t.$activate.call(this,a)},x.$ready=function(){if(a(this),b(this),this._bInitSelectAll)for(var c,d=0,e=this.getItems();c=e[d++];)!c._bSelectAllBtn&&c.setSelected(!0)},x.$remove=function(a){t.$remove.call(this,a),this.getMain().removeChild(a._eInput)},x.$setSize=t.$setSize,x.getSelected=function(){for(var a,b=0,c=this.getItems(),d=[];a=c[b++];)a.isSelected()&&!a._bSelectAllBtn&&d.push(a);return d},x.getValue=function(){var a,b,c=this.getSelected(),d=[];for(a=0,b=c.length;b>a;a++)c[a]._bSelectAllBtn||d.push(c[a]._eInput.value);return d},x.getAllValue=function(){var a=this.getItems(),b=[],c=0;for(c=0;c<a.length;c++)a[c]._bSelectAllBtn||b.push(a[c].getValue());return b},x.selectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)!a._bSelectAllBtn&&a.setSelected(!0)},x.isSelectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)if(!a.isSelected())return!1;return!0},x.setOptionSize=t.setOptionSize,x.setValue=function(c){"[object Array]"!=Object.prototype.toString.call(c)&&(c=c.toString().split(","));for(var d,e=0,f=this.getItems();d=f[e++];)d.setSelected(h(c,d._eInput.value)>=0);a(this),b(this)}}(),function(){var a,b=ecui,c=b.dom,d=b.ui,e=b.util,f=c.getText,g=c.setInput,h=e.extend,i=b.inherits,j=d.Panel,k=d.Item,l=k.prototype,m=d.Items,n=d.Listbox=i(j,"ui-listbox",function(a,b){b.hScroll=!1},function(a,b){this._sName=b.name||"",this.$initItems()}),o=n.prototype,p=(o.Item=i(k,null,null,function(b,c){b.appendChild(this._eInput=g(null,c.parent._sName,"hidden")).value=c.value===a?f(b):c.value,this.setSelected(!!c.selected)})).prototype;h(o,m),p.$click=function(a){l.$click.call(this,a),this.setSelected(!this.isSelected())},p.$dispose=function(){this._eInput=null,l.$dispose.call(this)},p.$setParent=function(a){l.$setParent.call(this,a),a instanceof n&&(this._eInput=g(this._eInput,a._sName))},p.isSelected=function(){return!this._eInput.disabled},p.setSelected=function(a){this.alterClass("selected",this._eInput.disabled=a===!1)},o.$alterItems=function(){var a=this.getItems(),b=this.$getSection("VScrollbar"),c=a.length&&a[0].getHeight();c&&(b.setStep(c),this.setItemSize(this.getBodyWidth()-(a.length*c>this.getBodyHeight()?b.getWidth():0),c),this.$setSize(0,this.getHeight()))},o.getName=function(){return this._sName},o.getSelected=function(){for(var a,b=0,c=this.getItems(),d=[];a=c[b++];)a.isSelected()&&d.push(a);return d},o.selectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)a.setSelected()},o.setName=function(a){for(var b,c=0,d=this.getItems();b=d[c++];)b._eInput=g(b._eInput,a);this._sName=a}}(),function(){function a(a,b){a._uSelected!=b&&(a._uSelected&&a._uSelected.alterClass("-selected"),b&&b.alterClass("+selected"),a._uSelected=b)}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=Date,g=c.indexOf,h=d.addClass,i=d.getParent,j=d.removeClass,k=d.setText,l=b.$fastCreate,m=b.inherits,n=b.triggerEvent,o=e.Control,p=e.MonthView=m(o,"ui-monthview",function(a){var b=0,c=this.getType(),d=[];for(a.style.overflow="auto";7>b;)d[b]='<td class="'+c+"-title"+this.Cell.TYPES+'">'+p.WEEKNAMES[b++]+"</td>";for(d[b]="</tr></thead><tbody><tr>";++b<50;)d[b]='<td class="'+c+"-item"+this.Cell.TYPES+'"></td>'+(b%7?"":"</tr><tr>");a.innerHTML='<table cellspacing="0"><thead><tr>'+d.join("")+"</tr></tbody></table>"},function(a,b){this._aCells=[];for(var c,d=0,e=a.getElementsByTagName("TD");c=e[d];)this._aCells[d++]=l(this.Cell,c,this,{resizable:!1});this._oBegin=new Date(b.begin),this._oEnd=new Date(b.end),this.setView(b.year,b.month)}),q=p.prototype,r=(q.Cell=m(o)).prototype;p.WEEKNAMES=["一","二","三","四","五","六","日"],r.$click=function(b){var c=this.getParent(),d=g(c._aCells,this),e=c._oDate;7>d?n(c,"titleclick",b,[d]):(d=new f(c._nYear,c._nMonth,this._nDay),e&&d.getTime()==e.getTime()||!n(c,"change",b,[d])||(c._oDate=new f(c._nYear,c._nMonth,this._nDay),a(c,this)))},q.getMonth=function(){return this._nMonth+1},q.getYear=function(){return this._nYear},q.move=function(a){var b=new f(this._nYear,this._nMonth+a,1);this.setView(b.getFullYear(),b.getMonth()+1)},q.setRange=function(a,b,c){this._oBegin=a,this._oEnd=b,c||this.setView(this.getYear(),this.getMonth())},q.setDate=function(a){this.$setDate(a),this.setView(a.getFullYear(),a.getMonth()+1)},q.getDate=function(){return this._oDate},q.$setDate=function(a){this._oDate=a?new f(a.getFullYear(),a.getMonth(),a.getDate()):null},q.setView=function(b,c){var d,e=7,g=new f,b=b||g.getFullYear(),c=c?c-1:g.getMonth(),l=new f(b,c,0),m=1-l.getDay(),n=l.getDate(),o=new f(b,c+1,0).getDate(),p=this._oBegin,q=this._oEnd,r=this._oDate;for(this._nYear=b,this._nMonth=c,p=p?new Date(p.getFullYear(),p.getMonth(),p.getDate()).getTime():0,q=q?new Date(q.getFullYear(),q.getMonth(),q.getDate()).getTime():Number.MAX_VALUE,r=r&&r.getFullYear()==b&&r.getMonth()==c?r.getDate():0,a(this,null);l=this._aCells[e++];)(c=m>0&&o>=m)?(d=new Date(this._nYear,this._nMonth,m).getTime(),p>d||d>q?l.disable():(l.enable(),m==r&&a(this,l))):l.disable(),(36==e||43==e)&&(l.isDisabled()?h:j)(i(l.getOuter()),this.getType()+"-extra"),k(l.getBody(),c?m:m>o?m-o:n+m),l._nDay=m++}}(),function(){function a(a,b){a._uSelected!=b&&(a._uSelected&&a._uSelected.alterClass("-selected"),b&&b.alterClass("+selected"),a._uSelected=b)}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=(c.indexOf,d.addClass,d.getParent,d.removeClass,d.setText,b.$fastCreate),g=b.inherits,h=b.triggerEvent,i=e.Control,j=e.MonthViewOnly=g(i,"ui-monthviewonly",function(a){var b=this.getType(),c=[];a.style.overflow="auto";for(var d=0;12>d;d++)c.push('<td class="'+b+"-item"+this.Cell.TYPES+'">'+j.MONTH[d]+"月"+"</td>"+((d+1)%3?"":"</tr><tr>"));a.innerHTML='<table cellspacing="0"><tbody><tr>'+c.join("")+"</tr></tbody></table>"},function(a,b){this._aCells=[];for(var c,d=0,e=a.getElementsByTagName("TD");c=e[d];){var g=f(this.Cell,c,this,{resizable:!1});g._nMonth=d+1,this._aCells[d++]=g}this._nMonth=b.month||1,this._nYear=b.year||(new Date).getFullYear(),this.setView(this._nYear,this._nMonth)}),k=j.prototype,l=(k.Cell=g(i)).prototype;j.MONTH=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l.$click=function(b){var c=this.getParent(),d=c._nMonth;d!=this._nMonth&&(c._nMonth=this._nMonth,h(c,"change",b,[this._nMonth]),a(c,this))},k.getMonth=function(){return this._nMonth},k.getYear=function(){return this._nYear},k.move=function(a){this.setView(this._nYear,this._nMonth+a)},k.clear=function(){this._uSelected=null;for(var a,b=0;a=this._aCells[b++];)a.alterClass("-selected")},k.setView=function(b,c){this._nYear=b,this._nMonth=c,a(this,this._aCells[c-1])}}(),function(){function a(a){var b=a._eText;""==b.innerHTML?(a._uCancel.hide(),a._bTip&&(b.innerHTML=J)):a._bHideCancel||a._uCancel.show()}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=b.string,g=b.util,h=Date,i=document,j=(c.push,d.children),k=d.create,l=(d.getParent,d.getPosition),m=(d.moveElements,d.setText,f.formatDate,g.getView),n=b.$fastCreate,o=b.inherits,p=b.triggerEvent,q=b.setFocused,r=e.Control,s=r.prototype,t=e.Button,u=t.prototype,v=e.InputControl,w=v.prototype,x=e.Select,y=2002,z=(new Date).getFullYear(),A=e.MonthViewOnly;A.Cell;var B=e.MonthCalendar=o(v,"ui-month-calendar",function(a,b){var c=this.getTypes()[0];b.hidden=!0,a.innerHTML='<span class="'+c+'-text"></span>'+'<span class="'+c+'-cancel"></span>'+'<span class="'+c+'-button"></span>'},function(a,b){var c=j(a),d=this.getTypes()[0],e=k(d+"-panel","position:absolute;display:none");this._bTip=b.tip!==!1,this._nYear=b.year,this._nMonth=b.month,this._eText=c[0],this._uCancel=n(this.Cancel,c[1],this),this._uButton=n(r,c[2],this),i.body.appendChild(e),this._uPanel=n(this.Panel,e,this,b),1==b.hideCancel&&(this._bHideCancel=!0,this._uCancel.$hide())}),C=B.prototype,D=(C.Cancel=o(r)).prototype,E=C.Panel=o(r,"ui-month-calendar-panel",function(a,b){var c=[],d=((new h).getFullYear(),b.beginYear||y),e=b.endYear||z,f=this.getTypes()[0];c.push('<div class="'+f+'-buttons"><div class="'+f+"-btn-prv"+t.TYPES+'"></div>'+'<select class="'+f+"-slt-year"+x.TYPES+'">');for(var g=d;e+1>g;g++)c.push('<option value="'+g+'">'+g+"</option>");c.push("</select>"),c.push('<div class="'+f+"-btn-nxt"+t.TYPES+'"></div></div>'),c.push('<div class="'+f+"-month-view"+A.TYPES+'"></div>'),a.innerHTML=c.join("")},function(a,b){var c,d=(this.getTypes()[0],this.Button),e=this.Select,f=b.beginYear||y,g=b.endYear||z,h=this.MonthViewOnly;a=j(a),c=j(a[0]),this._beginYear=f,this._endYear=g,this._uPrvBtn=n(d,c[0],this),this._uPrvBtn._nStep=-1,this._uYearSlt=n(e,c[1],this),this._uNxtBtn=n(d,c[2],this),this._uNxtBtn._nStep=1,a=a[1],this._uMonthView=n(h,a,this),this._uYearSlt.setValue((new Date).getFullYear())}),F=E.prototype,G=(F.Button=o(t,null)).prototype,H=(F.Select=o(x,null)).prototype,I=(F.MonthViewOnly=o(A,null)).prototype,J='<span class="ui-calendar-default">请选择一个日期</span>';C.getYear=function(){return this._nYear},C.getMonth=function(){return this._nMonth},C.setDate=function(b,c){var d=b&&c?b+"年"+(c>9?c:"0"+c)+"月":"";this._uPanel.isShow()&&this._uPanel.hide(),this._eText.innerHTML=d,this.setValue(d),this._nYear=b,this._nMonth=c,a(this)},C.$activate=function(a){var b,c=this._uPanel,d=l(this.getOuter()),e=d.top+this.getHeight();w.$activate.call(this,a),c.isShow()||(c.setDate(this._nYear,this._nMonth),b=m(),c.show(),c.setPosition(d.left+c.getWidth()<=b.right?d.left:b.right-c.getWidth()>0?b.right-c.getWidth():0,e+c.getHeight()<=b.bottom?e:d.top-c.getHeight()>0?d.top-c.getHeight():0),q(c))},C.$cache=function(a,b){w.$cache.call(this,a,b),this._uButton.cache(!1,!0),this._uPanel.cache(!0,!0)},C.init=function(){w.init.call(this),this.setDate(this._nYear,this._nMonth),this._uPanel.init()},C.clear=function(){this.setDate()},D.$click=function(){var a=this.getParent();s.$click.call(this),a.clear()},D.$activate=u.$activate,F.$blur=function(){this.hide()},F.setDate=function(a,b){var c=new Date;a=a||c.getFullYear(),this._uYearSlt.setValue(a),this._uMonthView.setView(a,b),this.setView(a,b)},F.setView=function(a,b){var c=this._uYearSlt,d=this._uMonthView;a=a||(new Date).getFullYear(),c.setValue(a),a&&d.setView(a,b)},F.getViewYear=function(){return this._uMonthView.getYear()},F.getViewMonth=function(){return this._uMonthView.getMonth()},F.$cache=function(a,b){this._uPrvBtn.cache(!0,!0),this._uNxtBtn.cache(!0,!0),this._uYearSlt.cache(!0,!0),this._uMonthView.cache(!0,!0),s.$cache.call(this,a,b)},F.init=function(){s.init.call(this),this._uYearSlt.init(),this._uMonthView.init()},F.$change=function(a,b){var c=this.getParent(),d=this._uYearSlt.getValue();p(c,"change",a,[d,b])&&c.setDate(d,b),this.hide()},H.$change=function(){var a=this.getParent(),b=a.getParent(),c=a._uYearSlt,d=b._nYear==c.getValue()?b._nMonth:null;a.setView(c.getValue(),d)},G.$click=function(){var a=this._nStep,b=this.getParent(),c=b.getParent(),d=b._uYearSlt.getValue(),e=d-0+a;e<b._beginYear&&(e=b._endYear),e>b._endYear&&(e=b._beginYear),b._uMonthView.clear(),e==c._nYear&&b._uMonthView.setView(e,b.getViewMonth()),b._uYearSlt.setValue(e)},I.$change=function(a,b){p(this.getParent(),"change",a,[b])}}(),function(){function a(a,b){var c,d=new Date,e=null,f=[d.getFullYear(),d.getMonth(),d.getDate()],g={y:0,M:1,d:2};return a instanceof Date?(e=e||{},e.begin=a):/^([-+]?)(\d+)([yMd])$/.test(a)?(e=e||{},c=f.slice(),j.$1&&"+"!=j.$1?c[g[j.$3]]+=parseInt(j.$2,10):c[g[j.$3]]-=parseInt(j.$2,10),e.begin=new Date(c[0],c[1],c[2])):"[object String]"==Object.prototype.toString.call(a)&&(e=e||{},a=a.split("-"),e.begin=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10))),b instanceof Date?(e=e||{},e.end=b):/^([-+]?)(\d+)([yMd])$/.test(b)?(e=e||{},c=f.slice(),j.$1&&"+"!=j.$1?c[g[j.$3]]-=parseInt(j.$2,10):c[g[j.$3]]+=parseInt(j.$2,10),e.end=new Date(c[0],c[1],c[2])):"[object String]"==Object.prototype.toString.call(b)&&(e=e||{},b=b.split("-"),e.end=new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10))),e?e:{}}function b(a){var b=a._eText;""==b.innerHTML?(a._uCancel.$hide(),a._bTip&&(b.innerHTML=K)):a._bCancelButton&&a._uCancel.show()}var c=ecui,d=c.array,e=c.dom,f=c.ui,g=c.string,h=c.util,i=Date,j=RegExp,k=document,l=(d.push,e.children),m=e.create,n=(e.getParent,e.getPosition),o=(e.moveElements,e.setText,g.formatDate),p=h.getView,q=c.$fastCreate,r=c.inherits,s=c.triggerEvent,t=c.setFocused,u=f.Control,v=u.prototype,w=f.Button,x=w.prototype,y=f.InputControl,z=y.prototype,A=f.Select,B=f.MonthView;B.Cell;var C=f.Calendar=r(y,"ui-calendar",function(a,b){var c=this.getTypes()[0];b.hidden=!0,a.innerHTML='<span class="'+c+'-text"></span><span class="'+c+'-cancel"></span><span class="'+c+'-button"></span>'},function(b,c){var d=l(b),e=this.getTypes()[0],f=m(e+"-panel","position:absolute;display:none");if(this._bTip=c.tip!==!1,c.date){var g=c.date.split("-");this._oDate=new i(parseInt(g[0],10),parseInt(g[1],10)-1,parseInt(g[2],10))}else this._oDate=c.date===!1?null:new i;var h=a(c.start,c.end);this._eText=d[0],this._uCancel=q(this.Cancel,d[1],this),this._uButton=q(u,d[2],this),this._bCancelButton=c.cancelButton!==!1,this._bCancelButton||this._uCancel.$hide(),k.body.appendChild(f),this._uPanel=q(this.Panel,f,this,{date:this._oDate,range:h})}),D=C.prototype,E=(D.Cancel=r(u)).prototype,F=D.Panel=r(u,"ui-calendar-panel",function(a,b){var c=[],d=((new i).getFullYear(),this.getTypes()[0]),e=new Date,f=e.getFullYear()-5,g=e.getFullYear()+5,h=b.range.begin,j=b.range.end;h&&(f=h.getFullYear()),j&&(g=j.getFullYear()),c.push('<div class="'+d+'-buttons"><div class="'+d+"-btn-prv"+w.TYPES+'"></div><select class="'+d+"-slt-year"+A.TYPES+'">');for(var k=f;g>=k;k++)c.push('<option value="'+k+'">'+k+"</option>");c.push('</select><select class="'+d+"-slt-month"+A.TYPES+'">');for(var k=1;12>=k;k++)c.push('<option value="'+k+'">'+(10>k?"0":"")+k+"</option>");c.push('</select><div class="'+d+"-btn-nxt"+w.TYPES+'"></div></div>'),c.push('<div class="'+d+"-month-view"+B.TYPES+'"></div>'),a.innerHTML=c.join("")},function(a,b){var c,d=(this.getTypes()[0],this.Button),e=this.Select,f=this.MonthView;b.date,a=l(a),c=l(a[0]),this._uPrvBtn=q(d,c[0],this),this._uPrvBtn._nStep=-1,this._uYearSlt=q(e,c[1],this),this._uMonthSlt=q(e,c[2],this),this._uNxtBtn=q(d,c[3],this),this._uNxtBtn._nStep=1,a=a[1],this._uMonthView=q(f,a,this,{begin:b.range.begin,end:b.range.end})}),G=F.prototype,H=(G.Button=r(w,null)).prototype,I=(G.Select=r(A,null)).prototype,J=(G.MonthView=r(B,null)).prototype,K='<span class="ui-calendar-default">请选择一个日期</span>',L="yyyy-MM-dd";D.getDate=function(){return this._oDate},D.setDate=function(a){var c=(this._uPanel,null!=a?o(a,L):"");this._uPanel.isShow()&&this._uPanel.hide(),this._eText.innerHTML=c,z.setValue.call(this,c),this._oDate=a,b(this)},D.setValue=function(a){a?(a=a.split("-"),this.setDate(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10)))):this.setDate(null)},D.$activate=function(a){var b,c=this._uPanel,d=n(this.getOuter()),e=d.top+this.getHeight();z.$activate.call(this,a),c.isShow()||(c.setDate(this.getDate()),b=p(),c.show(),c.setPosition(d.left+c.getWidth()<=b.right?d.left:b.right-c.getWidth()>0?b.right-c.getWidth():0,e+c.getHeight()<=b.bottom?e:d.top-c.getHeight()>0?d.top-c.getHeight():0),t(c))},D.$cache=function(a,b){z.$cache.call(this,a,b),this._uButton.cache(!1,!0),this._uPanel.cache(!0,!0)},D.init=function(){z.init.call(this),this.setDate(this._oDate),this._uPanel.init()},D.clear=function(){this.setDate(null)},D.setRange=function(a,b){this._uPanel._uMonthView.setRange(a,b)},E.$click=function(){var a=this.getParent();a._uPanel,v.$click.call(this),a.setDate(null)},E.$activate=x.$activate,G.$blur=function(){this.hide()},G.setDate=function(a){var b=null!=a?a.getFullYear():(new Date).getFullYear(),c=null!=a?a.getMonth()+1:(new Date).getMonth()+1;this._uMonthView.$setDate(a),this.setView(b,c)},G.setView=function(a,b){var c=this._uMonthSlt,d=this._uYearSlt,e=this._uMonthView;d.setValue(a),c.setValue(b),e.setView(a,b)},G.getViewYear=function(){return this._uMonthView.getYear()},G.getViewMonth=function(){return this._uMonthView.getMonth()},G.$cache=function(a,b){this._uPrvBtn.cache(!0,!0),this._uNxtBtn.cache(!0,!0),this._uMonthSlt.cache(!0,!0),this._uYearSlt.cache(!0,!0),this._uMonthView.cache(!0,!0),v.$cache.call(this,a,b)},G.init=function(){v.init.call(this),this._uMonthSlt.init(),this._uYearSlt.init(),this._uMonthView.init()},G.$change=function(a,b){var c=this.getParent();s(c,"change",a,[b])&&c.setDate(b),this.hide()},I.$change=function(){var a=this.getParent(),b=a._uYearSlt,c=a._uMonthSlt;a.setView(b.getValue(),c.getValue())},H.$click=function(){var a,b=this._nStep,c=this.getParent();a=new i(c.getViewYear(),c.getViewMonth()-1+b,1),c.setView(a.getFullYear(),a.getMonth()+1)},J.$change=function(a,b){s(this.getParent(),"change",a,[b])}}(),function(){function a(a){var b=a._eText;""==b.innerHTML?(a._uCancel.hide(),a._bTip&&(b.innerHTML=w)):a._uCancel.show()}var b=ecui,c=b.dom,d=b.ui,e=b.string,f=c.children,g=c.create,h=(c.getParent,c.moveElements),i=e.formatDate,j=b.$fastCreate,k=b.inherits,l=b.triggerEvent,m=d.Control,n=m.prototype,o=d.Button,p=o.prototype,q=d.InputControl,r=q.prototype,s=d.Calendar,t=s.prototype,u=t.Cancel.prototype,v=t.Panel,w='<span class="ui-multi-calendar-default">请选择时间范围</span>',x="yyyy-MM-dd",y=d.MultiCalendar=k(s,"ui-multi-calendar",function(a,b){b.hidden=!0,b.yearRange&&(this._nYearRange=b.yearRange-0),b.remind&&(w='<span class="ui-calendar-default">'+b.remind+"</span>")},function(a,b){var c,d=g();d.innerHTML='<input type="hidden" name="'+(b.beginname?b.beginname:"beginDate")+'" />'+'<input type="hidden" name="'+(b.endname?b.endname:"endDate")+'" />',b.bdate&&(c=b.bdate.split("-"),this._oBegin=new Date(c[0],parseInt(c[1],10)-1,c[2])),b.edate&&(c=b.edate.split("-"),this._oEnd=new Date(c[0],parseInt(c[1],10)-1,c[2])),c=f(d),this._eBeginInput=c[0],this._eEndInput=c[1],h(d,a,!0)}),z=y.prototype,A=z.Panel=k(m,"ui-multi-calendar-panel",function(){},function(a,b){var c=this.getTypes()[0],d=[],e=b.range||{};this._oRange=e,d.push('<div class="'+c+'-cal-area"><div class="'+c+'-text"><strong>起始时间：</strong><span></span></div><div class="'+v.TYPES+'"></div></div>'),d.push('<div class="'+c+'-cal-area"><div class="'+c+'-text"><strong>结束时间：</strong><span></span></div><div class="'+v.TYPES+'"></div></div>'),d.push('<div class="'+c+'-buttons"><div class="ui-button-g'+o.TYPES+'">确定</div><div class="'+o.TYPES+'">取消</div></div>'),a.innerHTML=d.join(""),a=f(a),this._eBeginText=a[0].firstChild.lastChild,this._eEndText=a[1].firstChild.lastChild,this._uBeginCal=j(this.Cal,a[0].lastChild,this,{range:e}),this._uBeginCal._sType="begin",this._uEndCal=j(this.Cal,a[1].lastChild,this,{range:e}),this._uEndCal._sType="end",this._uSubmitBtn=j(this.Button,a[2].firstChild,this),this._uSubmitBtn._sType="submit",this._uCancelBtn=j(this.Button,a[2].lastChild,this),this._uCancelBtn._sType="cancel"}),B=(z.Cancel=k(t.Cancel)).prototype,C=A.prototype,D=(C.Cal=k(v)).prototype,E=(C.Button=k(o)).prototype;z.init=function(){r.init.call(this),this.setDate({begin:this._oBegin,end:this._oEnd}),this._uPanel.init()},z.setDate=function(b){var c,d,e=[];null==b&&(b={begin:null,end:null}),c=b.begin?i(b.begin,x):"",d=b.end?i(b.end,x):"",this._oBegin=b.begin,this._oEnd=b.end,this._eBeginInput.value=c,this._eEndInput.value=d,this._eInput.value=c+","+d,this._oBegin&&e.push(c),this._oEnd&&e.push(d),1==e.length?(e.push(this._oEnd?"之前":"之后"),e=e.join("")):e=2==e.length?e.join("至"):"",this._eText.innerHTML=e,a(this)},z.getDate=function(){return{begin:this._oBegin,end:this._oEnd}},B.$click=function(){var a=this.getParent();u.$click.call(this),a.clearRange()},z.clearRange=function(){this._uPanel._oRange.begin=null,this._uPanel._oRange.end=null,this._uPanel._uBeginCal.setRange(null,null),this._uPanel._uEndCal.setRange(null,null)},C.setDate=function(a){var b,c,d=this._oRange;this._oBeginDate=a.begin,this._oEndDate=a.end,this._eBeginText.innerHTML=a.begin?i(a.begin,x):"",this._eEndText.innerHTML=a.end?i(a.end,x):"",c=d.end?d.end:a.end,d.end&&a.end&&a.end.getTime()<d.end.getTime()&&(c=a.end),this._uBeginCal.setRange(d.begin,c,!0),this._uBeginCal.setDate(a.begin),b=d.begin?d.begin:a.begin,d.begin&&a.begin&&a.begin.getTime()>d.begin.getTime()&&(b=a.begin),this._uEndCal.setRange(b,d.end,!0),this._uEndCal.setDate(a.end)},C.$blur=function(){n.$blur.call(this),this.hide()},C.hide=function(){n.hide.call(this);var a=this.getParent(),b=a.getDate();a._nYearRange&&(b.end&&(this._oRange.begin=new Date(b.end),this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-a._nYearRange)),b.begin&&(this._oRange.end=new Date(b.begin),this._oRange.end.setFullYear(this._oRange.end.getFullYear()+a._nYearRange)))},C.init=function(){n.init.call(this),this._uBeginCal.init(),this._uEndCal.init()},C.$change=function(){var a=this.getParent(),b=this._oBeginDate,c=this._oEndDate;l(a,"change",[b,c])&&a.setDate({begin:b,end:c}),this.hide()},C.$setDate=function(a,b){var c=b.charAt(0).toUpperCase()+b.substring(1),d=this.getParent();this["_e"+c+"Text"].innerHTML=i(a,x),this["_o"+c+"Date"]=a,"begin"==b?(d._nYearRange&&(this._oRange.end=new Date(a),this._oRange.end.setFullYear(this._oRange.end.getFullYear()+d._nYearRange)),this._uEndCal.setRange(a,this._oRange.end)):(d._nYearRange&&(this._oRange.begin=new Date(a),this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-d._nYearRange)),this._uBeginCal.setRange(this._oRange.begin,a))},D.$blur=function(){n.$blur.call(this)},D.$change=function(a,b){var c=this.getParent();this._oDateSel=b,c.$setDate(b,this._sType)},D.setRange=function(a,b,c){this._uMonthView.setRange(a,b,c)},E.$click=function(){var a=this.getParent();p.$click.call(this),"submit"==this._sType?l(a,"change"):a.hide()}}(),function(){function a(a,b){var c,d=this.getType(),e=[],f=0;for(this._oModel=b.model,a.style.overflow="auto";7>f;)e[f]='<td class="'+d+"-title"+this.Cell.TYPES+(6==f?d+"-title-last":"")+'">'+this.WEEKNAMES[f++]+"</td>";for(e[f]="</tr></thead><tbody><tr>";++f<50;)e[f]='<td class="'+d+"-item"+this.Cell.TYPES+(f%7?"":d+"-item-last")+'"></td>'+(f%7?"":"</tr><tr>");for(a.innerHTML='<table cellspacing="0" cellpadding="0"><thead><tr>'+e.join("")+"</tr></tbody></table>",this._aCells=[],e=a.getElementsByTagName("TD"),f=0;c=e[f];f++)this._aCells[f]=r(7>f?this.HCell:this.Cell,c,this,{resizable:!1})}function b(a,b,c){for(var d,e={},f=0;d=z(b[f]);f++)d[0]==a[0]&&d[1]==a[1]&&(e[c[d[2]]]=1);return e}function c(a,b,c){for(var d,e,f={},g=a[0],h=a[1],i=0;d=z(b[i]);i++){e=D(d);for(var j=0;7>j;j++,e.setDate(e.getDate()+1))e.getFullYear()==g&&e.getMonth()==h&&(f[c[e.getDate()]]=1)}return f}function d(a,b){var c,d,e,f=this.getType();for(this._oModel=b.model,a.style.overflow="auto",d=0,c=[];12>d;d++)c.push('<td class="'+f+"-item"+this.Cell.TYPES+'">'+this.MONTH[d]+"月"+"</td>"+((d+1)%3?"":"</tr><tr>"));for(a.innerHTML='<table cellspacing="0"><tbody><tr>'+c.join("")+"</tr></tbody></table>",this._aCells=[],d=0,c=a.getElementsByTagName("TD"),e;e=c[d];d++)this._aCells[d]=r(this.Cell,e,this,{resizable:!1}),this._aCells[d]._nMonth=d}function e(a,b,c){for(var d,e={},f=0;d=z(b[f]);f++)d[0]==a[0]&&(e[c[d[1]]]=1);return e}function f(a,b){var c,d,e,f=this.getType();for(this._oModel=b.model,a.style.overflow="auto",d=0,c=[];4>d;d++)c.push('<div class="'+f+"-item"+this.Cell.TYPES+'">'+this.QUARTER[d]+"</div>");a.innerHTML=c.join("");var g=[0,3,6,9];for(this._aCells=[],d=0,c=a.getElementsByTagName("div"),e;e=c[d];d++)this._aCells[d]=r(this.Cell,e,this,{resizable:!1}),this._aCells[d]._nMonth=g[d]}var g=ecui,h=g.array,i=g.dom,j=g.ui,k=g.util,l=Date,m=Object.prototype.toString;k.extend,h.indexOf;var n=i.addClass,o=i.getParent,p=i.removeClass,q=i.setText,r=g.$fastCreate,s=g.inherits,t=g.triggerEvent,u=j.Control,v=j.XCalendarUtil={},w=864e5,x=v.compareDate=function(a,b,c){return a=y(a,c,!0),b=y(b,c,!0),a[0]!=b[0]?a[0]>b[0]?1:-1:a[1]!=b[1]?a[1]>b[1]?1:-1:a[2]!=b[2]?a[2]>b[2]?1:-1:0},y=v.formatDateByTimeType=function(a,b,c){return a?("D"==b?a=z(a,!0):"W"==b?a=z(D(a)):"M"==b?(a=z(a,!0),a[2]=1):"Q"==b&&(a=B(a,!0)),c?a:new Date(a[0],a[1],a[2])):void 0},z=v.date2Arr=function(a,b){return null==a?a:F(a)?b?[a[0],a[1],a[2]]:a:[a.getFullYear(),a.getMonth(),a.getDate()]},A=v.arr2Date=function(a,b){return null==a?a:F(a)?new Date(a[0],a[1]||0,a[2]||1):b?new Date(a.getFullYear(),a.getMonth(),a.getDate()):a},B=v.getQuarterBegin=function(a,b){if(!a)return null;a=z(a);var c=C(a),d=[0,0,3,6,9];return b?[a[0],d[c],1]:new Date(a[0],d[c],1)},C=v.getQuarter=function(a){return a?(a=z(a),Math.floor(a[1]/3)+1):null},D=v.getWorkday=function(a){return a=A(a,!0),a.setDate(a.getDate()-(6+a.getDay())%7),a};v.minDate=function(a){for(var b,c=arguments,d=c[1],e=1;e<c.length;e++)(b=c[e])&&x(d,b,a)>0&&(d=b);return d},v.maxDate=function(a){for(var b,c=arguments,d=c[1],e=1;e<c.length;e++)(b=c[e])&&x(d,b,a)<0&&(d=b);return d},v.initSlt=function(a,b){for(a.setValue(null);a.remove(0););for(var c,d=0;c=b.list[d];d++)a.add(String(c.text),null,{value:c.value});a.setValue(b.selected)};var E=v.isDate=function(a){return"[object Date]"==m.call(a)},F=v.isArray=function(a){return"[object Array]"==m.call(a)};v.isString=function(a){return"[object String]"==m.call(a)},v.isNumber=function(a){return"[object Number]"==m.call(a)},v.setSltValue=function(a,b){a&&a.setValue(b)},v.getSltValue=function(a){return a?a.getValue():void 0},v.getWeekInfo=function(a){var b=a.getDay(),c=-((b+6)%7),d=(7-b)%7,e={monday:new Date(a.getTime()+c*w),sunday:new Date(a.getTime()+d*w)};return e.workday=e.monday,e.weekend=e.sunday,e},v.cloneADate=function(a){if(a){for(var b,c=[],d=0;d<a.length;d++)(b=a[d])&&c.push(E(b)?new Date(b.getTime()):b.slice());return c}};var G=s(u,"ui-x-calendar-view"),H=G.prototype;UI_X_CALENDAR_VIEW_CELL_CLASS=(H.Cell=s(u)).prototype,UI_X_CALENDAR_VIEW_HCELL_CLASS=(H.HCell=s(u)).prototype,H.WEEKNAMES=["一","二","三","四","五","六","日"],H.MONTH=["一","二","三","四","五","六","七","八","九","十","十一","十二"],H.QUARTER=["第一季度（Q1，一月至三月）","第二季度（Q2，四月至六月）","第三季度（Q3，七月至九月）","第四季度（Q4，十月至十二月）"],H.$setSize=new Function,H.getModel=function(){return this._oModel
},H.setView=function(a){this.$setView(a),this.$flushByRange(),this.$flushSelected(),this.$flushHover()},H.$flushByRange=function(){var a=this._oModel,b=a.getRange(),c=b.start,d=b.end;this._oModel.getDate();var e=a.getTimeType();"W"==e&&(e="D"),this.$forEachCell(function(a){var b=a.getCellInfo();(!c||x(b,c,e)>=0)&&(!d||x(d,b,e)>=0)?a.open():a.close()})},H.$doFlushSelected=function(a,b){var c,d,e=this._oModel,f=e.getDate(),g=e.getSelMode(),h=this.getViewInfo();"RANGE"==g&&f[0]&&f[1]?d=f:c=a(h,f,this.cellValue2IndexMap),this.$forEachCell(function(a,e){if(!a._bClosed){var f,g,h=a.getUnitInfo(),i=d?x(h,d[0],b)>=0&&x(d[1],h,b)>=0:e in c;i?(f=!0,g="+"):(f=!1,g="-"),f!=a._bSelected&&(a._bSelected=f,a.alterClass(g+"selected"))}})},H.$doFlushHover=function(a,b){var c,d,e=this.getModel(),f=e.getSelMode(),g=e.getHoverDate(),h=this.getViewInfo();"RANGE"==f&&g[0]&&g[1]?d=g:c=a(h,g,this.cellValue2IndexMap),this.$forEachCell(function(a,e){if(!a._bClosed){var f=a.getUnitInfo();(d?x(f,d[0],b)>=0&&x(d[1],f,b)>=0:e in c)?!a._bHover&&(a.alterClass("+hover"),a._bHover=!0):a._bHover&&(a.alterClass("-hover"),a._bHover=!1)}})},UI_X_CALENDAR_VIEW_CELL_CLASS.close=function(){this._bSelected&&(this.alterClass("-selected"),this._bSelected=!1),this._bHover&&(this.alterClass("-hover"),this._bHover=!1),this._bClosed=!0,this.disable()},UI_X_CALENDAR_VIEW_CELL_CLASS.open=function(){this._bClosed=!1,this.enable()},UI_X_CALENDAR_VIEW_CELL_CLASS.$mouseover=function(){var a=this.getParent();this.getUnitInfo(),a.getModel().updateHoverDate(A(this.getUnitInfo()),!0),a.$flushHover()},UI_X_CALENDAR_VIEW_CELL_CLASS.$mouseout=function(){var a=this.getParent();this.getUnitInfo(),a.getModel().updateHoverDate(A(this.getUnitInfo()),!1),a.$flushHover()},UI_X_CALENDAR_VIEW_CELL_CLASS.$click=function(){var a=this.getParent(),b=a.getModel();b.udateDateByClick(A(this.getUnitInfo()))&&(a.$flushSelected(),t(a,"change",null,[b.getDate()]),t(a,"dateclick",null,[A(this.getUnitInfo())]))};var I=j.XCalendarMDView=s(G,null,null,a),J=I.prototype,K=(J.Cell=s(H.Cell)).prototype;J.$flushSelected=function(){return this.$doFlushSelected(b,"D")},J.$flushHover=function(){this.$doFlushHover(b,"D")},J.$forEachCell=function(a){for(var b,c=new l(this._nYear,this._nMonth+1,0).getDate(),d=7;(b=this._aCells[d])&&!(b._nDay>0&&b._nDay<=c&&a.call(this,b,d)===!1);d++);},J.isCurrView=function(a){return a=z(a),a[0]==this._nYear&&a[1]==this._nMonth},J.getViewInfo=function(){return[this._nYear,this._nMonth]},J.$setView=function(a){a=z(a);var b,c,d=7,e=a[0],f=a[1],g=new l(e,f,0),h=1-g.getDay(),i=g.getDate(),j=new l(e,f+1,0).getDate(),k=this._oModel,m=k.getRange(),r=m.start,s=m.end;if(this._nYear!=e||this._nMonth!=f)for(this._nYear=e,this._nMonth=f,this.cellValue2IndexMap={},b=new l(e,f,1);g=this._aCells[d];d++)(f=h>0&&j>=h)?(b.setDate(h),(!r||b>=r)&&(!s||s>=b)?g.open():g.close()):g.close(),(36==d||43==d)&&(g.isDisabled()?n:p)(o(g.getOuter()),this.getType()+"-extra"),c=f?h:h>j?h-j:i+h,this.setCellHTML&&this.setCellHTML(g,c,h)!==!1||q(g.getBody(),c),this.cellValue2IndexMap[h]=d,g._nDay=h++},K.getUnitInfo=function(){var a=this.getParent();return[a._nYear,a._nMonth,this._nDay]},K.getCellInfo=K.getUnitInfo;var L=j.XCalendarMWView=s(G,null,null,a),M=L.prototype,N=(M.Cell=s(H.Cell)).prototype;M.$flushSelected=function(){return this.$doFlushSelected(c,"W")},M.$flushHover=function(){this.$doFlushHover(c,"W")},M.$forEachCell=J.$forEachCell,M.isCurrView=J.isCurrView,M.getViewInfo=J.getViewInfo,M.$setView=J.$setView,N.getUnitInfo=function(){var a=this.getParent();return z(D([a._nYear,a._nMonth,this._nDay]))},N.getCellInfo=function(){var a=this.getParent();return[a._nYear,a._nMonth,this._nDay]};var O=j.XCalendarYMView=s(G,null,null,d),P=O.prototype,Q=(P.Cell=s(H.Cell)).prototype;P.$flushSelected=function(){return this.$doFlushSelected(e,"M")},P.$flushHover=function(){this.$doFlushHover(e,"M")},P.$forEachCell=function(a){for(var b,c=0;(b=this._aCells[c])&&a.call(this,b,c)!==!1;c++);},P.isCurrView=function(a){return a=z(a),a[0]==this._nYear},P.getViewInfo=function(){return[this._nYear]},P.$setView=function(a){if(a=z(a),this._nYear=a[0],!this.cellValue2IndexMap)for(var b,c=this.cellValue2IndexMap={},d=0;b=this._aCells[d];d++)c[b._nMonth]=d},Q.getUnitInfo=function(){var a=this.getParent();return[a._nYear,this._nMonth,1]},Q.getCellInfo=Q.getUnitInfo;var R=j.XCalendarYQView=s(G,null,null,f),S=R.prototype,T=(S.Cell=s(H.Cell)).prototype;S.$flushSelected=function(){return this.$doFlushSelected(e,"Q")},S.$flushHover=function(){this.$doFlushHover(e,"Q")},S.$forEachCell=P.$forEachCell,S.isCurrView=P.isCurrView,S.getViewInfo=P.getViewInfo,S.$setView=P.$setView,T.getUnitInfo=Q.getUnitInfo,T.getCellInfo=Q.getUnitInfo}(),function(){function a(a,c,d,e){var f={},g=f.offsetBase=b(d||new Date);g=[g.getFullYear(),g.getMonth(),g.getDate()];var h,i={y:0,m:1,d:2};if(/^([-+]?)(\d+)([ymd])$/.test((a||"").toLowerCase())?(h=g.slice(),q.$1&&"+"!=q.$1?h[i[q.$3]]-=parseInt(q.$2,10):h[i[q.$3]]+=parseInt(q.$2,10),f.start=new Date(h[0],h[1],h[2])):f.start=b(a),/^([-+]?)(\d+)([yMd])$/.test((c||"").toLowerCase())?(h=g.slice(),q.$1&&"+"!=q.$1?h[i[q.$3]]-=parseInt(q.$2,10):h[i[q.$3]]+=parseInt(q.$2,10),f.end=new Date(h[0],h[1],h[2])):f.end=b(c),f.start&&f.end&&u(f.start,f.end,e)>0){var j=f.end;f.end=f.start,f.start=j}return f?f:{}}function b(a){var d;if(null==a)d=null;else if(z(a)){d=[];for(var e=0;e<a.length;e++)d.push(b(a[e]))}else y(a)?d=a:A(a)?d=c(a):B(a)&&(d=new Date(a));return d}function c(a){if(W.test(a))return new Date(q.$1,(q.$3||1)-1,q.$5||1);if(X.test(a)){var b=[0,0,3,6,9];return new Date(q.$1,b[q.$2],1)}return null}function d(a,b,c){return b=Number(b),a=v(a,!0),"D"==c||"W"==c?a.setMonth(a.getMonth()+b):("M"==c||"Q"==c)&&a.setFullYear(a.getFullYear()+b),a}function e(a,b,c){return a=v(a,!0),b=Number(b),"D"==c?a.setDate(a.getDate()+b):"W"==c?a.setDate(a.getDate()+7*b):"M"==c?a.setMonth(a.getMonth()+b):"Q"==c&&a.setMonth(a.getMonth()+3*b),a}function f(a,b){if(b.model)this._oModel=b.model;else{var c=this._oModel.DEFAULT;b.selMode||(b.selMode=c.selMode),b.timeType||(b.timeType=c.timeType),b.selModeList||(b.selModeList=c.selModeList),this._oModel=new this.Model(b)}}function g(a){var b=this.getTypes()[0],c=this,d=[],e=this.StepButton,f=this.Select,g=this._oModel,h=g.getTimeType();g.getDate(),g.getRange();var i,j,k="D"==h||"W"==h,l={D:{clz:this.MDView,st:"-md-view",btns:"-buttons-md"},W:{clz:this.MWView,st:"-md-view",btns:"-buttons-md"},M:{clz:this.YMView,st:"-ym-view",btns:"-buttons-ym"},Q:{clz:this.YQView,st:"-yq-view",btns:"-buttons-yq"}}[h];if(d.push('<div class="'+b+"-buttons "+b+l.btns+' ">'),d.push('<div class="'+b+"-btn-prv"+J.TYPES+'"></div>'),d.push('<select class="'+b+"-slt-year"+L.TYPES+'">'),d.push("</select>"),k){for(d.push('<select class="'+b+"-slt-month"+L.TYPES+'">'),j=1;12>=j;j++)d.push('<option value="'+j+'">'+(10>j?"0":"")+j+"</option>");d.push("</select>")}d.push('<div class="'+b+"-btn-nxt"+J.TYPES+'"></div>'),d.push("</div>"),d.push('<div class="'+b+'-selmode"></div>'),d.push('<div class="'+b+l.st+" "+l.clz.TYPES+'"></div>'),a.innerHTML=d.join(""),a=r(a),i=r(a[0]),j=0,this._uPrvBtn=F(e,i[j++],this),this._uPrvBtn._nStep=-1,this._uYearSlt=F(f,i[j++],this),k&&(this._uMonthSlt=F(f,i[j++],this)),this._uNxtBtn=F(e,i[j++],this),this._uNxtBtn._nStep=1,this._uSelMode=F(this.SelMode,a[1],this),this._uCalView=F(l.clz,a[2],this,{model:g}),this._uCalView.onchange=function(a){H(c,"change",null,[a])},this._uCalView.ondateclick=function(a){H(c,"dateclick",null,[a])},this.render()}function h(a){this._aDate=[],this._aDefaultDate=[],this._oRange={},this._aHoverDate=[],this.setDatasource(a)}var i=ecui,j=i.array,k=i.dom,l=i.ui,m=i.string,n=i.util,p=l.XCalendarUtil,q=RegExp;Object.prototype.toString,j.push;var r=k.children;k.create,k.getParent,k.getPosition,k.moveElements,k.setText;var s=k.addClass;m.formatDate,n.getView;var t=m.encodeHTML,u=p.compareDate;p.date2Arr;var v=p.arr2Date;p.getWorkday;var w=p.minDate,x=p.maxDate,y=p.isDate,z=p.isArray,A=p.isString,B=p.isNumber,C=p.cloneADate,D=p.setSltValue,E=p.getSltValue;p.getWeekInfo,p.getQuarter,p.initSlt;var F=i.$fastCreate,G=i.inherits,H=i.triggerEvent;i.setFocused;var I=l.Control;I.prototype;var J=l.Button;J.prototype;var K=l.InputControl;K.prototype;var L=l.Select,M=l.XCalendarMDView,N=l.XCalendarMWView,O=l.XCalendarYMView,P=l.XCalendarYQView,Q=l.XCalendarLayer=G(I,"ui-x-calendar-layer",null,function(a,b){f.call(this,a,b),g.call(this,a,b)}),R=Q.prototype,S=(R.StepButton=G(J,null)).prototype,T=(R.Select=G(L,null)).prototype;UI_X_CALENDAR_LAYER_MD_VIEW_CLASS=(R.MDView=G(M,null)).prototype,UI_X_CALENDAR_LAYER_MW_VIEW_CLASS=(R.MWView=G(N,null)).prototype,UI_X_CALENDAR_LAYER_YM_VIEW_CLASS=(R.YMView=G(O,null)).prototype,UI_X_CALENDAR_LAYER_YQ_VIEW_CLASS=(R.YQView=G(P,null)).prototype,T.Options=G(T.Options,null,null,function(a){s(a,"ui-x-calendar-layer-select-options")}),UI_X_CALENDAR_LAYER_SEL_MODE_CLASS=(R.SelMode=G(I,"ui-x-calendar-layer-selmode")).prototype;var U=R.Model=h,V=U.prototype;V.DEFAULT={selMode:"SINGLE",timeType:"D",selModeList:[{text:"单选",value:"SINGLE",prompt:"单项选择"},{text:"范围多选",value:"RANGE",prompt:"范围选择，点击一下选择开始值，再点击一下选择结束值"},{text:"任意多选",value:"MULTIPLE",prompt:"可以选择离散的多项"}]};var W=/^(\d+)(\-(\d+)(\-(\d+))?)?$/,X=/^(\d+)\-Q(\d)/;R.$setSize=new Function,R.setDatasource=function(a,b){this._oModel.setDatasource(a),!b&&this.render()},R.$flushCalView=function(){this._oModel.getTimeType();var a=this._uCalView,b=[];(o=Number(E(this._uYearSlt)))&&b.push(o),(o=Number(E(this._uMonthSlt)))&&b.push(o-1),a.setView(b)},R.render=function(a){a=a||{};var b=this.getModel();if(!a.remainSlt&&this.$resetSltDatasource(),!a.remainSelMode&&this.$resetSelModeCtrl(),!a.remainTimeView){var c=this._oModel.getDate(),d=a.viewDate||c[c.length-1]||(a=new Date,a.setFullYear(Math.min(Math.max(b._nYearRangeStart,a.getFullYear()),b._nYearRangeEnd)),a);D(this._uYearSlt,d.getFullYear()),D(this._uMonthSlt,d.getMonth()+1),this.$resetStepBtn()}this.$flushCalView()},R.$resetSelModeCtrl=function(){var a=this.getTypes()[0],b=this._uSelMode,c=b.getOuter(),d=this.getModel(),e=d.getSelModeList(),f=d.getSelMode();c.innerHTML="",c.style.display=e&&e.length?"":"none";var g,h,i,j,k=[];for(g=0;h=e[g];g++)j=h.prompt?' title="'+t(h.prompt)+'" ':"",i=h.value==f?' checked="checked" ':"",k.push("<input "+j+' type="radio" name="'+a+"-selmode-radio-"+this.getUID()+'" class="'+a+'-selmode-radio" '+i+' data-selmode="'+h.value+'"/>'),k.push("<span "+j+' class="'+a+'-selmode-text">'+t(h.text)+"</span>");c.innerHTML=k.join("")},R.$resetSltDatasource=function(){var a=this._oModel.getRange(),b=this._uYearSlt,c=this.getModel();if(b){var d,e=(a.offsetBase||new Date).getFullYear(),f=a.start?a.start.getFullYear():e-5,g=a.end?a.end.getFullYear():e+5,h=Number(E(b));for(b.setValue(null);b.remove(0););for(var i=f;g>=i;i++)b.add(String(i),null,{value:Number(i)}),i==h&&(d=i);c._nYearRangeStart=f,c._nYearRangeEnd=g,b.setValue(null!=d?d:f),this.$resetStepBtn()}},R.$resetStepBtn=function(){var a=Number(E(this._uYearSlt)),b=Number(E(this._uMonthSlt)),c=this.getModel(),e=c.getTimeType(),f=[a,b-1];f=d(f,1,e),this._uNxtBtn[f.getFullYear()>c._nYearRangeEnd?"disable":"enable"](),f=[a,b-1],f=d(f,-1,e),this._uPrvBtn[f.getFullYear()<c._nYearRangeStart?"disable":"enable"]()},R.getDate=function(){return this._oModel.getDate()},R.getModel=function(){return this._oModel},R.getValue=R.getDate,R.getTimeType=function(){return this._oModel.getTimeType()},R.init=function(){this._uMonthSlt&&this._uMonthSlt.init(),this._uYearSlt&&this._uYearSlt.init(),this._uCalView.init(),Q.superClass.init.call(this)},T.onchange=function(){var a=this.getParent();a.$resetStepBtn(),a.$flushCalView()},S.onclick=function(){var a=this.getParent(),b=a._uYearSlt,c=a._uMonthSlt,e=[Number(E(b)),Number((E(c)||1)-1),1];e=d(e,this._nStep,a.getModel().getTimeType()),D(b,e.getFullYear()),D(c,e.getMonth()+1),a.$resetStepBtn(),a.$flushCalView()},UI_X_CALENDAR_LAYER_SEL_MODE_CLASS.onclick=function(a){var b=this.getParent(),c=a.target;if("INPUT"==c.tagName){var d=b.getModel();d.setDatasource({selMode:c.getAttribute("data-selmode")}),b.$flushCalView(),H(b,"change",null,[d.getDate()])}},V.setDatasource=function(b){b=b||{},null!=b.forbidEmpty&&(this._bForbidEmpty=b.forbidEmpty||!1),b.timeType&&(this._sTimeType=b.timeType,this._sCellTimeType=b.cellTimeType,"W"==this._sCellTimeType&&(this._sCellTimeType="D"));var c;b.selModeList&&(c=this._aSelModeList=b.selModeList);var d;if((d=b.selMode)||c){var e=this._sSelMode;this._sSelMode=d||c[0].value,this.$switchSelMode(e,d)}var f=b.range;f&&(this._oRange=a(f.start,f.end,f.offsetBase,this._sCellTimeType),this.$clipByRange(this._aDate));var g=b.defaultDate;g&&(this._aDefaultDate=this.$parseADate(g));var h=b.date;h&&(this._aDate=this.$parseADate(h)),this._bForbidEmpty&&!this._aDate.length&&(this._aDate=C(this._aDefaultDate)),"SINGLE"==this._sSelMode?this._aDate=this._aDate.slice(0,1):"RANGE"==this._sSelMode&&(this._aDate=this._aDate.slice(0,2))},V.$parseADate=function(a){var a=b(a)||[];if(z(a)||(a=[a]),"RANGE"==this._sSelMode&&a[0]&&a[1]&&u(a[0],a[1],this._sCellTimeType)>0){var c=a[1];a[1]=a[0],a[0]=c}return this.$clipByRange(a),a},V.getDate=function(){return this._aDate},V.getDefaultDate=function(){return this._aDefaultDate},V.getTimeType=function(){return this._sTimeType},V.goStep=function(a){for(var b,c=0;c<this._aDate.length;c++)(b=this._aDate[c])&&(this._aDate[c]=e(b,a,this._sTimeType))},V.getHoverDate=function(){return this._aHoverDate||[]},V.getSelMode=function(){return this._sSelMode},V.getSelModeList=function(){return this._aSelModeList},V.getRange=function(){return this._oRange},V.$clipByRange=function(a){for(var b,c=this.getRange(),d=this._sTimeType,e=0;e<a.length;)(b=a[e])&&(!c.start||u(b,c.start,d)>=0)&&(!c.end||u(c.end,b,d)>=0)?e++:"RANGE"==this._sSelMode?a=[]:a.splice(e,1)},V.testEdge=function(a){var b,c=this._sTimeType,d=this.getDate().slice(),f=this.getRange(),g=f.start,h=f.end;return g||(g=[this._nYearRangeStart,0,1]),h||(h=[this._nYearRangeEnd,11,31]),d.length?0>a&&g?(b=w.apply(null,[c].concat(d)),u(e(b,a,c),g,c)>=0):a>0&&h?(b=x.apply(null,[c].concat(d)),u(e(b,a,c),h,c)<=0):!0:!1},V.udateDateByClick=function(a){var b=this.getDate(),c=this.getSelMode(),d=!0,e=this._sTimeType;if("RANGE"==c)b[0]&&!b[1]?b[1]=a:b=[a];else if("SINGLE"==c)b[0]&&0==u(b[0],a,e)?d=!1:b[0]=a;else if("MULTIPLE"==c){for(var f,g=!1,h=0;f=b[h];)0==u(f,a,e)?(b.splice(h,1),g=!0):h++;!g&&b.push(a)}return this.setDatasource({date:b}),d},V.updateHoverDate=function(a,b){var c=[],d=this.getDate();b?(c="RANGE"==this._sSelMode&&d[0]&&!d[1]?u(d[0],a,this._sTimeType)>0?[a,d[0]]:[d[0],a]:[a],this._aHoverDate=c):this._aHoverDate=[]},V.$switchSelMode=function(a,b){a!=b&&null!=a&&null!=b&&(this._aDate=[])}}(),function(){var a=ecui,b=a.array,c=a.dom,d=a.ui,e=a.string,f=a.util,g=d.XCalendarUtil,h=document;Object.prototype.toString;var i=c.children,j=c.create;c.getParent;var k=c.getPosition,l=c.moveElements;c.setText;var m=c.addClass,n=e.formatDate;e.getByteLength;var o=e.encodeHTML;e.sliceByte,b.indexOf;var p=f.getView;f.blank;var q=f.extend,r=g.getWeekInfo,s=g.getQuarter,t=g.minDate,u=g.maxDate;Array.prototype.slice;var v=a.$fastCreate,w=a.inherits,x=a.triggerEvent,y=a.setFocused,z=d.Control;z.prototype;var A=d.InputControl,B=A.prototype,C=d.Select,D=d.Button,E=d.XCalendarLayer,F=d.XCalendar=w(A,"ui-x-calendar",function(a,b){b.hidden=!0},function(a,b){var c,d,e,f,g,k=this.getTypes()[0],m=[],n=0,p=this._bShiftBtnDisabled=b.shiftBtnDisabled;this._oTextOptions={blankText:b.blankText,rangeLinkStr:b.rangeLinkStr,weekLinkStr:b.weekLinkStr};var q=b.headText;null==q&&(q="时间粒度：",m.push('<span class="'+k+'-head-text">'+o(q)+"</span>"),n++),m.push('<select class="'+k+"-slt-timetype"+C.TYPES+'">'),m.push("</select>"),e=n++,m.push('<span class="'+k+"-btn-prv "+k+'-btn"></span>','<span class="'+k+'-text"></span>','<span class="'+k+"-btn-cancel "+k+'-btn""></span>','<span class="'+k+"-btn-cal "+k+'-btn"></span>','<span class="'+k+"-btn-nxt "+k+'-btn"></span>'),f=n,n+=5,g=n;var r=["D","W","M","Q"];for(c=0;d=r[c];c++)m.push('<div class="'+k+'-layer" style="position:absolute;display:none"></div>'),n++;var s=j();s.innerHTML=m.join("");var t,u=i(s);null!=e&&(this._uTimeTypeSlt=v(this.Select,u[e],this)),this._eText=u[f+1],t=u[f],p&&(t.style.display="none"),this._uBtnPrv=v(this.Button,t,this,{command:"prv",icon:!0}),t=u[f+2],this._uBtnCancel=v(this.Button,t,this,{command:"cancel",icon:!0}),t=u[f+3],this._uBtnCal=v(this.Button,t,this,{command:"cal",icon:!0}),t=u[f+4],p&&(t.style.display="none"),this._uBtnNxt=v(this.Button,t,this,{command:"nxt",icon:!0});var w=this._oLayers={};for(c=0,c=0;d=r[c];c++)t=u[g+c],h.body.appendChild(t),w[d]=t;l(s,a,!0),this.setDatasource(b)}),G=F.prototype,H=(G.Button=w(D,null,function(a,b){var c=j(),d=this.getType();l(a,c,!0),a.innerHTML='<span class="'+d+'-inner"></span>',l(c,a.firstChild,!0),b.icon&&(c=j(d+"-icon","","span"),a.appendChild(c)),this._sCommand=b.command})).prototype,I=(G.Select=w(C,null)).prototype;I.Options=w(I.Options,null,null,function(a){m(a,"ui-x-calendar-select-options")});var J=(G.Layer=w(E)).prototype,K=J.Model,L=K.prototype,M="yyyy-MM-dd",N="yyyy-MM";new Date(0),G.setDatasource=function(a,b,c){a=a||{};var d=a.timeTypeOpt||{},e=this._aTimeTypeList=a.timeTypeList||[{text:"日",value:"D"},{text:"周",value:"W"},{text:"月",value:"M"},{text:"季",value:"Q"}],f=this._oModels={};this._sTimeType=a.timeType||(e.length?e[0].value:void 0),a.disableCancelBtn&&this._uBtnCancel.hide(),a.disablePreviousBtn&&this._uBtnPrv.hide(),a.disableNextBtn&&this._uBtnNxt.hide();for(var g,h,i,j=0;g=e[j];j++)g=g.value,h=d[g]=q({timeType:g},d[g]),i=L.DEFAULT,h.selMode||(h.selMode=i.selMode),h.timeType||(h.timeType=i.timeType),h.selModeList||(h.selModeList=i.selModeList),h.defaultDate||(h.defaultDate=h.date),h.forbidEmpty=a.forbidEmpty||!1,f[g]?f[g].setDatasource(h):f[g]=new K(h);!b&&this.render(c)},G.render=function(a){a=a||{};var b=this._sTimeType;if(b){var c=this._oModels,d=this._aTimeTypeList,e=this._oLayers;!a.remainSlt&&this.$resetTimeTypeSlt();for(var f,g,h,i=0;f=d[i];i++)f=f.value,h=!1,e[f]instanceof z||(e[f]=v(this.Layer,e[f],this,{model:c[f]}),e[f].init(),h=!0),g=e[f],f==b?g._bLayerShow&&!a.remainLayer&&g.hide():e[f].hide();this.$flushThis()}},G.$setSize=new Function,G.$resetTimeTypeSlt=function(){var a=this._aTimeTypeList,b=this._uTimeTypeSlt;if(b){for(b.setValue(null);b.remove(0););for(var c,d=0;c=a[d];d++)b.add(String(c.text),null,{value:c.value});b.setValue(this._sTimeType)}},G.$showLayer=function(){var a=this.getCurrLayer(),b=this._bShiftBtnDisabled?this._eText:this._uBtnPrv.getOuter(),c=k(b),d=c.top+this.getHeight();if(!a._bLayerShow){a.render({remainSlt:!0,remainSelMode:!0}),a.show(),y(a);var e=a.getHeight();a.setPosition(c.left,d+e<=p().bottom?d:c.top-e)}},G.$clear=function(){this.getModel(),this.getModel().setDatasource({date:[]}),this.$flushThis()},G.$flushThis=function(){this._oDate;var a=this.getModel(),b=this.$getShowText();this._eText.innerHTML=b.shortHTML,b.fullText&&this._eText.setAttribute("title",b.fullText),this._uBtnPrv[a.testEdge(-1)?"enable":"disable"](),this._uBtnNxt[a.testEdge(1)?"enable":"disable"]()},G.$getSingleText=function(a){options=this._oTextOptions||{};var b=this.getModel(),c=this._sTimeType;if(!a)return"";if("D"==c)return n(a,M);if("W"==c){var d=r(a),e=b.getRange();return n(e.start?u("D",d.workday,e.start):d.workday,M)+(options.weekLinkStr||" ~ ")+n(e.end?t("D",d.weekend,e.end):d.weekend,M)}return"M"==c?n(a,N):"Q"==c?a.getFullYear()+"-Q"+s(a):void 0},G.$getShowText=function(){options=this._oTextOptions||{};var a,b,c,d=this.getType(),e=this.getModel(),f=e.getDate(),g=this._sTimeType,h=e.getSelMode(),i=options.rangeLinkStr||" 至 ";if(!f[0])return shortHTML=['<span class="',d,"-blank",'">',o(options.blankText||"请选择时间"),"</span>"].join(""),{shortHTML:shortHTML,fullText:""};if("SINGLE"==h)b=a=this.$getSingleText(f[0],options);else if("RANGE"==h)"W"==g?(a=this.$getSingleText(f[0],options),c=this.$getSingleText(f[1],options),b="["+a+"]"+i+(c?"["+c+"]":""),a+=", ..."):a=b=this.$getSingleText(f[0],options)+i+this.$getSingleText(f[1],options);else if("MULTIPLE"==h){a=this.$getSingleText(f[0],options)+", ...",b=[];for(var j=0;j<f.length;j++)b.push(this.$getSingleText(f[j],options));b="["+b.join("], [")+"]"}return{shortHTML:o(a),fullText:b}},G.$click=function(a){B.$click.call(this),a.target==this._eText&&this.$showLayer()},G.$activate=function(a){B.$activate.call(this,a),this.$showLayer()},G.$goStep=function(a){this.getModel().goStep(a),this.getCurrLayer().render({remainSlt:!0,remainSelMode:!0}),this.$flushThis()},G.getModel=function(){return this.getCurrLayer().getModel()},G.getCurrLayer=function(){return this._oLayers[this._sTimeType]},G.getDate=function(){return this.getModel().getDate()},G.getValue=G.getDate,G.getTimeType=function(){return this.getModel().getTimeType()},G.getSelMode=function(){return this.getModel().getSelMode()},G.init=function(){B.init.call(this),this._uBtnCal.init(),this._uBtnCancel.init(),this._uBtnNxt.init(),this._uBtnPrv.init(),this._uTimeTypeSlt.init()},H.$click=function(a){var b,c=this.getParent();switch(this._sCommand){case"prv":c.$goStep(-1),b=!0;break;case"nxt":c.$goStep(1),b=!0;break;case"cal":c.$showLayer();break;case"cancel":c.$clear(),b=!0}x(c,"change",null,[c.getModel().getDate().slice()]),a.exit()},I.onchange=function(){var a=this.getParent();a._sTimeType=this.getValue(),a.$flushThis(),x(a,"change",null,[a.getModel().getDate().slice()])},J.$blur=function(){this.hide()},J.onchange=function(){var a=this.getParent();a.$flushThis(),this._bLayerChanged=!0},J.ondateclick=function(){var a=this.getModel(),b=a.getSelMode();a.getDate(),"SINGLE"==b&&this.hide()},J.show=function(){this._bLayerShow=!0,this._bLayerChanged=!1,G.Layer.superClass.show.apply(this,arguments)},J.hide=function(){if(this._bLayerShow){var a=this.getParent(),b=this.getModel(),c=b.getSelMode(),d=b.getDate();"RANGE"==c&&d[0]&&!d[1]&&(d[1]=new Date(d[0].getTime()),a.$flushThis()),a&&x(a,"layerhide"),this._bLayerChanged&&(x(a,"change",null,[this.getModel().getDate().slice()]),this._bLayerChanged=!1)}this._bLayerShow=!1,G.Layer.superClass.hide.apply(this,arguments)}}(),function(){function a(a,b){return a._eChildren=b,b.className=a.getType()+"-children",b.style.cssText="",b}function b(a){a.setClass(a.getPrimary()+(a._aChildren.length?a._bCollapsed?"-collapsed":"-expanded":""))}function c(a,b,c){return a.className=(s(a.className)||b.getPrimary())+b.constructor.agent.TYPES,v(b.constructor,a,null,t(t({},c),x(a)))}function d(a,c){a._eChildren&&a._bCollapsed!=c&&(a._eChildren.style.display=(a._bCollapsed=c)?"none":"",b(a))}var e=ecui,f=e.array,g=e.dom,h=e.string,i=e.ui,j=e.util,k=f.indexOf,l=f.remove,m=g.addClass,n=g.children,o=g.create,p=g.first,q=g.getStyle,r=g.insertAfter,s=(g.removeClass,h.trim),t=j.extend,u=j.toNumber,v=e.$fastCreate,w=e.getMouseX,x=e.getOptions,y=e.inherits,z=e.triggerEvent,A=i.Control,B=A.prototype,C=i.TreeView=y(A,"ui-treeview",function(b,c){c.resizable=!1;var d=p(b);if(d&&"LABEL"==d.tagName){for(var e=0,f=n(b).slice(1),g=a(this,b.appendChild(o()));d=f[e++];)g.appendChild(d);m(b,c.current=c.primary+(c.collapsed?"-collapsed":"-expanded")),c.collapsed&&(g.style.display="none")}},function(a,b){var d=this._aChildren=[];this._bCollapsed=b.collapsed||!1,this._bExpandSelected=b.expandSelected!==!1;for(var e,f=0,g=n(a.lastChild);e=g[f];)delete b.current,(d[f++]=c(e,this,b)).$setParent(this)}),D=C.prototype;D.$click=function(a){a.getControl()==this&&(B.$click.call(this,a),w(this)<=u(q(this.getBody(),"paddingLeft"))?(this[a=this.isCollapsed()?"expand":"collapse"](),z(this,a)):this.select())},D.$dispose=function(){this._eChildren=null,B.$dispose.call(this)},D.$hide=function(){B.$hide.call(this),this._eChildren&&(this._eChildren.style.display="none")},D.$setParent=function(a){var c=this.getRoot(),d=this.getParent();this==c._cSelected||this==c?(c._cSelected&&c._cSelected.alterClass("-selected"),c._cSelected=null):(l(d._aChildren,this),b(d)),B.$setParent.call(this,a),this._eChildren&&r(this._eChildren,this.getOuter())},D.$show=function(){B.$show.call(this),this._eChildren&&!this._bCollapsed&&(this._eChildren.style.display="")},D.add=function(d,e,f){var g,h=this._aChildren;return this._eChildren||(a(this,o()),r(this._eChildren,this.getOuter()),this._eChildren.style.display=this._bCollapsed?"none":""),(g=h[e])?g=g.getOuter():(e=h.length,g=null),"string"==typeof d?(g=this._eChildren.insertBefore(o(),g),g.innerHTML=d,d=c(g,this,f)):this._eChildren.insertBefore(d.getOuter(),g),d.$setParent(this),h.splice(e,0,d),b(this),d},D.collapse=function(){d(this,!0)},D.expand=function(){d(this,!1)},D.getChildren=function(){return this._aChildren.slice()},D.getFirst=function(){return this._aChildren[0]||null},D.getLast=function(){return this._aChildren[this._aChildren.length-1]||null},D.getNext=function(){var a=this.getParent();return a instanceof C&&a._aChildren[k(a._aChildren,this)+1]||null},D.getPrev=function(){var a=this.getParent();return a instanceof C&&a._aChildren[k(a._aChildren,this)-1]||null},D.getRoot=function(){for(var a,b=this;(a=b.getParent())instanceof C&&k(a._aChildren,b)>=0;b=a);return b},D.getSelected=function(){return this.getRoot()._cSelected||null},D.init=function(){B.init.call(this);for(var a,b=0,c=this._aChildren;a=c[b++];)a.init()},D.isCollapsed=function(){return!this._eChildren||this._bCollapsed},D.select=function(){var a=this.getRoot();a._cSelected!=this&&(a._cSelected&&a._cSelected.alterClass("-selected"),this.alterClass("+selected"),a._cSelected=this),this._bExpandSelected&&this.expand()}}(),function(){var a=ecui,b=a.dom,c=a.ui,d=(a.util,a.inherits),e=b.create,f=a.$connect,g=a.$fastCreate,h=c.Checkbox,i=c.TreeView,j=i.prototype,k=c.CheckTree=d(i,"ui-check-tree",null,function(a,b){this._oSuperior=b.superior;for(var c=0,d=this._uCheckbox=g(h,a.insertBefore(e(h.types[0]),a.firstChild),this,{name:b.name,value:b.value,disabled:b.disabled}),i=this.getChildren();a=i[c++];)b=a._oSuperior,b!==!1&&(a=a._uCheckbox,b?f(a,a.setSubject,b):a.setSubject(d))}),l=k.prototype;l.$cache=function(a,b){j.$cache.call(this,a,b),this._uCheckbox.cache(!0,!0)},l.init=function(){j.init.call(this),this._uCheckbox.init()},l.getChecked=function(){for(var a,b=0,c=this.getChildren(),d=this.isChecked()?[this]:[];a=c[b++];)d=d.concat(a.getChecked());return d},l.getValue=function(){return this._uCheckbox.getValue()},l.isChecked=function(){return this._uCheckbox.isChecked()},l.setChecked=function(a){this._uCheckbox.setChecked(a)},l.disable=function(){this._uCheckbox.disable(),j.disable.call(this)},l.enable=function(){this._uCheckbox.enable(),l.enable.call(this)},l.add=function(a,b,c){var d=j.add.call(this,a,b,c);return d._oSuperior!==!1&&(d._oSuperior?d._uCheckbox.setSubject(d._oSuperior):d._uCheckbox.setSubject(this._uCheckbox)),d},l.$ready=function(){this._uCheckbox.$ready()}}(),function(){function a(a){a.setClass(a.getPrimary()+(a._aChildren.length?a._bCollapsed?"-collapsed":"-expanded":""))}var b=ecui,c=b.array,d=b.ui,c=b.array,e=b.dom,f=b.string,g=b.util,h=(b.$fastCreate,b.getMouseX),i=b.inherits,j=b.getOptions,k=b.dispose,l=b.triggerEvent,m=g.extend,n=c.indexOf,m=g.extend,o=g.toNumber,p=e.getStyle,q=e.first,r=e.insertAfter,s=f.trim,t=g.blank,u=d.Control,v=u.prototype,w=d.TreeView,x=w.prototype,y=d.DataTree=i(w,"ui-data-tree",function(a,b){b.expandSelected=b.expandSelected===!0,q(a)&&"divlabel".indexOf(q(a).tagName.toLowerCase())>=0&&m(b,j(q(a))),b.value&&(b.value+=""),b.resizable=!1},function(a,b){this._aSelected=[],this._sValue=b.value,this._bHideRoot=b.hideRoot===!0,this._bSelectAble=b.selectable!==!1,this._bMultiSelect=b.multi===!0,this._bAsyn=b.asyn,b.asyn&&this._aChildren.length<=0&&(this.add("Loadding",null),this.collapse(),this._bNeedAsyn=!0)}),z=y.prototype;z.init=function(){x.init.call(this),this._bHideRoot&&this==this.getRoot()&&(this.hide(),this.expand())},z.$setParent=function(b){var c,d=this.getRoot(),e=d._aSelected,f=this.getParent();(c=n(e,this))>=0&&d.$setSelected(this,!1),this!==d&&(remove(f._aChildren,this),a(f)),v.$setParent.call(this,b),this._eChildren&&r(this._eChildren,this.getOuter())},z.getValue=function(){return this._sValue},z.getText=function(){return s(this.getContent().replace(/<[^>]+>/g,""))},z.getSelected=function(){return this==this.getRoot()?this._aSelected.slice():void 0},z.getSelectedValues=function(){var a,b,c=[];if(this==this.getRoot()){for(a=0;b=this._aSelected[a];a++)c.push(b.getValue());return this._bMultiSelect?c:c[0]}},z.setValues=function(a){var b;if(n(a,this._sValue)>=0)for(this.getRoot().$setSelected(this,!0),b=this;(b=b.getParent())&&b instanceof w;)b.isCollapsed()&&b.expand();for(var b,c=0;b=this._aChildren[c];c++)b.setValues(a)},z.getItemByValue=function(a){var b=null;this._sValue==a&&(b=this);for(var c,d=0;(c=this._aChildren[d])&&null==b;d++)b=c.getItemByValue(a);return b},z.load=function(a){var b,c,d;for(b=0;c=this._aChildren[b];b++)k(c);for(this._aChildren=[],this._eChildren.innerHTML="",b=0;c=a[b];b++)d=c.text,c=m({asyn:this._bAsyn},c),delete c.text,this.add(d,null,c).init()},z.$expand=function(a){var b=a.getRoot();a._bNeedAsyn&&(l(b,"load",null,[a.getValue(),function(b){a.load(b)}]),a._bNeedAsyn=!1)},z.$click=function(a){var b=null;a.getControl()==this&&(v.$click.call(this,a),h(this)<=o(p(this.getBody(),"paddingLeft"))?(this[a=this.isCollapsed()?"expand":"collapse"](),l(this.getRoot(),a,null,[this])):(n(this.getRoot()._aSelected,this)>=0?this._bMultiSelect&&(b=!1):b=!0,this.getRoot().setSelected(this),l(this.getRoot(),"select",null,[this,1==b]),null!==b&&l(this.getRoot(),"change",null,[this.getValue(),b])))},z.getSelectedText=function(){var a,b,c=[];if(this==this.getRoot()){for(a=0;b=this._aSelected[a];a++)c.push(b.getText());return c.join(",")}},z.setSelectAble=function(a){var b,c=this.getRoot();!this.enable&&(b=n(c._aSelected,this))>=0&&c.$setSelected(this,!1),this._bSelectAble=a},z.$setSelected=function(a,b){var c,d;this==this.getRoot()&&(c=this._aSelected,d=n(c,a),b===!0?0>d&&(c.push(a),a.alterClass("+selected")):b===!1&&d>=0&&(c.splice(d,1),a.alterClass("-selected")))},z.clearSelected=function(){var a,b;if(this==this.getRoot())for(a=this._aSelected;b=a[0];)this.$setSelected(b,!1)},z.setSelected=function(a,b){var c,d;this==this.getRoot()&&a._bSelectAble&&(c=this._aSelected,d=n(c,this),(d=n(c,a))>=0?!b&&this._bMultiSelect&&this.$setSelected(a,!1):(!this._bMultiSelect&&c.length>=1&&this.$setSelected(c[0],!1),this.$setSelected(a,!0)),a&&this._bExpandSelected&&a.expand())},z.$setSize=t}(),function(){function a(a){""==a.getValue()?a._uCancel.hide():a._bHideCancel||a._uCancel.show()}var b=ecui,c=(b.array,b.dom),d=b.ui,e=b.util,f=(b.string,b.$fastCreate),g=b.setFocused,h=b.dispose,i=c.create,j=c.children,k=c.moveElements,l=c.getPosition,m=b.inherits,n=e.getView,o=e.extend,p=e.blank,q=b.triggerEvent,r=d.Control,s=r.prototype,t=d.Button,u=t.prototype,v=d.DataTree,w=(v.prototype,d.InputControl),x=w.prototype,y=d.InputTree=m(w,"ui-input-tree",function(a,b){var c=this.getTypes()[0],d=i();d.innerHTML='<div class="'+c+'-layer" '+' style="position:absolute;display:none; z-index:65535; height:230px; width:250px">'+'<div class="'+v.types[0]+'"></div></div>',d=d.firstChild,k(a,d.lastChild,!0),b._eLayer=document.body.appendChild(d),a.innerHTML='<span class="'+c+'-text">请选择</span><span class="'+c+'-cancel"></span><span class="'+c+'-button"></span><input type="hidden name="'+b.name+'"" />',b.hidden=!0,b.value&&(b.value+="")},function(a,b){var c;b.value&&x.setValue.call(this,b.value),c=j(a),this._multi=b.multi||!1,this._textLength=b.textLength||15,this._eText=c[0],this._uCancel=f(this.Cancel,c[1],this),this._uLayer=f(this.Layer,b._eLayer,this,{asyn:b.asyn,multi:this._multi}),b._eLayer=null,delete b._eLayer,b.hideCancel===!0&&(this._bHideCancel=!0,this._uCancel.$hide())}),z=y.prototype,A=z.Layer=m(r,"ui-input-tree-layer",null,function(a,b){a.style.position="absolute",this._uTree=f(this.Tree,a.firstChild,this,{collapsed:!0,asyn:b.asyn,multi:b.multi})}),B=A.prototype,v=d.DataTree,C=(z.Cancel=m(r)).prototype,D=B.Tree=m(v,null,null,function(a,b){if(this._bAsyn=b.asyn,b.asyn&&this._aChildren.length<=0){var c=this.add("Loading",null);
c.canExpanded=!1,this.collapse(),this._bNeedAsyn=!0}}),E=D.prototype;z.$activate=function(){this._uLayer.show()},z.init=function(){var a=this.getValue();this.setValue(a),this._uLayer.init(),x.init.call(this)},z.$setText=function(a){a&&a.length>this._textLength&&(a=a.substring(0,this._textLength)+"..."),a||(a="请选择"),this._eText.innerHTML=a},z.setValue=function(b){var c=this._uLayer._uTree;x.setValue.call(this,b),c.clearSelected(),c.setValues([b]),this.$setText(c.getSelectedText()),a(this)},z.clear=function(){var b=this._uLayer._uTree;b.clearSelected(),x.setValue.call(this,""),this.$setText(""),a(this)},z.clearState=function(){function a(b){b.collapse();var c=b.getChildren();if(c&&c.length)for(var d=0;d<c.length;d++)a(c[d])}var b=this._uLayer._uTree;a(b)},z.getTreeNodeByValue=function(a){return this._uLayer.getTreeNodeByValue(a)},z.setText=function(a){this.$setText(a)},z.expand=function(a,b){var c=this;this._uLayer.expand(a,function(){b.call(c)})},z.selectParent=function(a){var b=this._uLayer.getTreeNodeByValue(a);b!=b.getRoot()&&(b=b.getParent()),this.setValue(b.getValue())},B.init=function(){this._uTree.init(),s.init.call(this)},B.$blur=function(){this.hide()},B.expand=function(a,b){var c=this._uTree,d=c.getItemByValue(a);d&&(d.expand(),c.onexpand(d,b))},B.getTreeNodeByValue=function(a){return this._uTree.getItemByValue(a)},B.show=function(){var a,b,c,d=this.getParent();s.show.call(this),d&&(a=l(d.getOuter()),c=n(),b=a.top,a.top=b+d.getHeight(),b=a.left,a.left=b+this.getWidth()>c.right?b+d.getWidth()-this.getWidth():b,this.setPosition(a.left,a.top),g(this))},C.$click=function(){var b=this.getParent();s.$click.call(this),b.$setText(""),x.setValue.call(b,""),b._uLayer._uTree.clearSelected(),a(b)},C.$activate=u.$activate,E.onselect=function(b){var c=this.getParent().getParent(),d=this.getParent()._uTree,e=b.getValue(),f=b.getText();if(c._multi){var g=d.getSelectedValues().join(",");x.setValue.call(c,g),c.$setText(d.getSelectedText())}else x.setValue.call(c,e),c.$setText(f),this.getParent().hide();a(c)},E.onexpand=function(a,b){var c=this.getParent().getParent(),b=b||p,d=c._uLayer.getOuter(),e=d.scrollTop,f=function(){d.scrollTop=e,d=null};a._bNeedAsyn?(q(c,"loadtree",null,[a.getValue(),function(c){a.load(c),b.call(null),f()}]),a._bNeedAsyn=!1):(b.call(null),f())},E.load=function(a){var b,c,d;for(b=0;c=this._aChildren[b];b++)h(c);for(this._aChildren=[],this._eChildren.innerHTML="",b=0;c=a[b];b++)d=c.text,c=o({asyn:this._bAsyn},c),delete c.text,this.add(d,null,c).init();(!a||a.length<=0)&&this.setClass(this.getPrimary())}}(),function(){function a(a){var b=q(a.getBody().style.left);a._uPrev[b<a._uPrev.getWidth()?"enable":"disable"](),a._uNext[b>a.getBodyWidth()-a.$$titleWidth-a._uNext.getWidth()?"enable":"disable"]()}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=b.util,g=Math,h=g.max,i=g.min,j=c.indexOf,k=d.create,l=d.moveElements,m=d.remove,n=d.first,o=d.setStyle,p=f.extend,q=f.toNumber,r=b.$fastCreate,s=b.inherits,t=b.triggerEvent,u=e.Control,v=u.prototype,w=e.Button,x=e.Item,y=x.prototype,z=e.Items,A=e.Tab=s(u,"ui-tab",null,function(a,b){var c=this.getType(),d=k(c+"-title","position:relative;overflow:hidden");this._oSelected=b.selected||0,d.innerHTML='<div class="'+c+"-prev"+this.Button.TYPES+'" style="position:absolute;display:none;left:0px"></div><div class="'+c+"-next"+this.Button.TYPES+'" style="position:absolute;display:none"></div><div class="'+c+'-items" style="position:absolute;white-space:nowrap"></div>',l(a,b=d.lastChild),a.appendChild(d),this.$setBody(b),this.$initItems(),this._uNext=r(this.Button,b=b.previousSibling,this),this._uPrev=r(this.Button,b.previousSibling,this)}),B=A.prototype,C=(B.Button=s(w,"ui-tab-button")).prototype,D=(B.Item=s(x,null,null,function(a,b){var c=b.parent;if("LABEL"!=a.tagName){var d,e=n(a);l(a,d=k(b.primary+"-container"),!0),a.appendChild(e),this.setContainer(d)}o(a,"display","inline-block"),c&&b.selected&&(c._oSelected=this)})).prototype;p(B,z),C.$click=function(b){v.$click.call(this,b);var c=this.getParent(),d=c.getBody().style,e=c._aPosition,f=c.$getLeftMostIndex();f=i(h(0,f+(c._uPrev==this?q(d.left)!=e[f]?0:-1:1)),e.length-1),d.left=h(e[f],c.getBodyWidth()-c.$$titleWidth-c._uNext.getWidth())+"px",a(c)},D.$cache=function(a,b){y.$cache.call(this,a,b),this.$$marginLeft=q(a.marginLeft),this.$$marginRight=q(a.marginRight)},D.$click=function(a){y.$click.call(this,a),this.getParent().setSelected(this)},D.$dispose=function(){this._eContainer=null,y.$dispose.call(this)},D.$setParent=function(a){var b=this._eContainer;y.$setParent.call(this,a),b&&(a?a.getMain().appendChild(b):m(b))},D.getContainer=function(){return this._eContainer},D.setContainer=function(a){var b=this.getParent();this._eContainer&&m(this._eContainer),(this._eContainer=a)&&("none"==(this._sContainer=a.style.display)&&(this._sContainer=""),b&&(b.getMain().appendChild(a),a.style.display=b._cSelected==this?this._sContainer:"none"))},B.$alterItems=function(){this._aPosition&&this.$setSize(this.getWidth());for(var a,b=0,c=this.getItems(),d=this._aPosition=[this._uPrev.getWidth()],e={$$marginRight:0};a=c[b++];e=a)d[b]=d[b-1]-h(e.$$marginRight,a.$$marginLeft)-a.getWidth()},B.$cache=function(a,b){z.$cache.call(this,a,b),this._uPrev.cache(!0,!0),this._uNext.cache(!0,!0),this.$$titleWidth=this.getBody().offsetWidth},B.$getLeftMostIndex=function(){for(var a=q(this.getBody().style.left),b=this._aPosition,c=b.length;c--;)if(a<=b[c])return c},B.$remove=function(a){if(this._cSelected==a){var b=this.getItems(),c=j(b,a);this.setSelected(c==b.length-1?c-1:c+1)}z.$remove.call(this,a)},B.$setSize=function(b,c){v.$setSize.call(this,b,c);var d=this._uPrev,e=this._uNext,f=this.getBody().style;b=this.getBodyWidth(),this.$$titleWidth>b?(b-=e.getWidth(),e.getOuter().style.left=b+"px",this._bButton?(b-=this.$$titleWidth,q(f.left)<b&&(f.left=b+"px")):(d.$show(),e.$show(),f.left=d.getWidth()+"px",this._bButton=!0),a(this)):this._bButton&&(d.$hide(),e.$hide(),f.left="0px",this._bButton=!1)},B.getSelected=function(){return this._cSelected},B.init=function(){this._uPrev.init(),this._uNext.init(),z.init.call(this);for(var a,b=0,c=this.getItems();a=c[b++];)a.$setSize(a.getWidth(),a.getHeight());this.setSelected(this._oSelected)},B.setSelected=function(b){var c,d=0,e=this.getItems(),f=this._uPrev,g=this.getBody().style,h=q(g.left);if("number"==typeof b&&(b=e[b]),this._cSelected!=b){for(;c=e[d++];)c._eContainer&&(c._eContainer.style.display=c==b?c._sContainer:"none");this._cSelected&&this._cSelected.alterClass("-selected"),b&&(b.alterClass("+selected"),c=this._aPosition[j(e,b)]-(f.isShow()?0:f.getWidth()),c>h?g.left=c+"px":(c-=b.getWidth()+f.getWidth()+this._uNext.getWidth()-this.getBodyWidth(),h>c&&(g.left=c+"px")),a(this)),this._cSelected=b,t(this,"change")}}}(),function(){var a=ecui,b=a.ui,c=a.dom,d=a.string,e=a.$fastCreate,f=a.inherits,g=a.triggerEvent,h=a.getOptions,i=c.children,j=c.create,k=d.trim,l=b.Control,m=b.PsTip,n=(l.prototype,b.Radio),o=n.prototype,p=b.QueryTab=f(l,"ui-query-tab",null,function(a,b){var c,d,f=i(a),g=this.getTypes()[0],j=b.value;for(this._aItems=[],c=0;d=f[c];c++)d.className=k(d.className)+" "+g+"-item"+n.TYPES,this._aItems[c]=e(this.Item,d,this,h(d)),j&&j==this._aItems[c].getValue()&&(this._aItems[c].setChecked(!0),this._oCurChecked=this._aItems[c])}),q=p.prototype,r=q.Item=f(n,"ui-query-tab-item",null,function(a,b){var c;b.tip&&(c=j("ui-tip","","span"),a.appendChild(c),this._uTip=e(m,c,this,{target:b.tip}))}),s=r.prototype;s.$click=function(){var a=this.getParent(),b=a._oCurChecked;o.$click.call(this),b&&b!=this&&(a._oCurChecked=this,g(this.getParent(),"change",null,[this.getValue()]))},s.getItems=function(){return this.getParent().getItems()},q.getItems=function(){return this._aItems.slice()},q.getValue=function(){return this._oCurChecked?this._oCurChecked.getValue():null},q.setValue=function(a){for(var b,c=0;b=this._aItems[c];c++)b.getValue()==a&&(b.setChecked(!0),this._oCurChecked=b)}}(),function(){function a(a){var b;return A[a]||(b=document.body.appendChild(l(w.TYPES)),b=i(w,{main:b,type:a}),b.cache(),b.init(),A[a]=b),A[a]}function b(a,b,c){return function(){"custom"!=b?EXT_EDITOR.edit(a,b,c):new Function("return "+c.handle).call(null).call(null,a,c)}}var c=ecui,d=c.dom,e=c.ui,f=c.string,g=c.ext,h=c.util,i=c.$create,j=c.$fastCreate,k=d.getPosition,l=(d.children,d.create),m=d.moveElements,n=f.trim,o=f.encodeHTML,p=f.decodeHTML,q=h.getView,r=c.inherits,s=c.triggerEvent,t=c.setFocused,u=e.Control,v=(u.prototype,e.Button),w=e.Editor=r(u,"ui-editor",null,function(a,b){var c=z[b.type];a.innerHTML=c.innerHTML+'<div class="ui-button ui-button-g">确定</div><div class="ui-button">取消</div><div style="display:none" class="ui-editor-tip"></div>';for(var d in c)"[object Function]"==Object.prototype.toString.call(c[d])&&("process"==d?c[d].call(this):this[d]=c[d]);a=a.lastChild,this._eTip=a,this._uCancelBtn=j(this.Button,a=a.previousSibling,this,{command:"cancel"}),this._uSubmitBtn=j(this.Button,a.previousSibling,this,{command:"submit",primary:"ui-button-g"})}),x=w.prototype,y=(x.Button=r(v,null,function(a,b){this._sCommand=b.command})).prototype,z={},A={};x.init=function(){this.$hide()},x.show=function(a){var b=k(a),c=q(),d=b.left,e=b.top;d+this.getWidth()>c.right&&(d=c.right-this.getWidth()),e+this.getHeight()>c.bottom&&(e=c.bottom-this.getHeight()),this.setPosition(d,e),this.focus()},x.$blur=function(){this.hide()},x.onhide=function(){this.setError("")},x.setError=function(a){a=n(a),this._eTip.innerHTML=a,this._eTip.style.display=""==a?"none":"",this.resize()},x.$resize=function(){var a=this._eMain,b=a.style;b.width=this._sWidth,b.height=this._sHeight,this.repaint()},y.$click=function(){var a=this.getParent(),b=a.getValue();a._oOptions;var c,d=a.getParent(),e=d.editCell,f=d.editField,g={},h=a.getText?a.getText():a.getValue();h=o(h),"cancel"==this._sCommand?a.hide():(c=s(d,"editsubmit",g,[b,f]),c!==!1&&("[object String]"==Object.prototype.toString.call(g.message)&&""!=g.message?a.setError(g.message):(g.value=void 0!==g.value?g.value:b,e.innerHTML=g.value,a.setError(""),a.hide())))},EXT_EDITOR=g.editor=function(){},EXT_EDITOR.register=function(a,b){z[a]=b},EXT_EDITOR.init=function(a,c,d){var e=l(),f=a.getTypes()[0],g=a.getBody();m(g,e,!0),g.innerHTML='<div class="'+f+'-editor"><div></div><div class="'+f+'-editor-button"></div></div>',g.firstChild.lastChild.onclick=b(a,c,d),m(e,g.firstChild.firstChild,!0),a.$setBody(g.firstChild.firstChild),e=null},EXT_EDITOR.edit=function(b,c,d){var e,f;e=d.getValue?"[object Function]"==Object.prototype.toString.call(d.getValue)?d.getValue.call(null,b,d):d.getValue:p(n(b.getContent())),f=a(c),f.show(b,e,d),t(f)},EXT_EDITOR.register("input",{innerHTML:'<input type="text" class="ui-editor-input" />',process:function(){this._eInput=this.getBody().firstChild},focus:function(){this._eInput.focus()},getValue:function(){return n(this._eInput.value)},setValue:function(a){this._eInput.value=a}}),EXT_EDITOR.register("customSelect",{innerHTML:'<select class="ui-editor-select"></select>',process:function(){this._eSelect=this.getBody().firstChild},focus:function(){this._eSelect.focus()},getValue:function(){return this._eSelect.options[this._eSelect.selectedIndex].value},getText:function(){return this._eSelect.options[this._eSelect.selectedIndex].text},setValue:function(a){for(var b,c=0;b=this._eSelect.options[c];c++)if(b.value==a||b.text==a){b.selected=!0;break}},setDatasource:function(a){for(var b,c,d,e=this._eSelect;e.options[0];)e.remove(0);for(b=0;c=a[b];b++){d=l("","","option"),d.text=c.text,d.value=c.value;try{e.add(d,null)}catch(f){e.add(d)}}}})}(),function(){var a=ecui,b=a.dom,c=a.ui,d=a.string,e=(a.ext,a.util),f=(a.$create,a.$fastCreate),g=b.children,h=b.getPosition,i=(b.create,b.moveElements,d.trim),j=(d.encodeHTML,d.decodeHTML,e.getView),k=a.inherits,l=a.triggerEvent,m=(a.setFocused,c.Control),n=m.prototype,o=c.Button,p=(o.prototype,c.Input),q=(p.prototype,c.Select),r=(q.prototype,c.Item);r.prototype;var s=c.TableEditor=k(m,"ui-table-editor",function(a,b){var c=null;c="url"!=b.type?'<div class="ui-'+b.type+'"></div>':['<div class="ui-select" style="width:62px">',"</div>",'<div class="ui-input" style="margin-left:1px"></div>','<div class="ui-input" style="width:60px;margin-left:1px"></div>'].join(""),a.innerHTML=c},function(a,b){function c(a,b){l(a,"change",null,[a.getInnerControl(),a.target&&a.target.getInnerControl(),b]),a.target&&c(a.target)}var d=this,e=g(a);if("input"==b.type?d._uInput=f(p,e[0],this,{}):"select"==b.type?d._uSelect=f(q,e[0],this,{}):"url"==b.type&&(d._uFront=f(q,e[0],this,{}),d._uFront.setSize(62,22),d._uRoot=f(p,e[1],this,{}),d._uRoot.setSize(100,22),d._uPath=f(p,e[2],this,{}),d._uPath.setSize(60,22)),"select"==b.type||"input"==b.type){var h=d._uInput||d._uSelect;h.onchange=function(){var a=d.rowData;c(d,a)}}else d._uFront.onchange=d._uRoot.onchange=d._uPath.onchange=function(){var a=d.rowData;l(d,"change",null,[d._uFront,d._uRoot,d._uPath,a])}});UI_TABLE_EDITOR_CLASS=s.prototype,UI_TABLE_EDITOR_CLASS.setValue=function(a){var b=this._uInput||this._uSelect;b.setValue(a)},UI_TABLE_EDITOR_CLASS.getValue=function(){var a=this._uInput||this._uSelect,b=null;if(a)b=a.getValue();else{var c={1:"www",2:"无前缀"},d=this._uFront.getValue();d=c[d];var e=this._uRoot.getValue(),f=this._uPath.getValue();b=d+e+f}return b},UI_TABLE_EDITOR_CLASS.getInnerControl=function(){var a=this,b=this._uInput||this._uSelect;return b||(b=[a._uFront,a._uRoot,a._uPath]),b},UI_TABLE_EDITOR_CLASS.show=function(a){var b=this,a=a||b.showCell,c=h(a),d=j(),e=c.left,f=c.top,g=this.getOuter(),i=this.rowData;if(n.show.call(this),this.resize(),e+this.getWidth()>d.right&&(e=d.right-this.getWidth()),f+this.getHeight()>d.bottom&&(f=d.bottom-this.getHeight()),this.setPosition(0,0),a.appendChild(this.getOuter()),g.style.width=a.offsetWidth-2+"px",g.style.height=a.offsetHeight-5+"px",this._uSelect)this._uSelect.setSize(a.offsetWidth-2,22);else if(this._uInput)this._uInput.setValue(""),this._uInput.getOuter().style.width=a.offsetWidth-2+"px";else{b._uFront.setSelectedIndex(0),b._uRoot.setValue(""),b._uPath.setValue("");var k=b._uFront.getOuter().offsetWidth,m=b._uRoot.getOuter().offsetWidth;b._uRoot.getOuter().style.width=a.offsetWidth-130+"px";var o=b._uPath.getOuter().offsetWidth;g.style.width=k+m+o+9+"px"}if(this.focus(),"[object Array]"!==Object.prototype.toString.call(this.getInnerControl()))l(this,"beforeedit",null,[this.getInnerControl(),i]);else{var p=this.getInnerControl();p.push(i),l(this,"beforeedit",null,p)}};var t=function(){var a=ecui.getFocused(),b=null;a instanceof r&&a.getParent()instanceof q&&(a=a.getParent()),a instanceof q&&a.getParent()instanceof s&&(a=a.getParent()),a instanceof s&&(b=a);var c=function(a){var d=!1;return a==b?d=!0:a.target&&(d=c(a.target)),d},d=function(a){var c=!1;return a==b?c=!0:a.parTarget&&(c=d(a.parTarget)),c},e=[],f=function(a){e.push(a),a.target&&baidu.array.indexOf(e,a.target)&&f(a.target)},g=function(a){e.push(a),a.parTarget&&baidu.array.indexOf(e,a.parTarget)&&g(a.parTarget)};b&&(c(this)||d(this))||(f(this),g(this),e=baidu.array.unique(e),baidu.each(e,function(a){a.hide()}))};UI_TABLE_EDITOR_CLASS.$blur=function(a){var b=this;setTimeout(function(){t.call(b,a)},1)},UI_TABLE_EDITOR_CLASS.onhide=function(a){var b=this,c=this.rowData;this.getParent();var d=this._uInput||this._uSelect,b=this,e=this.editCell;document.body.appendChild(b.getOuter());var a={message:""},f=null;f=d?l(this,"editsubmit",a,[d,c]):l(this,"editsubmit",a,[b._uFront,b._uRoot,b._uPath,c]),"[object String]"==Object.prototype.toString.call(a.message)&&""!=a.message?this.setError(a.message):d&&d==this._uInput?(a.value=void 0!==a.value?a.value:d.getValue(),e.innerHTML=a.value):d&&d==this._uSelect?e.innerHTML=d.getSelected()._eBody.innerText:(a.value=void 0!==a.value?a.value:b.getValue(),e.innerHTML=a.value)},UI_TABLE_EDITOR_CLASS.focus=function(){var b=this._uInput||this._uSelect;a.setFocused(this,b)},UI_TABLE_EDITOR_CLASS.setAttached=function(a,b){var c=baidu.dom.children(a)[1],d=this.getParent(),e=this._uSelect;d._sEditCell;var f=c.innerHTML;e.clear();var g=void 0;baidu.each(b,function(a){f==a.text&&(g=a.value),e.add(a.text,null,{value:a.value})}),e.setValue(g)},UI_TABLE_EDITOR_CLASS.setError=function(a){a=i(a);var b=this.getParent();b._sEditCell,a&&ecui.alert(a,function(){})}}(),function(){function a(a){var b,c,d=[];for(b=0;c=a[b];b++)d.push(j({},c));return d}function b(a,b){var c,d=[];a=j({},a),a=j(a,u);for(var e in a)c={handler:a[e]},e=e.split(/\s+/),e[0]==b&&(c.selector=e[1],d.push(c));return d}function c(a,b){var c,d,e,f=!0;return a||b?(b.replace(/^([^.#]*)([.#]?)(.*)$/,function(a,b,f,g){c=b,e=f,d=g}),c&&a.tagName.toLowerCase()!=c&&(f=!1),"."!=e||new RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)||(f=!1),"#"==e&&a.id!=d&&(f=!1),f):!1}function d(a,b,c){var d,e,f,g,h,i,j=[];for(d=0;e=b[d];d++){for(j.push('<tr class="'+c+'-row">'),f=0;g=a[f];f++)i=c+"-cell",g.align?i+=" "+c+"-cell-align-"+g.align:g.checkbox&&(i+=" "+c+"-cell-align-center"),j.push('<td class="'+i+'">'),g.checkbox?(j.push('<input type="checkbox" value="'+e[g.content]+'" class="'+c+'-checkbox"'),g.checkedField&&1==e[g.checkedField]&&j.push(' checked="checked"'),j.push(" />")):"function"==typeof g.content?j.push(g.content.call(null,e,d)):(h=e[g.content],h=h||0==h?m(h+""):"&nbsp;",j.push(h)),j.push("</td>");j.push("</tr>")}return j.join("")}var e,f=ecui,g=f.string,h=f.ui,i=f.util,g=f.string,j=i.extend,k=i.blank,l=i.attachEvent,m=g.encodeHTML,n=f.inherits,o=f.triggerEvent,p=h.Control,q=p.prototype,r=h.LiteTable=n(p,"ui-lite-table",function(a,b){b.resizable=!1},function(a,b){this._aData=[],this._aFields=[],this._eCheckboxAll=null,this._aCheckboxs=[],this._sEmptyText=b.emptyText||"暂无数据",this._bCheckedHighlight=b.checkedHighlight===!0}),s=r.prototype,t=["click","mouseup","mousedown"],u={"click th.ui-lite-table-hcell-sort":function(a,b){var c,d=this.getAttribute("data-field");c=this.className.indexOf("-sort-desc")>=0?"asc":this.className.indexOf("-sort-asc")>=0?"desc":this.getAttribute("data-orderby")||"desc",o(b,"sort",null,[d,c])},"click input.ui-lite-table-checkbox-all":function(a,b){b.$refreshCheckbox(this.checked)},"click input.ui-lite-table-checkbox":function(a,b){b.$refreshCheckbox()}};s.$setSize=k,s.init=function(){var a,b,c=this.getOuter(),d=this;for(q.init.call(this),a=0;b=t[a];a++)l(c,b,function(a){return function(b){var c=b||window.event;c.targetElement=c.target||c.srcElement,d.$fireEventHanlder(a,c)}}(b))},s.setData=function(b,c,d){this._aData=a(b),c&&(this._sSortby=c.sortby||"",this._sOrderby=c.orderby||""),!d&&this.render()},s.getData=function(){return a(this._aData)},s.getDataByField=function(a,b){var c,d;for(b=b||"id",c=0;d=this._aData[c];c++)if(d[b]==a)return j({},d);return null},s.setFields=function(b,c){this._aFields=a(b),!c&&this.render()},s.getSelection=function(){var a,b,c=[];for(a=0;b=this._aCheckboxs[a];a++)b.checked&&c.push(b.value);return c},s.render=function(){var a,b,c,e=this.getTypes()[0],f=['<table cellpadding="0" cellspacing="0" width="100%" class="'+e+'-table">'],g=this._aFields,h=this._aData;if(g&&!(g.length<=0)){for(f.push('<tr class="'+e+'-head">'),a=0;b=g[a];a++)c=e+"-hcell",b.checkbox?(c+=" "+e+"-hcell-checkbox",f.push('<th class="'+c+'"><input type="checkbox" class="'+e+'-checkbox-all" /></th>')):(f.push("<th"),b.width&&f.push(' width="'+b.width+'"'),b.sortable&&(c+=" "+e+"-hcell-sort",b.field&&b.field==this._sSortby&&(c+=" "+e+"-hcell-sort-"+this._sOrderby),f.push(' data-field="'+b.field+'"'),b.orderby&&f.push(' data-orderby="'+b.orderby+'"')),f.push(' class="'+c+'">'+b.title+"</th>"));f.push("</tr>"),!h||h.length<=0?f.push('<tr class="'+e+'-row"><td colspan="'+g.length+'" class="'+e+'-cell-empty">'+this._sEmptyText+"</td></tr>"):f.push(d(g,h,e)),f.push("</table>"),this.setContent(f.join("")),this.$bindCheckbox(),this._eCheckboxAll&&this.$refreshCheckbox()}},s.$bindCheckbox=function(){var a,b,c=this.getBody().getElementsByTagName("input"),d=this.getTypes()[0];for(this._aCheckboxs=[],this._eCheckboxAll=null,a=0;b=c[a];a++)"checkbox"==b.type&&b.className.indexOf(d+"-checkbox-all")>=0?this._eCheckboxAll=b:"checkbox"==b.type&&b.className.indexOf(d+"-checkbox")>=0&&this._aCheckboxs.push(b)},s.$refreshCheckbox=function(a){var b,c,d,f=!0;for(b=0;c=this._aCheckboxs[b];b++)d=c.parentNode.parentNode,a!==e?c.checked=a:f=c.checked&&f,c.checked&&this._bCheckedHighlight?d.className+=" highlight":this._bCheckedHighlight&&(d.className=d.className.replace(/\s+highlight/g,""));this._eCheckboxAll.checked=a!==e?a:f},s.$fireEventHanlder=function(a,d){var e,f,g=b(this.events,a),h=d.targetElement;for(e=0;f=g[e];e++)c(h,f.selector)&&f.handler.call(h,d,this)},s.$dispose=function(){this._aCheckboxs=[],this._eCheckboxAll=null,q.$dispose.call(this)}}(),function(){function a(){return this.getControl=null,b(this)}function b(a){var b=y(a).getControl(),c=b.getParent();return G(c.Cell,a,b,D({},c._aHCells[s(b._aElements,a)]._oOptions))}function c(a){for(var b,c,d=0,e=a.getParent()._aHCells;c=e[d];)if((b=a._aElements[d++])&&b!=c.getMain()){for(c=c.getWidth()-c.getMinimumWidth();null===a._aElements[d];)c+=e[d++].getWidth();b.style.width=c+"px"}}function d(a){var b=1,c=this.getParent()[this instanceof P?"_aRows":"_aHCells"],d=c.length,e=this.getValue();if(a=p(o(0,a),this.getTotal()),a!=e){if(a>e){if(1==d)return O.setValue.call(this,this.getTotal()),void 0;for(;;b++)if(a<=c[b].$$pos){e<c[b-1].$$pos&&b--;break}}else for(b=d;b--;)if(a>=c[b].$$pos){d-1>b&&e>c[b+1].$$pos&&b++;break}O.setValue.call(this,c[b].$$pos)}}var e,f=ecui,g=f.array,h=f.dom,i=f.string,j=f.ui,k=f.util,l=document,m=Math,n=RegExp,o=m.max,p=m.min,q=navigator.userAgent,r=/msie (\d+\.\d)/i.test(q)?l.documentMode||n.$1-0:e,s=g.indexOf,t=h.children,u=h.create,v=h.first,w=h.getPosition,x=h.getAttribute,y=h.getParent,z=h.insertBefore,A=(h.insertHTML,h.next),B=h.remove,C=i.trim,D=k.extend,E=k.toNumber,F=k.getView,G=f.$fastCreate,H=f.dispose,I=f.getOptions,J=f.inherits,K=f.triggerEvent,L=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],M=j.Control,N=M.prototype,O=j.Scrollbar.prototype,P=j.VScrollbar,Q=j.Panel,R=Q.prototype,S=j.Table=J(Q,"ui-table",function(a,b){var c,d;if(this.getType(),b.wheelDelta=1,"TABLE"==a.tagName){var e=a;z(a=u(e.className),e).appendChild(e),b.width&&(a.style.width=b.width),b.height&&(a.style.height=b.height),e.className=""}return d=a.getElementsByTagName("TABLE")[0],c=t(d),d.setAttribute("cellSpacing","0"),"THEAD"!=c[0].tagName&&z(u("","","thead"),c[0]).appendChild(t(c[0])[0]),a},function(a){var b=0,c=this.getType(),f=this._aRows=[],g=this._aHCells=[],h=[],i=a.getElementsByTagName("TABLE")[0],j=t(i),k=j[0],l=1;for(i=t(j[0]),l=i.length,j=i.concat(t(j[1])),(i=this.$getSection("VScrollbar"))&&(i.setValue=d),(i=this.$getSection("HScrollbar"))&&(i.setValue=d),i=u(c+"-head"+M.TYPES,"position:absolute;top:0px;overflow:hidden"),i.innerHTML='<div style="white-space:nowrap;position:absolute"><table cellspacing="0"><tbody></tbody></table></div>',(this._uHead=G(M,this.getMain().appendChild(i),this)).$setBody(k);i=j[b];b++)i.className=C(i.className)+this.Row.TYPES,j[b]=v(i),h[b]=1,(f[b]=G(this.Row,i,this))._aElements=[];for(k=0;;k++)for(b=0;i=f[b];b++)if(!(h[b]-->1))if(a=j[b]){if(i._aElements[k]===e){i._aElements[k]=a,j[b]=A(a);for(var m=+x(a,"rowSpan")||1,n=h[b]=+x(a,"colSpan")||1;m--;)for(m||n--,i=n;i--;)f[b+m]._aElements.push(m?!1:null)}}else{if(i._aElements[k]===!1)continue;for(k=0;;k++)for(c={},b=0;i=f[b];b++){if(a=i._aElements[k],a===e)return this._aHeadRows=this._aRows.splice(0,l),void 0;a&&(l>b?(D(c,I(a)),a.className=C(a.className)+this.HCell.TYPES,g[k]=G(this.HCell,a,this),g[k]._oOptions=D({},c)):(a.className=(C(a.className)||c.primary||"")+this.Cell.TYPES,a.getControl=X()))}}}),T=S.prototype,U=(T.Row=J(M,"ui-table-row")).prototype,V=(T.HCell=J(M,"ui-table-hcell")).prototype,W=(T.Cell=J(M,"ui-table-cell",function(a,b){b.resizable=!1})).prototype,X=8==r?function(){var a;return function(){return a=a||b(this)}}:function(){return a};U.$dispose=function(){this._aElements=null,N.$dispose.call(this)},U.$getElements=function(){return this._aElements.slice()},U.$hide=function(){for(var a,b,c,d=0,f=this.getParent(),g=s(f._aRows,this),h=f._aRows[g+1];f._aHCells[d];d++)if(c=this._aElements[d],c===!1)c=f.$getElement(g-1,d),b!=c&&(c.setAttribute("rowSpan",+x(c,"rowSpan")-1),b=c);else if(c&&(a=+x(c,"rowSpan"))>1){for(c.setAttribute("rowSpan",a-1),a=d+1;b=h._aElements[a++],!b&&b!==e;);c.getControl().$setParent(h),h.getBody().insertBefore(c,b||null)}N.$hide.call(this),f.repaint()},U.$show=function(){for(var a,b,c,d=0,f=this.getParent(),g=s(f._aRows,this),h=f._aRows[g+1];f._aHCells[d];d++)if(c=this._aElements[d],c===!1)c=f.$getElement(g-1,d),b!=c&&(c.setAttribute("rowSpan",+x(c,"rowSpan")+1),b=c);else if(c&&h&&h._aElements[d]===!1){for(c.setAttribute("rowSpan",+x(c,"rowSpan")+1),a=d+1;b=this._aElements[a++],!b&&b!==e;);c.getControl().$setParent(this),this.getBody().insertBefore(c,b||null)}N.$show.call(this),f.resize()},U.getCell=function(a){return this._aElements[a]?this._aElements[a].getControl():null},U.getCells=function(){for(var a=this._aElements.length,b=[];a--;)b[a]=this.getCell(a);return b},U.setSize=function(a,b){for(var c=this._aElements.length,d=this.getHeight();c--;)this._aElements[c]&&this._aElements[c].getControl().$setSize(null,b);this.getParent()[b>d?"resize":"repaint"]()},V.$hide=function(){this.$setStyles("display","none",-this.getWidth())},V.$setStyles=function(a,b,c){var d,e=0,f=this.getParent(),g=f._aHeadRows.concat(f._aRows),h=this.getBody(),i=f._aHCells,j=s(i,this),k=y(y(y(h))).style;for(h.style[a]=b,c&&(k.width=v(f.getBody()).style.width=E(k.width)+c+"px");k=g[e++];)if(h=k._aElements,k=h[j],k&&(k.style[a]=b),c&&k!==!1){for(d=j;!(k=h[d]);d--);var l=-i[d].getMinimumWidth(),m=0;do i[d].getOuter().style.display||(l+=i[d].getWidth(),m++);while(null===h[++d]);l>0?(k.style.display="",k.style.width=l+"px",k.setAttribute("colSpan",m)):k.style.display="none"}c>0?f.resize():f.repaint()},V.$show=function(){this.$setStyles("display","",this.getWidth())},V.getCell=function(a){return this.getParent().getCell(a,s(this._aHCells,this))},V.getCells=function(){for(var a,b=0,c=s(this.getParent()._aHCells,this),d=[];a=this.getParent()._aRows[b];)d[b++]=a.getCell(c);return d},V.setSize=function(a){var b=this.getWidth();this.$setSize(a),this.$setStyles("width",a-this.$getBasicWidth()+"px",a-b)},W.getHeight=function(){return this.getOuter().offsetHeight},W.getWidth=function(){return this.getOuter().offsetWidth},T.$cache=function(a,b){R.$cache.call(this,a,b),this._uHead.cache(!1,!0),this.$$paddingTop=this._uHead.getBody().offsetHeight;for(var c=0,d=0;a=this._aRows[c++];)a.$$pos=d,a.cache(!0,!0),a.getOuter().style.display||(d+=a.getHeight());for(c=0,d=0;a=this._aHCells[c++];)a.$$pos=d,a.cache(!0,!0),a.getOuter().style.display||(d+=a.getWidth());this.$$mainWidth=d},T.$getElement=function(a,b){var c=this._aRows,d=c[a]&&c[a]._aElements,f=d&&d[b];if(f===e)f=null;else if(!f){for(;f===!1;f=(d=c[--a]._aElements)[b]);for(;!f;f=d[--b]);}return f},T.$pagescroll=function(){R.$pagescroll.call(this),this._uVScrollbar||(this._uHead.getOuter().style.top=o(F().top-w(this.getOuter()).top,0)+"px")},T.$scroll=function(){R.$scroll.call(this),this._uHead.getMain().lastChild.style.left=this.getBody().style.left},T.$setSize=function(a,b){var c,d=this.getBody(),e=this.$getSection("VScrollbar"),f=this.$getSection("HScrollbar"),g=this.$$mainWidth,h=this.$$mainHeight,i=e&&e.getWidth(),j=f&&f.getHeight(),k=this.$getBasicWidth(),l=this.$getBasicHeight(),m=g+k,n=h+l,o=a-k,q=b-l;this.getMain().style.paddingTop=this.$$paddingTop+"px",v(d).style.width=this._uHead.getMain().lastChild.lastChild.style.width=g+"px",o>=g&&q>=h?(a=m,b=n):e&&f&&g>o-i&&h>q-j||(c=m+(!e||q>=h?0:i),a=f?p(a,c):c,c=n+(!f||o>=g?0:j),b=e?p(b,c):c),R.$setSize.call(this,a,b),this._uHead.$setSize(E(y(d).style.width),this.$$paddingTop)},T.addColumn=function(a,b){var c,d,f=0,g=this._aHeadRows.length,h=this._aHeadRows.concat(this._aRows),i=a.primary||"",j=u(i+this.HCell.TYPES,"","td"),k=G(this.HCell,j,this);for(j.innerHTML=a.title||"",i+=this.Cell.TYPES;c=h[f];f++)if(d=c._aElements[b],null!==d){for(m=b;!d&&(d=c._aElements[++m],d!==e););g>f?(c._aElements.splice(b,0,c.getBody().insertBefore(j,d)),j.setAttribute("rowSpan",g-f),this._aHCells.splice(b,0,k),f=g-1):(c._aElements.splice(b,0,d=c.getBody().insertBefore(u(i,"","td"),d)),d.getControl=X())}else{var l=this.$getElement(f-g,b),m=+x(l,"rowspan")||1;for(l.setAttribute("colSpan",+x(l,"colSpan")+1),c._aElements.splice(b,0,d);--m;)h[++f]._aElements.splice(b,0,!1)}return k.cache(),k.$setSize(a.width),k.$setStyles("width",j.style.width,a.width),k._oOptions=D({},a),k},T.addRow=function(a,b){var c,d=0,e=1,f=this.getBody().lastChild.lastChild,g=u(),h=['<table><tbody><tr class="'+this.Row.TYPES+'">'],i=[],j=this._aRows[b];for(j||(b=this._aRows.length);c=this._aHCells[d];)if(j&&j._aElements[d]===!1||a[d]===!1)i[d++]=!1;else{i[d]=!0,h[e++]='<td class="'+this.Cell.TYPES+'" style="';for(var k=d,l=c.isShow()?1:0,m=c.getWidth()-c.getMinimumWidth();(c=this._aHCells[++d])&&null===a[d];)i[d]=null,c.isShow()&&(l++,m+=c.getWidth());i[k]=!0,h[e++]=(l?"width:"+m+'px" colSpan="'+l:"display:none")+'">'+(a[k]||"")+"</td>"}for(h[e]="</tr></tbody></table>",g.innerHTML=h.join(""),g=g.lastChild.lastChild.lastChild,f.insertBefore(g,j?j.getOuter():null),j=G(this.Row,g,this),this._aRows.splice(b--,0,j),d=0,g=g.firstChild,c=null;this._aHCells[d];d++)(k=i[d])?(i[d]=g,g.getControl=X(),g=g.nextSibling):k===!1&&(k=this.$getElement(b,d),k!=c&&(k.setAttribute("rowSpan",(+x(k,"rowSpan")||1)+1),c=k));return j._aElements=i,this.resize(),j},T.getCell=function(a,b){return a=this._aRows[a],a&&a.getCell(b)||null},T.getColumnCount=function(){return this._aHCells.length},T.getHCell=function(a){return this._aHCells[a]||null},T.getHCells=function(){return this._aHCells.slice()},T.getRow=function(a){return this._aRows[a]||null},T.getRowCount=function(){return this._aRows.length},T.getRows=function(){return this._aRows.slice()},T.init=function(){z(this._uHead.getBody(),this._uHead.getMain().lastChild.lastChild.firstChild),this.$$mainHeight-=this.$$paddingTop,R.init.call(this);for(var a,b=0;a=this._aHCells[b++];)a.$setSize(a.getWidth());for(b=0;a=this._aHeadRows[b++];)c(a);for(b=0;a=this._aRows[b++];)c(a)},T.removeColumn=function(a){var b=0,c=this._aHCells,d=c[a];if(d)for(d.hide(),B(d.getOuter()),H(d),c.splice(a,1);d=this._aRows[b++];){if(c=d._aElements,d=c[a]){if(null===c[a+1]){c.splice(a+1,1);continue}B(d),d.getControl!=X()&&H(d.getControl())}c.splice(a,1)}},T.removeRow=function(a){var b,c=0,d=this._aRows[a],e=this._aRows[a+1],f=d.getBody();if(d){for(d.hide();this._aHCells[c];c++)if((b=d._aElements[c])&&y(b)!=f){for(e._aElements[c]=b;null===d._aElements[++c];)e._aElements[c]=null;c--}B(d.getOuter()),H(d),this._aRows.splice(a,1),this.repaint()}},function(){function a(a){var b=a.replace("mouse","");a="$"+a,U[a]=function(c){N[a].call(this,c),K(this.getParent(),"row"+b,c)},W[a]=function(c){N[a].call(this,c),K(this.getParent().getParent(),"cell"+b,c)}}for(var b=0;7>b;)a(L[b++])}()}(),function(){function a(a,b){return w(a,b),b._eFill=a.lastChild,b}function b(a){for(var b,c=0,d=a.getParent(),e=d.getHCells(),f=a.$getElements(),g=a.getBody(),h=p(a._eFill),i=h.firstChild;e[c];)c==d._nLeft&&(i=g.firstChild),(b=f[c++])&&(i!=b?(c<=d._nLeft||c>d._nRight?h:g).insertBefore(b,i):i=i.nextSibling),c==d._nRight&&(i=a._eFill.nextSibling)}function c(a){for(var c,d=0;c=a._aLockedHeadRow[d++];)b(c);for(var c,d=0;c=a._aLockedRow[d++];)b(c)}var d=ecui,e=d.array,f=d.dom,g=d.ui,h=d.util,i=Math,j=i.max,k=RegExp,l=navigator.userAgent,m=e.indexOf,n=f.children,o=f.create,p=f.getParent,q=f.getAttribute,r=f.insertBefore,s=f.remove,t=(h.blank,h.toNumber),u=d.$fastCreate,v=d.dispose,w=d.$bind,x=d.inherits,y=/firefox\/(\d+\.\d)/i.test(l)?k.$1-0:void 0;eventNames=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],UI_CONTROL=g.Control,UI_CONTROL_CLASS=UI_CONTROL.prototype,UI_TABLE=g.Table,UI_TABLE_CLASS=UI_TABLE.prototype,UI_TABLE_ROW=UI_TABLE_CLASS.Row,UI_TABLE_ROW_CLASS=UI_TABLE_ROW.prototype;
var z=g.LockedTable=x(UI_TABLE,"*locked-table",null,function(b,c){var d,e=0,f=this.getType(),g=this._aHeadRows,h=g.concat(this._aRows),i=o("","position:absolute;top:0px;left:0px;overflow:hidden"),j=[],k=this._aLockedRow=[],l=this._aLockedHeadRow=[];for(this._nLeft=c.leftLock||0,this._nRight=this.getColumnCount()-(c.rightLock||0);b=h[e];)b=b.getMain(),j[e++]='<tr class="'+b.className+'" style="'+b.style.cssText+'"><td style="padding:0px;border:0px"></td></tr>';for(i.innerHTML='<div class="'+f+'-locked-head" style="position:absolute;top:0px;left:0px"><div style="white-space:nowrap;position:absolute"><table cellspacing="0"><thead>'+j.splice(0,g.length).join("")+'</thead></table></div></div><div class="'+f+'-locked-layout" style="position:absolute;left:0px;overflow:hidden"><div style="white-space:nowrap;position:absolute;top:0px;left:0px"><table cellspacing="0"><tbody>'+j.join("")+"</tbody></table></div></div>",d=this._uLockedHead=u(UI_CONTROL,i.firstChild,this),d.$setBody(b=d.getMain().lastChild.lastChild.firstChild),e=0,j=n(b);d=j[e];)l[e]=a(d,g[e++]);for(d=this._uLockedMain=u(UI_CONTROL,b=i.lastChild,this),d.$setBody(b=b.lastChild),e=0,j=n(b.lastChild.lastChild);d=j[e];)k[e]=a(d,this._aRows[e++]);r(i.firstChild,this._uHead.getOuter()),r(i.firstChild,p(this.getBody()))});UI_LOCKED_TABLE_CLASS=z.prototype,UI_LOCKED_TABLE_ROW_CLASS=(UI_LOCKED_TABLE_CLASS.Row=x(UI_TABLE_CLASS.Row)).prototype,UI_LOCKED_TABLE_ROW_CLASS.$dispose=function(){this._eFill=null,UI_TABLE_ROW_CLASS.$dispose.call(this)},UI_LOCKED_TABLE_CLASS.$cache=function(a,b){UI_TABLE_CLASS.$cache.call(this,a,b);var c=0,d=this.getRows(),e=this.getHCells(),f=e[this._nLeft].$$pos;for(this.$$paddingTop=j(this.$$paddingTop,this._uLockedHead.getBody().offsetHeight),this.$$mainWidth-=(this.$$paddingLeft=f)+(this.$$paddingRight=this._nRight<e.length?this.$$mainWidth-e[this._nRight].$$pos:0);a=e[c++];)a.$$pos-=f;for(c=0,f=0;a=d[c++];)a.getCell(this._nLeft).cache(!1,!0),a.$$pos=f,f+=j(a.getHeight(),a._eFill.offsetHeight);f&&(this.$$mainHeight=f,this._bCreated||(this.$$mainHeight+=this.$$paddingTop)),this._uLockedHead.cache(!1,!0),this._uLockedMain.cache(!1,!0)},UI_LOCKED_TABLE_CLASS.$pagescroll=function(){UI_TABLE_CLASS.$pagescroll.call(this),this._uVScrollbar||(this._uLockedHead.getOuter().style.top=this._uHead.getOuter().style.top)},UI_LOCKED_TABLE_CLASS.$resize=function(){var a=this.getMain().style;a.paddingLeft=a.paddingRight="",this.$$paddingLeft=this.$$paddingRight=0,UI_TABLE_CLASS.$resize.call(this)},UI_LOCKED_TABLE_CLASS.$scroll=function(){UI_TABLE_CLASS.$scroll.call(this),this._uLockedMain.getBody().style.top=this.getBody().style.top},UI_LOCKED_TABLE_CLASS.$setSize=function(a,b){var c=this.getMain().style,d=0,e=p(this.getBody()),f=this._uLockedHead,g=(this._uLockedMain,p(p(f.getBody())).style);c.paddingLeft=this.$$paddingLeft+"px",c.paddingRight=this.$$paddingRight+"px",UI_TABLE_CLASS.$setSize.call(this,a,b),c=this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight,f.$setSize(c,this.$$paddingTop),g.height=this.$$paddingTop+"px",this._uLockedMain.$setSize(c,t(e.style.height)),g.width=this._uLockedMain.getBody().lastChild.style.width=c+"px",this._uLockedMain.getOuter().style.top=this.$$paddingTop+"px",a=e.style.width;var h,i=this._aLockedHeadRow;for(b=this.$$paddingTop/i.length,d=0;c=i[d];d++)c._eFill.style.width=a,c._eFill.style.height=b+"px",c=c.getCell(this._nLeft),c&&(h=y?0:c.$getBasicHeight&&c.$getBasicHeight()||60,y&&y>15&&(h=c.$getBasicHeight()),c=c.getOuter(),g=q(c,"rowSpan")||0,g&&(g=parseInt(g,10)),c.style.height=j(g*b-h,0)+"px");for(i=this._aLockedRow,d=0;c=i[d];d++)c._eFill.style.width=a,g=j(b=c.getCell(this._nLeft).getOuter().offsetHeight,c._eFill.offsetHeight),g>c._eFill.offsetHeight?c._eFill.style.height=g+"px":g>b&&(h=y?0:c.getCell(this._nLeft).$getBasicHeight(),y&&y>15&&(h=c.getCell(this._nLeft).$getBasicHeight()),c.getCell(this._nLeft).getOuter().style.height=j(g-h,0)+"px")},UI_LOCKED_TABLE_CLASS.addColumn=function(a,b){return b>=0&&(b<this._nLeft&&this._nLeft++,b<this._nRight&&this._nRight++),UI_TABLE_CLASS.addColumn.call(this,a,b)},UI_LOCKED_TABLE_CLASS.removeRow=function(a){var b,c=this._aRows[a],d=c._eFill.parentNode;c&&(c.hide(),b=c.getOuter(),v(c),s(b,!0),s(d,!0),this._aRows.splice(a,1),this._aLockedRow.splice(a,1),this.repaint())},UI_LOCKED_TABLE_CLASS.addRow=function(c,d){var e=UI_TABLE_CLASS.addRow.call(this,c,d),d=m(this.getRows(),e),f=this._aLockedRow[d],g=e.getMain(),h=o();return h.innerHTML='<table cellspacing="0"><tbody><tr class="'+g.className+'" style="'+g.style.cssText+'"><td style="padding:0px;border:0px"></td></tr></tbody></table>',h=a(g=h.lastChild.lastChild.lastChild,e),f=f?f._eFill.parentNode:null,this._uLockedMain.getBody().lastChild.lastChild.insertBefore(g,f),this._aLockedRow.splice(d,0,h),b(h),this.repaint(),e},UI_LOCKED_TABLE_CLASS.init=function(){c(this),UI_TABLE_CLASS.init.call(this)},UI_LOCKED_TABLE_CLASS.removeColumn=function(a){UI_TABLE_CLASS.removeColumn.call(this,a),a>=0&&(a<this._nLeft&&this._nLeft--,a<this._nRight&&this._nRight--)},function(){function a(a){UI_LOCKED_TABLE_ROW_CLASS[a]=function(b){UI_CONTROL_CLASS[a].call(this,b),p(this._eFill).className=this.getMain().className}}for(var b=0;11>b;)a("$"+eventNames[b++])}()}(),function(){function a(a,b,c){var d=b.getTypes()[0],e=[];e.push("<tr>");var f=0,g=0;for(g=0;g<a.length;g++){var h=a[g];if(e.push("<th "),e.push('data-field="'),"[object String]"==Object.prototype.toString.call(h.field)&&e.push(h.field),h.width&&e.push('" style="width:'+h.width+"px;"+"min-width:"+h.width+"px;"+"max-width:"+h.width+"px;"),h.editable&&h.field&&(b.editors[h.field]=b.editors[h.field]||{}),h.rowspan&&e.push('" rowspan="'+h.rowspan),h.colspan){e.push('" colspan="'+h.colspan);var i,j=0;for(i=f;i<f+h.colspan;i++)j+=c[1][i].width;e.push('" width="'+j),f+=h.colspan}h.sortable&&(e.push('" class="'+d+"-hcell-sort"),h.field&&h.field==b._sSortby&&e.push(" "+d+"-hcell-sort-"+b._sOrderby),h.order&&e.push('" data-orderby="'+h.order.toLowerCase())),e.push('">'),h.name&&e.push(h.name),h.checkbox&&e.push('<input type="checkbox" class="'+d+'-checkbox-all"'+" />"),h.tip&&h.tip.length&&(e.push('<span ecui="type:tip; id:tip-'),e.push(h.field),e.push("; message:"),e.push(h.tip),e.push('"></span>')),e.push("</th>")}return e.push("</tr>"),e.join("")}function b(a,b){var c=0;for(c=0;c<b.length;c++)for(var d=b[c],e=0;e<a.length;e++){var f=a[e];if(f.detail){var g="tip-"+d[f.idField];ecui.get(g)&&(ecui.get(g).onloadData=function(a,b){return function(c){b.loadData(a,c)}}(d,f))}}}function c(a){var b;b=a._eBrowser?a._eBrowser:a._uHScrollbar.getOuter(),b.style.top=D(x().bottom-v(a.getOuter()).top-b.offsetHeight,a.getHeight()-b.offsetHeight)+"px",t(b,"zIndex",1)}function d(a,b){var c,d=[];a=y({},a),a=y(a,N);for(var e in a)c={handler:a[e]},e=e.split(/\s+/),e[0]==b&&(c.selector=e[1],d.push(c));return d}function e(a,b){var c,d,e,f=!0;return a||b?(b.replace(/^([^.#]*)([.#]?)(.*)$/,function(a,b,f,g){c=b,e=f,d=g}),c&&a.tagName.toLowerCase()!=c&&(f=!1),"."!=e||new RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)||(f=!1),"#"==e&&a.id!=d&&(f=!1),f):!1}function f(a){for(var b,c=[],d=0;b=a[d++];)c.push(y({},b));return c}var g=ecui,h=g.dom,i=g.array,j=g.ui,k=(g.string,g.util),l=g.$fastCreate,m=g.inherits,n=g.triggerEvent,o=g.dispose,p=g.$dispose,q=h.create,r=(h.first,h.last,h.children),s=h.addClass,t=h.setStyle,u=(h.setText,h.getText,h.removeClass,h.getParent,h.moveElements,h.getAttribute),v=h.getPosition,w=baidu.string.encodeHTML,x=(i.remove,k.getView),y=k.extend,z=g.repaint,A=k.attachEvent,B=k.detachEvent,C=(/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0,Math),D=C.min,E=window,F=j.Control,G=(F.prototype,j.Table),H=(G.prototype,j.LockedTable),I=H.prototype,J=j.TableEditor;J.prototype;var K=j.CustomTable=m(H,"ui-table",function(b,c){this._oOptions=c,this._aHeader=c.header,this._sSortby=c.sortby,this._sOrderby=c.orderby,this.editors={},c.datasource||(this._nLeftLock=c.leftLock||0,this._nRightLock=c.rightLock||0);var d=this.getTypes()[0],e=[];e.push("<table><thead>"),c.leftLock=c.leftLock||0,c.rightLock=c.rightLock||0;var g=c.leftLock+c.rightLock;if(c.datasource?(t(b,"width","auto"),t(b,"display","block")):t(b,"width","100%"),c.datasource)if("[object Array]"==Object.prototype.toString.call(c.fields[0])){var h,i=0;for(h=0;h<c.fields.length;h++){var j=c.fields[h];e.push(a(j,this,c.fields))}this._aColumns=[];for(var j,h=0;j=c.fields[0][h];h++)if(j.colspan)for(var k=0;k<j.colspan;k++)this._aColumns.push(y({},c.fields[1][i++]));else this._aColumns.push(y({},j))}else e.push(a(c.fields,this)),this._aColumns=f(c.fields);else{e.push("<tr>");for(var h,h=0;g>=h;h++)e.push("<th></th>");e.push("</tr>")}if(e.push("</thead><tbody>"),c.datasource)if(this._aData=c.datasource,this._aData.length){var h;for(h=0;h<c.datasource.length;h++){var l=c.datasource[h];e.push("<tr>");var k;for(k=0;k<this._aColumns.length;k++){var j=this._aColumns[k];e.push("<td"),j.checkbox&&(j.width=16),e.push(' width="'+j.width+'"'),e.push(' style="width:'+j.width+"px;"+"min-width:"+j.width+"px;"+"max-width:"+j.width+'px;"'),e.push(' class="'),c.autoEllipsis&&e.push(d+"-cell-ellipsis "),j.editable&&e.push(d+"-cell-editable "),j.align&&e.push(d+"-cell-align-"+j.align+" "),e.push('"'),j.editable&&j.field&&e.push(' edit-field="'+j.field+'"')&&e.push(' edit-type="'+j.editType+'"')&&j.target&&e.push(' edit-target="'+j.target+'"'),j.align&&e.push(' align="'+j.align+'"'),e.push(">"),j.editable&&(e.push('<div class="'+d+'-cell-editor-container">'),e.push('<span class="'+d+'-cell-editor-button"></span>'));var m=j.content||j.field;if("function"==typeof m)if(j.checkbox)e.push('<input type="checkbox"'),e.push(' class="'+d+'-checkbox"'),e.push(' data-rownum="'+h+'"'),e.push(" />");else{var n=m.call(null,l,h);if("[object String]"==Object.prototype.toString.call(n))c.autoEllipsis?e.push('<div style="overflow:hidden; text-overflow:ellipsis;width:'+j.width+"px;"+"max-width:"+j.width+"px;"+"min-width:"+j.width+"px;"+'" title="'+n+'">'+n+"</div>"):j.maxlength&&n&&n.length>j.maxlength?(e.push('<span class="'),e.push(d+'-cell-limited"'),e.push(' title="'+n+'">'),e.push(w(n.substring(0,j.maxlength))),e.push("..."),e.push("</span>")):j.editable?(e.push("<div>"+n+"</div>"),e.push("</div>")):e.push(n);else{var o=q();o.appendChild(n),e.push(o.innerHTML)}}else j.detail&&(e.push('<span style="margin-left:3px;margin-top:7px;float:right" ecui="type:tip;asyn:true;id:'),e.push("tip-"+l[j.idField]+'"'),e.push("></span>")),j.checkbox?(e.push('<input type="checkbox"'),e.push(' class="'+d+'-checkbox"'),e.push(' data-rownum="'+h+'"'),e.push(" />")):j.score?(e.push('<span ecui="type:score; static:true; max:'),e.push(j.max+"; value:"+l[m]),e.push('"></span>')):c.autoEllipsis?e.push('<div style="overflow:hidden; text-overflow:ellipsis;width:'+j.width+"px;"+"max-width:"+j.width+"px;"+"min-width:"+j.width+"px;"+'" title="'+w(l[m])+'">'+w(l[m])+"</div>"):j.maxlength&&l[m]&&l[m].length>j.maxlength?(e.push('<span class="'),e.push(d+'-cell-limited"'),e.push(' title="'+w(l[m])+'">'),e.push(w(l[m].substring(0,j.maxlength))),e.push("..."),e.push("</span>")):j.editable?(l[m]=l[m]||"",e.push("<div>"+w(l[m])+"</div>"),e.push("</div>")):(l[m]=l[m]||"",e.push(w(l[m])));e.push("</td>")}e.push("</tr>")}}else e.push("<tr>"),e.push('<td class="'+d+"-empty-cell"+'" align="left" colspan="'+this._aColumns.length+'">'),e.push(c.errorMsg?c.errorMsg:"暂无数据，请稍后再试"),e.push("</td>"),e.push("</tr>");else{e.push("<tr>");var h;e.push("<td></td>"),e.push("</tr>"),c.leftLock=0,c.rightLock=0}return e.push("</tbody></table>"),b.innerHTML=e.join(""),b},function(a,c){return ecui.init(a),c.fields&&c.datasource&&b(c.fields,c.datasource),this.$bindCheckbox(),a}),L=K.prototype,M=["click","mouseup","mousedown"],N={"click th.ui-table-hcell-sort":function(a,b){var c,d=this.getAttribute("data-field");c=this.className.indexOf("-sort-desc")>=0?"asc":this.className.indexOf("-sort-asc")>=0?"desc":this.getAttribute("data-orderby")||"desc",n(b,"sort",null,[d,c])},"click input.ui-table-checkbox-all":function(a,b){b.$refreshCheckbox(this.checked)},"click input.ui-table-checkbox":function(a,b){b.$refreshCheckbox()},"click span.ui-table-cell-editor-button":function(a,b){function c(a){var d=b._sEditors[a],e=baidu.dom.getAttr(q[a],"edit-target");if(!d){var f=baidu.dom.create("div",{"class":"ui-table-editor"});document.body.appendChild(f),d=l(J,f,b,{type:j,target:null}),b._sEditors[a]=d;var g=b.editors[a];for(var h in g)d[h]=g[h]}if(d.rowData=p,e){var i=c(e);d.target=i,d.targetField=e,i.parTarget=d}return d}function d(a,c){var e=q[c];a.show(r(e)[0]),a.editCell=r(g)[1],a.showCell=r(e)[0],b._showEditors.push(a),a.target&&d(a.target,a.targetField)}var e=a||window.event,f=baidu.event.getTarget(e),g=baidu.dom.next(f);g.innerHTML;var g=baidu.dom.getParent(f),h=baidu.dom.getParent(g),i=baidu.dom.getAttr(h,"edit-field"),j=baidu.dom.getAttr(h,"edit-type"),k=b._oOptions.datasource,m=b._aRows,n=ecui.findControl(h).getParent(),o=baidu.array.indexOf(m,n),p=k[o],q={};baidu.each(n._aElements,function(a){var b=baidu.dom.getAttr(a,"edit-field");b&&(q[b]=a)}),b._sEditors=b._sEditors||[];var s=c(i);b._showEditors=[],d(s,i)}};L.getData=function(){return this._aData},L.render=function(a,b,c,d,e){var d=y({},d);d=y(d,this._oOptions),d.leftLock=this._nLeftLock,d.rightLock=this._nRightLock,d.fields=a,d.datasource=b||[];var c=c||{};if(d.sortby=c.sortby,d.orderby=c.orderby,d.errorMsg=e,b.length||(d.leftLock=0,d.rightLock=0),B(E,"resize",z),!d.complex){var f,g,h;g=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var i;for(h=0;i=g[h];h++){var j;if(i._aElements){var k=i.getCells();for(j=0;cell=k[j];j++)p(cell);p(i,!0)}}}for(h=0;f=this._aHCells[h];h++)p(f,!0);for(f in this)/_u\w+/.test(f)&&o(this[f]);var l=this.getOuter();l.innerHTML="",this.$setBody(l),this.$resize(),K.client.call(this,l,d),this._bCreated=!1,this.cache(!0,!0),I.init.call(this),A(E,"resize",z),this.resize()},L.disposeUnit=function(a){B(E,"resize",z);var b;b=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var c=0,d=function(){var e=b[c];if(e){var f;if(e._aElements){var g=e.getCells();for(f=0;cell=g[f];f++)p(cell);p(e,!0)}c++,setTimeout(d,0)}else a()};d(),A(E,"resize",z)},L.$bindCheckbox=function(){var a,b,c=this.getBody().getElementsByTagName("input"),d=this.getTypes()[0];for(this._aCheckboxs=[],this._eCheckboxAll=null,a=0;b=c[a];a++)"checkbox"==b.type&&b.className.indexOf(d+"-checkbox-all")>=0?this._eCheckboxAll=b:"checkbox"==b.type&&b.className.indexOf(d+"-checkbox")>=0&&this._aCheckboxs.push(b)},L.$refreshCheckbox=function(a){var b,c,d,e=!0;for(b=0;c=this._aCheckboxs[b];b++)d=c.parentNode.parentNode,void 0!==a?c.checked=a:e=c.checked&&e,c.checked&&this._bCheckedHighlight?d.className+=" highlight":this._bCheckedHighlight&&(d.className=d.className.replace(/\s+highlight/g,""));this._eCheckboxAll&&(this._eCheckboxAll.checked=void 0!==a?a:e),n(this,"checkboxChange")},L.$ready=function(){n(this,"sizechange")},L.$resize=function(){var a=this;I.$resize.call(this),setTimeout(function(){n(a,"sizechange"),a.$pagescroll()},100)},L.$pagescroll=function(){I.$pagescroll.call(this),this._uHScrollbar&&c(this)},L.getSelection=function(){if(!this._aCheckboxs||!this._aCheckboxs.length)return[];for(var a,b=[],c=0;a=this._aCheckboxs[c++];)if(a.checked){var d=u(a,"data-rownum")-0;b.push(y({},this._aData[d]))}return b},L.setSelection=function(a){for(var a=a||[],b=0,c=this._aCheckboxs.length;c>b;b++)this._aCheckboxs[b].checked=i.indexOf(a,b)>=0?!0:!1;this.$refreshCheckbox()},L.init=function(){var a,b,c=this.getOuter(),d=this;for(I.init.call(this),a=0;b=M[a];a++)A(c,b,function(a){return function(b){var c=b||window.event;c.targetElement=c.target||c.srcElement,d.$fireEventHandler(a,c)}}(b))},L.$fireEventHandler=function(a,b){var c,f,g=d(this.events,a),h=b.targetElement;for(c=0;f=g[c];c++)e(h,f.selector)&&f.handler.call(h,b,this)},L.$refresh=function(a,b){var c=[],d=[];s(a,this.getTypes()[0]),c=this._aHCells,d=this._aRows.concat(this._aHeadRows,this._aLockedRow,this._aLockedHeadRow);for(var e,f=0;e=c[f++];)o(e);for(var e,f=0;e=d[f++];)o(e);I.$refresh.call(this,a,b)}}(),function(){function a(a){var b;b=a._eBrowser?a._eBrowser:a._uHScrollbar.getOuter(),b.style.top=l(s().bottom-z(a.getOuter()).top-b.offsetHeight,a.getHeight()-b.offsetHeight)+"px"}function b(a,b){var c,d=a.getRows(),e=null,f=a._nLeft?a._nLeft:0;for(c=d[b].getCells();(e=c[f++])&&(!e.getOuter().offsetWidth||"none"==e.getOuter().style.display););return e}function c(a,b){return function(){a.apply(b,Array.prototype.slice.call(arguments))}}var d=ecui,e=d.array,f=d.dom,g=d.ui,h=d.util,i=d.string,j=d.ext,k=Math,l=(k.max,k.min),m=d.$fastCreate,n=d.query,o=d.inherits,p=d.triggerEvent,q=d.dispose,r=d.getScrollNarrow,s=h.getView,t=h.toNumber,u=h.extend,v=h.blank,w=i.trim,x=f.create,y=f.moveElements,z=f.getPosition;getParent=f.getParent,insertBefore=f.insertBefore,first=f.first,children=f.children,getStyle=f.getStyle,indexOf=e.indexOf,UI_CONTROL=g.Control,UI_TIP=g.Tip,UI_CONTROL_CLASS=UI_CONTROL.prototype,UI_TABLE=g.Table,UI_CHECKBOX=g.Checkbox,UI_TABLE_CLASS=UI_TABLE.prototype,UI_TABLE_HCELL_CLASS=UI_TABLE_CLASS.HCell.prototype,UI_LOCKED_TABLE=g.LockedTable,UI_LOCKED_TABLE_CLASS=UI_LOCKED_TABLE.prototype,UI_FORM=g.Form,UI_FORM_CLASS=UI_FORM.prototype,UI_FORM_CLASS_HIDE=UI_FORM_CLASS.$hide;var A=g.ExtTable=o(UI_LOCKED_TABLE,"ui-table",function(a,b){b.browser=!1},function(a,b){var d,e,f,g,h=x("ui-table-expend-layer","display:none;position:absolute"),i=this;for(this._oExpended=null,insertBefore(h,this._uLockedHead.getOuter()),this._uRowExpendedLayer=m(UI_CONTROL,h,this),h=x("ui-table-head-shadow","display:none;position:absolute;left:0px"),this._eMain.appendChild(h),this._uHeadShadow=m(UI_CONTROL,h,this),this._ePanelEmpty=this._eMain.appendChild(x("ui-table-panel-empty","display:none")),this._eEmpty=this._eMain.appendChild(x("ui-table-empty","position:absolute;left:0px;display:none")),this._eEmpty.innerHTML=b.emptyText||"暂无数据",d=this.getHCells(),f=0;e=d[f];f++){if(h=e._oOptions,h.sortable&&(e.setClass("ui-table-hcell-sort"),h.field==b.sortby&&e.setClass("ui-table-hcell-sort-"+b.orderby)),h.tip&&(a=x("ui-tip"),e._uTip=m(UI_TIP,a,this,{target:h.tip}),e.getBody().appendChild(a)),h.filter&&e.setClass("ui-table-hcell-filter"),h.align)for(g=0,rows=this.getRows();g<rows.length;g++)rows[g]&&rows[g]._aElements[f]&&(rows[g]._aElements[f].className+=" ui-table-cell-align-"+h.align);if(h.editable&&h.edittype)for(g=0,rows=e.getCells();g<rows.length;g++)j.Editor.init(h.edittype,rows[g],function(a,b,c){return function(){var d=i.editorConfig||{},e=u({},d[b]||{}),f=e.setValue,g=e.getValue;return f&&(e.setValue=function(b){f.call(null,this,b,a,c)}),g&&(e.getValue=function(){return g.call(null,this,a,c)}),e}}(g,h.field,rows[g].getOuter().getAttribute("data-ecui-editkey"))),rows[g].$editorsubmit=function(a,b,d){return function(e,f){var g={index:a,field:b,key:d};return g.beforeProcess=c(e.beforeProcess,e),g.afterProcess=c(e.afterProcess,e),g.setError=c(e.setError,e),p(i,"editorsubmit",null,[f,g])}}(g,h.field,rows[g].getOuter().getAttribute("data-ecui-editkey"))}if(d[0]._oOptions.checkbox)for(d=[d[0]].concat(d[0].getCells()),f=0;e=d[f];f++)g=w(e.getContent()),"false"!=g?(e.setContent(""),h=e.getBody().appendChild(x("ui-checkbox")),e._uCheckbox=m(UI_CHECKBOX,h,e,g?{value:g}:null),0!=f&&e._uCheckbox.setSubject(d[0]._uCheckbox)):e.setContent("&nbsp;");this.getRows().length<=0&&(this.getBody().appendChild(this._ePanelEmpty),this._ePanelEmpty.style.display="",this._eEmpty.style.display="",this._uLockedMain.$hide())}),B=A.prototype;B.getCheckedRows=function(){var a,b,c,d=this.getHCell(0)._uCheckbox,e=[];if(d)for(a=d.getDependents(),b=0;c=a[b];b++)c.isChecked()&&e.push(c.getParent().getParent());return e},B.getValues=function(){var a,b,c,d=this.getHCell(0)._uCheckbox,e=[];if(d)for(a=d.getDependents(),b=0;c=a[b];b++)c.isChecked()&&e.push(c.getValue());return e},B.removeRow=function(a){var b=this._aRows[a].getCell(0),c=this.getRow(a);b._uCheckbox&&q(b._uCheckbox),c&&(c.hide=v),UI_LOCKED_TABLE_CLASS.removeRow.call(this,a),c&&delete c.hide},B.init=function(){var a,b,c=this.getHCells()[0];if(UI_LOCKED_TABLE_CLASS.init.call(this),c._oOptions.checkbox)for(a=[c].concat(c.getCells()),b=0;c=a[b];b++)c._uCheckbox&&c._uCheckbox.init()},UI_TABLE_HCELL_CLASS.$click=function(){var a,b=this.getParent(),c=this._oOptions;UI_CONTROL_CLASS.$click(this),c.sortable?(a=this.getOuter().className.indexOf("-desc")>=0?"asc":this.getOuter().className.indexOf("-asc")>=0?"desc":c.orderby||"desc",p(b,"sort",null,[c.field,a])):c.filter&&ecui.get(c.filter).show(this,"right")},B.expendRow=function(a,c,d){var e,f,g,h=this.getRow(a),i=h.getCells(),j=this._uRowExpendedLayer,k=this._nLeft?this._nLeft:0;this._oExpended&&this.collapseRow(this._oExpended.index),p(this,"beforeexpendrow",null,[a]),e=b(this,a),f=e.getHeight(),g=e.$getBasicHeight(),g||(e.cache(),g=e.$getBasicHeight()),this._oExpended={index:a,cellHeight:f};for(var l,m,k=0;l=i[k];k++)m=x("ui-table-expend-cell"),m.style.height=f-g+"px",y(l.getOuter(),m,!0),l.getOuter().appendChild(m),l.getOuter().style.verticalAlign="top";e._bResizable=!0,e.setSize(null,f+c+g),"[object Function]"==Object.prototype.toString.call(d)?j.setContent(d.call(null,a)):j.setContent(d?d:""),f=h.getY()+f+this._uHead.getHeight(),j.setPosition(0,f+parseInt(this.getBody().style.top,10)),j._nTop=f,j.show(),j.setSize(this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight,c),this.resize(),p(this,"afterexpendrow",null,[a,j.getBody()])},B.collapseRow=function(a){var c,d,e,f=this.getRow(a),g=this._nLeft?this._nLeft:0,h=this._uRowExpendedLayer;if(this._oExpended){p(this,"beforecollapserow",null,[a,h.getBody()]),c=f.getCells(),e=b(this,a),d=x(),h.hide();for(var i,g=0;i=c[g];g++)y(first(i.getOuter()),d,!0),i.getOuter().innerHTML="",y(d,i.getOuter(),!0),i.getOuter().style.verticalAlign="";e.setSize(null,this._oExpended.cellHeight),f._eFill.style.height=this._oExpended.cellHeight-e.$getBasicHeight()+"px",this._oExpended=null,this.resize(),p(this,"aftercollapserow",null,[a])}},B.resizeExpended=function(){var a,c,d=this._uRowExpendedLayer,e=d.getOuter(),f=0;if(this._oExpended){for(e=children(e),c=0;a=e[c];c++)f+=a.offsetHeight+parseInt(getStyle(a,"marginTop"),10)+parseInt(getStyle(a,"marginBottom"),10);cell=b(this,this._oExpended.index),cell.setSize(null,this._oExpended.cellHeight+f+cell.$getBasicHeight()),this.getRow(this._oExpended.index)._eFill.style.height=this._oExpended.cellHeight+f+"px",d.setSize(null,f),this.resize()}},B.$setSize=function(a,b){var c=this;UI_LOCKED_TABLE_CLASS.$setSize.call(this,a,b),this._uHeadShadow.setSize(this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight),this._eEmpty.style.width=this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight+"px",this._uHead.getHeight()&&(this._eEmpty.style.top=this._uHead.getHeight()+"px"),this._uVScrollbar||(this._eBrowser&&(this._eBrowser.style.height=r()+2+"px",this._eBrowser.style.display=this._uHScrollbar.isShow()?"":"none"),this._eMain.appendChild(this._uHScrollbar.getOuter())),setTimeout(function(){c.$pagescroll.call(c)},0)},B.$scroll=function(){var a=this._uRowExpendedLayer;UI_LOCKED_TABLE_CLASS.$scroll.call(this),a.isShow()&&a.setPosition(a.getX(),a._nTop-this.getScrollTop())},B.$pagescroll=function(){var b=this._uHead;this.isShow()&&(UI_LOCKED_TABLE_CLASS.$pagescroll.call(this),"0px"!=b.getOuter().style.top?(this._uHeadShadow.show(),this._uHeadShadow.getOuter().style.top=t(b.getOuter().style.top)+b.getHeight()+"px"):this._uHeadShadow.hide(),this._uVScrollbar||a(this))},B.getData=function(){var a,b,c,d,e,f=this.getRows(),g=[];for(b=0;a=f[b];b++){for(c=[],d=0;e=a.getCell(d++);)c.push(e.getContent());g.push(c)}return g},B.setChecked=function(a){var b,c,d=this.getRows(),a="|"+a.join("|")+"|";for(c=0;b=d[c];c++)(b=b.getCell(0)._uCheckbox)&&a.indexOf("|"+b.getValue()+"|")>=0&&b.setChecked(!0)},B.getHeaderData=function(){var a,b,c,d,e,f=this._aHeadRows.slice(),g=this.getColumnCount(),h=[];for(b=0;a=f[b];b++){for(c=[],d=0;g>d;)e=a.getCell(d++),c.push(e?e.getContent():"");h.push(c)}return h},B.highlight=function(a){for(var b,c,d=0;c=a[d];d++)b=this.getRow(c),b&&b.getOuter().className.indexOf("highlight")<0&&(b.alterClass("+highlight"),getParent(b._eFill).className=b.getMain().className)},B.unHighlight=function(a){var b,c,d;if(!a||a.length<=0)c=this.getRows();else for(c=[],d=0;d<a.length;d++)c.push(this.getRow(a[d]));for(d=0;b=c[d];d++)b.getOuter().className.indexOf("highlight")>=0&&(b.alterClass("-highlight"),getParent(b._eFill).className=b.getMain().className)},B.getHeaderStructure=function(){var a,b,c,d,e,f=this._aHeadRows.slice(),g=[];for(b=0;a=f[b];b++){for(c=[],d=0;e=a._aElements[d++];)c.push({colSpan:e.getAttribute("colSpan"),rowSpan:e.getAttribute("rowSpan")});g.push(c)}return g},B.setEmptyText=function(a){this._eEmpty.innerHTML=a},UI_TABLE_HCELL_CLASS.isShow=function(){return this.getOuter().offsetWidth&&"none"!=this.getOuter().style.display?!0:!1},UI_TABLE_HCELL_CLASS.$hide=function(){this._sWidth4H=this._sWidth4H||this.getWidth(),this.$setStyles("display","none",-this._sWidth4H)},UI_TABLE_HCELL_CLASS.$show=function(){this._sWidth4H&&(this.$$width=this._sWidth4H),this.$setStyles("display","",this.getWidth())},UI_FORM_CLASS.$hide=function(){var a,b,c;for(UI_FORM_CLASS_HIDE.call(this),a=n({type:A}),b=0;c=a[b];b++)c&&c.isShow()&&c.$pagescroll.call(c)}}(),function(){function a(a,d,e){var f=n.create("","","table"),g=n.create("","","thead"),h=n.create("","","tbody");f.appendChild(g),f.appendChild(h),a.appendChild(f),this._aFields=b.call(this,g,d),c.call(this,h,d,e)}function b(a,b){var c=this.getType();b.fields=b.fields||[];var d,e=[];"[object Object]"==Object.prototype.toString.call(b.fields[0])?(d=[],d.push(b.fields)):d=b.fields;for(var f=0;f<d.length;f++){var g=d[f],h=n.create("","","tr");a.appendChild(h);for(var i=0;i<g.length;i++){var j=g[i],k=n.create("","","th");if(parseInt(j.rowspan,10)>=2||1==f)e.push(j);else{var l=parseInt(j.colspan,10);l=isNaN(l)?1:l,e.push(l)}if(parseInt(j.rowspan,10)>=2&&k.setAttribute("rowSpan",j.rowspan),parseInt(j.colspan,10)>=2&&k.setAttribute("colSpan",j.colspan),j.width&&n.setStyle(k,"width",j.width+"px"),j.field&&k.setAttribute("data-field",j.field),j.sortable&&n.addClass(k,c+"-hcell-sort"),j.field&&j.field==b.sortby&&n.addClass(k,c+"-hcell-sort-"+b.orderby.toLowerCase()),j.order&&k.setAttribute("data-orderby",j.order.toLowerCase()),j.checkbox?(n.setStyle(k,"width","16px"),k.innerHTML='<input type="checkbox" class="'+c+'-checkbox-all"'+" />"):k.innerHTML=j.name,j.tip&&j.tip.length){var m=n.create("","margin-left:3px;","span");m.setAttribute("ecui","type:tip;message:"+o.encodeHTML(j.tip)),k.appendChild(m),ecui.init(k)}h.appendChild(k)}}for(var p=[],f=e.length-1;f>=0;f--){var q=e[f];if("object"==typeof q)p.unshift(q);else if("number"==typeof q)for(var i=0;q>i;i++)p.unshift(p.pop())}return"[object Object]"==Object.prototype.toString.call(b.fields[0])&&(p=b.fields),p.length==b.leftLock+b.rightLock&&(b.leftLock=b.rightLock=0),p}function c(a,b,c){function d(){for(var b=i+20,b=b>h?h:b,k=i;b>k;k++){for(var l=n.create("","","tr"),m=f[k],p=0;p<g.length;p++){var q=g[p],r=n.create("","","td");q.align&&r.setAttribute("align",q.align),m.bgcolor&&n.setStyle(r,"backgroundColor",m.bgcolor),q.checkbox?r.innerHTML='<input type="checkbox" data-rownum="'+k+'"'+' class="'+e+'-checkbox"'+" />":q.content&&"function"==typeof q.content?(j._aCallback.push({cell:r,func:q.content,item:m,index:k}),r.innerHTML="-"):r.innerHTML=o.encodeHTML(m[q.field]),l.appendChild(r)}a.appendChild(l)}i=b,h>b?setTimeout(d,10):c.call(j)}this._aCallback=[];var e=this.getType(),f=b.datasource||[],g=this._aFields,h=f.length,i=0,j=this;d()}function d(a){var b=a.getElementsByTagName("thead")[0],c=n.children(b),d=n.create("","","tr"),e=n.children(c[0]);this._bDoubleHead=2==c.length?!0:!1;for(var f=0,g=0;g<e.length;g++){var h=e[g],i=parseInt(n.getAttribute(h,"colSpan"),10),j=parseInt(n.getAttribute(h,"rowSpan"),10);if(i=isNaN(i)?1:i,j=isNaN(j)?1:j,i>=2)for(var k=0;i>k;k++){var l=n.create("","border-bottom:none;","th"),m=n.children(c[1]);n.setStyle(l,"width",m[f].style.width),f++,d.appendChild(l)}else if(this._bDoubleHead&&1==j){var l=n.create("","border-bottom:none;","th"),m=n.children(c[1]);n.setStyle(l,"width",m[f].style.width),f++,d.appendChild(l)}else{var l=n.create("","border-bottom:none;","th");n.setStyle(l,"width",h.style.width),d.appendChild(l),1>=j&&f++}}n.insertBefore(d,c[0])}function e(){if((this._bFollowHead||this._bFollowScroll)&&this._uHead){var a=this._uHead.getOuter(),b=this.getOuter(),c=p.getView(),d=n.getPosition(b);if(d.top<c.top?(n.setStyle(a,"position","fixed"),n.setStyle(a,"left",d.left+"px")):(n.setStyle(a,"position","absolute"),n.setStyle(a,"left",0)),this._uScroll.isShow()){var e=this._uScroll.getOuter();d.top+this.getHeight()-15>c.bottom?(n.setStyle(e,"position","fixed"),n.setStyle(e,"bottom",0)):n.setStyle(e,"position","static")}}}function f(a,b){this.getTypes()[0];var c=n.first(a),d=n.create("","","table");d.appendChild(n.create("","","thead")),d.appendChild(n.create("","","tbody")),n.moveElements(n.first(c),n.first(d),!0);var e=n.create(),f=n.create();e.appendChild(c),f.appendChild(d),a.appendChild(e),a.appendChild(f),this._uHead=l.$fastCreate(this.Head,n.last(a),this,b),this._uBody=l.$fastCreate(this.Body,n.first(a),this,b)}function g(){var a=this._uHead.getInitFieldsWidth(),b=this._uHead.getRows(),c=this._uBody.getRows(),d=b.concat(c),e=0;7===w&&(e=1);for(var f=0,g=d.length;g>f;f++){for(var h=d[f].getCells(),i=0,j=0,k=0;k<this._nLeft;k++){var l=h[k];this._bDoubleHead&&1==f&&(n.setStyle(l,"height","61px"),n.setStyle(l,"lineHeight","61px")),this._bDoubleHead&&2==f||(n.setStyle(l,"position","absolute"),n.setStyle(l,"top",e+"px"),n.setStyle(l,"left",i+"px"),i+=a[k])}for(var k=0;k<this._nRight;k++){var l=h[h.length-k-1];this._bDoubleHead&&1==f&&(n.setStyle(l,"height","61px"),n.setStyle(l,"lineHeight","61px")),this._bDoubleHead&&2==f||(n.setStyle(l,"position","absolute"),n.setStyle(l,"top",e+"px"),n.setStyle(l,"right",j+"px"),j+=a[a.length-k-1])}f<b.length-1?e+=h[0].offsetHeight:f==b.length-1?e=0:e+=30}this._nLeftLockedWidth=0,this._nRightLockedWidth=0;for(var f=0;f<this._nLeft;f++)this._nLeftLockedWidth+=a[f];for(var g=a.length,f=0;f<this._nRight;f++)this._nRightLockedWidth+=a[g-f-1];if(n.setStyle(this._uHead._eInner,"marginLeft",this._nLeftLockedWidth+"px"),n.setStyle(this._uHead._eInner,"marginRight",this._nRightLockedWidth+"px"),n.setStyle(this._uBody._eInner,"marginLeft",this._nLeftLockedWidth+"px"),n.setStyle(this._uBody._eInner,"marginRight",this._nRightLockedWidth+"px"),n.setStyle(this._uScroll.getOuter(),"marginLeft",this._nLeftLockedWidth+"px"),n.setStyle(this._uScroll.getOuter(),"marginRight",this._nRightLockedWidth+"px"),!w&&this._bDoubleHead&&(this._nLeft||this._nRight)){var h=d[2].getCells();n.insertBefore(n.create("","","th"),h[0])}}function h(a,b){var c,d=[];a=p.extend({},a),a=p.extend(a,B);for(var e in a)c={handler:a[e]},e=e.split(/\s+/),e[0]==b&&(c.selector=e[1],d.push(c));return d}function i(a,b){var c,d,e,f=!0;return a||b?(b.replace(/^([^.#]*)([.#]?)(.*)$/,function(a,b,f,g){c=b,e=f,d=g}),c&&a.tagName.toLowerCase()!=c&&(f=!1),"."!=e||new RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)||(f=!1),"#"==e&&a.id!=d&&(f=!1),f):!1}function j(a){var a=a||[],b=this.getRows();if(b&&b.length)for(var c=0;c<b.length;c++){var d=b[c],e=d.getCells(),f=e.length;if(e.length==a.length){for(var g=0;g<this._nLeft;g++)n.setStyle(e[g],"width",a[g]+"px");if(0==c)for(var g=this._nLeft;g<f-this._nRight;g++)n.setStyle(e[g],"width",a[g]+"px");for(var g=f-this._nRight;f>g;g++)n.setStyle(e[g],"width",a[g]+"px")}}}function k(a,b){var c=this.getTypes()[0];this._nLeft=b.leftLock,this._nRight=b.rightLock,n.addClass(a,c+"-outer"),this._eInner=n.create(c+"-inner","","div"),n.moveElements(a,this._eInner,!0),a.appendChild(this._eInner),this._uInner=l.$fastCreate(z.Inner,this._eInner,this,{});var d=a.getElementsByTagName("tr");this._aRows=[];for(var e=0;e<d.length;e++)this._aRows.push(l.$fastCreate(z.Row,d[e],this,b))
}var l=ecui,m=l.ui,n=l.dom,o=l.string,p=l.util,q=l.array,r=m.Control,s=r.prototype,t=document,u=window,v=navigator.userAgent,w=/msie (\d+\.\d)/i.test(v)?t.documentMode||RegExp.$1-0:void 0,x=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp.$1:void 0;m.FixedTable=l.inherits(r,"ui-fixed-table",function(a,b){if(!n.children(a).length)return this._bNoTable=!0,void 0;this._bNoTable=!1,d.call(this,a,b),this._nLeft=b.leftLock=b.leftLock||0,this._nRight=b.rightLock=b.rightLock||0,this._bFollowHead=b.followHead!==!1,this._bFollowScroll=b.followScroll!==!1,this._bNowrap=b.nowrap!==!1,this._bCheckedHighlight=b.checkedHighlight!==!1,f.call(this,a,b);var c=n.create();a.appendChild(c),this._uScroll=l.$fastCreate(this.Scroll,c,this,{})},function(a,b){if(!this._bNoTable){g.call(this,a,b);var c=this;setTimeout(function(){for(var b=c._aCallback||[];b.length;){var d=b.shift(),e=d.func.call(null,d.item,d.index);e.nodeName?(d.cell.innerHTML="",d.cell.appendChild(e)):d.cell.innerHTML=e}setTimeout(function(){ecui.init(a),l.triggerEvent(c,"renderFinish"),7===w&&c.$setSize()},10)},50),this._bindCheckbox()}});var y=m.FixedTable,z=y.prototype,A=["click","mouseup","mousedown"],B={"click th.ui-fixed-table-hcell-sort":function(a,b){var c,d=this.getAttribute("data-field");c=this.className.indexOf("-sort-desc")>=0?"asc":this.className.indexOf("-sort-asc")>=0?"desc":this.getAttribute("data-orderby")||"desc",l.triggerEvent(b,"sort",null,[d,c])},"click input.ui-fixed-table-checkbox-all":function(a,b){b._refreshCheckbox(this.checked)},"click input.ui-fixed-table-checkbox":function(a,b){b._refreshCheckbox()}};z._scroll=function(a){var b=n.children(this._uHead._eInner)[0],c=n.children(this._uBody._eInner)[0];b.style.marginLeft=0-a+"px",c.style.marginLeft=0-a+"px"},z.$pagescroll=e,z.$setSize=function(){if(!this._bNoTable){8>w&&(this.$pagescroll=p.blank);var a=this.getOuter(),b=this._uHead.getOuter(),c=this._uScroll.getOuter();n.setStyle(b,"position","absolute"),n.setStyle(b,"left",0),n.setStyle(c,"position","static"),this._uHead._autoResize(),this._nContentWidth=this._uHead.getContentWidth();var d=this._uHead.getHeight()-1;x&&(d+=2),n.setStyle(a,"paddingTop",d+"px");for(var f=this.getWidthControlCells(),g=[],h=0;h<f.length;h++){var i=f[h];g.push(i.getBodyWidth())}this._uHead._setSize(g),this._uBody._setSize(g),this._uScroll._setSize(this._nContentWidth),this._uScroll._scroll(),8>w&&(this.$pagescroll=e),l.triggerEvent(this,"pagescroll")}},z.getWidthControlCells=function(){return this._uHead.getWidthControlCells()},z.getInitFieldsWidth=function(){return this._uHead.getInitFieldsWidth()},z.render=function(b){function c(){y.client.call(this,h,b),this._bCreated=!1,this.cache(!0,!0),s.init.call(this),this._bCreated=!0,p.attachEvent(u,"resize",l.repaint)}if(p.detachEvent(u,"resize",l.repaint),this._uHead)for(var d=this._uHead.getRows(),e=0;e<d.length;e++){for(var f=d[e].getCellControls(),g=0;g<f.length;g++)l.$dispose(f[g],!0);l.$dispose(d[e],!0)}if(this._uBody)for(var d=this._uBody.getRows(),e=0;e<d.length;e++)l.$dispose(d[e]);var h=this.getOuter();h.innerHTML="",this.$resize(),b.fields&&(this._aData=b.datasource||[],a.call(this,h,b,c))},z.getData=function(){return this._aData||[]},z.getSelection=function(){if(!this._aCheckboxs||!this._aCheckboxs.length)return[];for(var a,b=[],c=0;a=this._aCheckboxs[c++];)if(a.checked){var d=n.getAttribute(a,"data-rownum")-0;b.push(p.extend({},this._aData[d]))}return b},z.setSelection=function(a){for(var a=a||[],b=0,c=this._aCheckboxs.length;c>b;b++)this._aCheckboxs[b].checked=q.indexOf(a,b)>=0?!0:!1;this._refreshCheckbox()},z.init=function(){var a=this.getOuter(),b=this;s.init.call(this);for(var c,d=0;c=A[d];d++)p.attachEvent(a,c,function(a){return function(c){var d=c||window.event;d.targetElement=d.target||d.srcElement,b._fireEventHandler(a,d)}}(c))},z.$ready=function(){},z._fireEventHandler=function(a,b){for(var c,d=h(this.events,a),e=b.targetElement,f=0;c=d[f];f++)i(e,c.selector)&&c.handler.call(e,b,this)},z._bindCheckbox=function(){var a=this.getBody().getElementsByTagName("input"),b=this.getTypes()[0];this._aCheckboxs=[],this._eCheckboxAll=null;for(var c,d=0;c=a[d];d++)"checkbox"==c.type&&c.className.indexOf(b+"-checkbox-all")>=0?this._eCheckboxAll=c:"checkbox"==c.type&&c.className.indexOf(b+"-checkbox")>=0&&this._aCheckboxs.push(c)},z._refreshCheckbox=function(a){var b,c,d=!0;this.getType();for(var e=0;b=this._aCheckboxs[e];e++)c=b.parentNode.parentNode,void 0!==a?b.checked=a:d=b.checked&&d,b.checked&&this._bCheckedHighlight?n.addClass(c,"ui-fixed-table-row-highlight"):this._bCheckedHighlight&&n.removeClass(c,"ui-fixed-table-row-highlight");this._eCheckboxAll&&(this._eCheckboxAll.checked=void 0!==a?a:d),l.triggerEvent(this,"select")},z.Head=l.inherits(r,"ui-fixed-table",function(a,b){var c=this.getType();n.addClass(a,c+"-head"),n.setStyle(a,"position","absolute"),n.setStyle(a,"top",0),n.setStyle(a,"left",0),k.call(this,a,b);var d=a.getElementsByTagName("tr");this._aRows=[],b.createCellControl=!0;for(var e=0;e<d.length;e++)this._aRows.push(l.$fastCreate(z.Row,d[e],this,b))},function(a){var b=a.getElementsByTagName("tr")[0],c=n.create("","","th");b.appendChild(c),this._aInitFieldsWidth=[];for(var d=this.getWidthControlCells(),e=0;e<d.length;e++){var f=d[e];f.resize(),this._aInitFieldsWidth.push(f.getWidth())}b.removeChild(c)});var C=z.Head.prototype;C._setSize=function(a){this.resize(),7===w&&j.call(this,a)},C._autoResize=function(){for(var a=this._aInitFieldsWidth.slice(),b=this.getWidthControlCells().slice(),c=0;c<this._nLeft;c++)a.shift(),b.shift();for(var c=0;c<this._nRight;c++)a.pop(),b.pop();this.resize(),this._uInner.resize();for(var d=this._uInner.getBodyWidth(),e=0,c=0;c<a.length;c++)e+=a[c];if(d>e)for(var c=0,f=b.length;f>c;c++){var g=d-e,h=parseInt(g/(f-c));e+=h;var i=b[c],j=i.getHeight();i.setSize(a[c]+h,j)}},C.getWidthControlCells=function(){var a=this.getRows();return a[0].getCellControls()},C.getContentWidth=function(){var a=n.children(this._eInner)[0];return a.offsetWidth},C.getInitFieldsWidth=function(){return this._aInitFieldsWidth},z.Body=l.inherits(r,"ui-fixed-table",function(a,b){this._bNowrap=b.nowrap!==!1,b.createCellControl=!1,k.call(this,a,b)},function(a,b){var c=a.getElementsByTagName("tbody")[0];if(!n.children(c).length){var d=this.getType(),e=n.create(d+"-empty");e.innerHTML=b.noData?o.encodeHTML(b.noData):"暂无数据，请稍后再试",a.appendChild(e)}});var D=z.Body.prototype;D._setSize=function(a){j.call(this,a);for(var b=this.getRows(),c=1,d=0,e=b.length;e>d;d++){var f,g=b[d],h=g.getCells();if(f=this._bNowrap?0===d?29:30:h[this._nLeft].offsetHeight-1,!(0>f)){for(var i=0;i<this._nLeft;i++)n.setStyle(h[i],"height",f+"px"),n.setStyle(h[i],"top",c+"px");for(var i=0;i<this._nRight;i++){var k=h[h.length-i-1];n.setStyle(k,"height",f+"px"),n.setStyle(k,"top",c+"px")}c+=f+1}}},C.getRows=D.getRows=function(){return this._aRows||[]},z.Inner=l.inherits(r);var E=z.Inner.prototype;E.resize=function(){s.resize.call(this),this.$setSize(this.getWidth(),this.getHeight()+1)},z.Row=l.inherits(r,"ui-fixed-table-row",function(a,b){if(n.addClass(a,"ui-fixed-table-row"),this._aCells=n.children(a),b.createCellControl){this._aCellControls=[];for(var c=0;c<this._aCells.length;c++)this._aCellControls.push(l.$fastCreate(r,this._aCells[c],this,{}))}});var F=z.Row.prototype;F.getCells=function(){return this._aCells||[]},F.getCellControls=function(){return this._aCellControls||[]},z.Scroll=l.inherits(r,"ui-fixed-table-scroll",function(a){var b=this.getType();n.addClass(a,b),this._eInner=n.create(b+"-inner"),a.appendChild(this._eInner)},function(a){var b=this;p.attachEvent(a,"scroll",function(){b._scroll()})});var G=z.Scroll.prototype;G._setSize=function(a){this.show(),this.resize();var a=a||0;n.setStyle(this._eInner,"width",a+"px"),a<=this.getWidth()?this.hide():this.show()},G._scroll=function(){var a=this.getOuter();this.getParent()._scroll(a.scrollLeft)}}(),function(){function a(){var a=this.getParent(),b=a._nPage,c=a.getMaxPage(),d=this.getStep();u.$click.call(this),"+"==d.charAt(0)?(b+=parseInt(d.substring(1),10),b==a._nPage?b=c:b>c&&(b=a._nPage)):"-"==d.charAt(0)?(b-=parseInt(d.substring(1),10),b==a._nPage?b=1:1>b&&(b=a._nPage)):b=parseInt(d,10),a._nPage!=b&&o(a,"change",null,[b])}function b(a){var b,d,e,f=a._aPageBtn,g=a.getMaxPage(),h=a._nPage,i=a._nShowCount,j=parseInt(i/2,10),k=h-j>0?h-j:1;for(1==h?a._uPrvBtn.disable():a._uPrvBtn.enable(),h==g||0==g?a._uNxtBtn.disable():a._uNxtBtn.enable(),k+i-1>g&&g-i>=0&&(k=g-i+1),d=0;e=f[d];d++)b=k+d,e.setContent(b),e.setStep(b),e.setSelected(h==b),b>g?e.hide():e.show();c(a)}function c(a){var b,c=a._aPageBtn,d=a._aOMSBtn,e=a.getMaxPage();a._bOMSButton&&("1"!=c[0].getContent()?(c[0].setContent(1),c[0].setStep(1),d[0].show()):d[0].hide(),b=c[c.length-1],b.isShow()&&b.getContent()!=e?(b.setContent(e),b.setStep(e),d[1].show()):d[1].hide())}var d=ecui,e=d.dom,f=(d.string,d.array,d.ui),g=d.util,h=Math,i=e.create,j=e.children,k=g.extend,l=g.blank,m=d.$fastCreate,n=d.inherits,o=d.triggerEvent,p=f.Control,q=f.Button,r=f.Select,s=f.Item,t=f.Items,u=p.prototype;q.prototype,s.prototype,r.prototype;var v=f.Pager=n(p,"ui-pager",function(a,b){var c,d,e=this.getTypes()[0],f=[];for(d=this._nShowCount=!b.showCount||b.showCount<3?7:b.showCount,this._bOMSButton=b.omsButton!==!1,f.push('<div class="'+e+"-button-prv "+e+'-button">上一页</div><div class="'+e+'-items">'),c=0;d>c;c++)(1==c||c==d-1)&&f.push('<div class="'+e+'-item-oms" ecui="disabled:true">...</div>'),f.push('<div class="'+e+'-item"></div>');f.push('</div><div class="'+e+"-button-nxt "+e+'-button">下一页</div>'),a.innerHTML=f.join("")},function(a,b){a=j(a),this._bResizable=!1,this._nPage=b.page||1,this._nPageSize=b.pageSize||50,this._nTotal=b.total||0,this._uPrvBtn=m(this.Button,a[0],this),this.$setBody(a[1]),this._uNxtBtn=m(this.Button,a[2],this),this.$initItems()}),w=v.prototype,x=w.Button=n(q,"ui-pager-button",function(a){var b=this.getTypes()[0],c=i(b+"-icon");a.insertBefore(c,a.firstChild)}),y=x.prototype,z=(w.Item=n(s,"ui-pager-item",function(a,b){b.resizeable=!1})).prototype;k(w,t),z.$setSize=l,z.setSelected=function(a){this.alterClass((a?"+":"-")+"selected")},y.setStep=z.setStep=function(a){this._sStep=a+""},y.getStep=z.getStep=function(){return this._sStep},y.$click=z.$click=a,w.getMaxPage=function(){return h.ceil(this._nTotal/this._nPageSize)},w.getTotal=function(){return this._nTotal},w.getTotal=function(){return this._nTotal},w.go=function(a){this._nPage=a,b(this)},w.setPageSize=function(a){this._nPageSize=a,this._nPage=1,b(this)},w.setTotal=function(a){this._nTotal=a,this._nPage=1,b(this)},w.init=function(){var a,c,d=this.getItems();for(this._uPrvBtn.setStep("-1"),this._uNxtBtn.setStep("+1"),this._aOMSBtn=[],this._aPageBtn=[],u.init.call(this),a=0;c=d[a];a++)c.init(),1==a||a==d.length-2?(this._aOMSBtn.push(c),c.hide()):this._aPageBtn.push(c);b(this)},w.$setSize=l}(),function(){function a(a,b){if(a._nTotalPage=o.ceil(a._nTotal/a._nPagesize),a._nTotalPage<a.getItems().length)for(var c=0;c<a._nMaxShow-a._nTotalPage;c++){var d=a.getItems();a.remove(d[d.length-1])}if(a._nTotalPage<=1)return a.hide(),void 0;var d=a.getItems(),e=d[0].$getValue(),f=d[d.length-1].$getValue();1>=b?(b=1,a._uPre.disable()):a._uPre.enable(),b>=a._nTotalPage?(b=a._nTotalPage,a._uNext.disable()):a._uNext.enable(),e>b?(e=b,f=b+d.length):b>f&&(f=b,e=f-d.length+1);for(var c=0;c<d.length;c++){var g=d[c];g.$setValue(c+e),b==g.$getValue()&&g.$setSelected()}}var b=ecui,c=b.ui,d=b.dom,e=b.util,f=b.$fastCreate,g=b.inherits,h=b.triggerEvent,i=(d.create,d.children),j=d.setStyle,k=d.addClass,l=d.removeClass,m=e.extend,n=e.blank,o=Math,p=c.Control,q=(p.prototype,c.Item),r=(q.prototype,c.Items),s=c.CustomPager=g(p,"ui-custom-pager",function(a){var b=this.getTypes()[0];j(a,"display","inline-block"),a.innerHTML='<span class="'+b+'-pre" style="'+'display:inline-block">&lt;</span>'+'<span class="'+b+'-items" style="'+'display:inline-block">'+'<span ecui="value:1">1</span>'+'<span ecui="value:2">2</span>'+'<span ecui="value:3">3</span>'+"</span>"+'<span class="'+b+'-next" style="'+'display:inline-block">&gt;</span>'},function(b,c){this._nPage=c.page-0||1,this._nTotal=c.total-0||100,this._nPagesize=c.pagesize-0||10,this._nMaxShow=c.maxShow-0||3,b=i(b),this._uPre=f(this.Pre,b[0],this,{userSelect:!1}),this._uNext=f(this.Next,b[2],this,{userSelect:!1}),this.$setBody(b[1]),this.$initItems(),a(this,this._nPage)}),t=s.prototype;t.getValue=function(){return this._cSelected?this._cSelected.$getValue():null},t.render=function(b,c,d){this._nPage=b||1,this._nTotal=c||0,this._nPagesize=d||10,a(this,this._nPage)},t.Pre=g(p);var u=t.Pre.prototype;t.Next=g(p);var v=t.Next.prototype;u.$click=function(){var b=this.getParent(),c=b.getValue()-1;a(b,c)},v.$click=function(){var b=this.getParent(),c=b.getValue()+1;a(b,c)},t.Item=g(p,null,function(a,b){b.userSelect=!1},function(a,b){this._nValue=b.value});var w=t.Item.prototype;m(t,r),t.$alterItems=n,w.$click=function(){var b=this.getParent(),c=this.$getValue();a(b,c)},w.$setSelected=function(){var a=this.getParent();a._nValue!=this.$getValue()&&(a._cSelected&&l(a._cSelected.getOuter(),"ui-custom-pager-item-selected"),k(this.getOuter(),"ui-custom-pager-item-selected"),a._cSelected=this,a._nValue=this.$getValue(),h(a,"change",null,[a.getValue()]))},w.$setValue=function(a){this._nValue=a,this._sName=a,this.setContent(this._sName)},w.$getValue=function(){return this._nValue}}(),function(){var a=ecui,b=a.dom,c=(a.string,a.array,a.ui),d=a.util,e=Math,f=(b.create,b.children),g=d.extend,h=d.blank,i=a.$fastCreate,j=a.inherits,k=a.triggerEvent,l=c.Control,m=c.Pager,n=c.Select;l.prototype,m.prototype;var o=c.ExtPager=j(l,"ui-ext-pager",function(a,b){var c,d,e=this.getTypes()[0],f=[];for(this.PAGE_SIZE=b.pageOptions?b.pageOptions.split(","):[10,20,50,100],f.push('<div class="'+e+'-page">共<em></em>页</div>'),f.push('<span style="float:left; margin-right:10px">，</span>'),f.push('<div class="'+e+'-sum">共<em></em>条记录</div>'),f.push('<div class="ui-pager"></div>'),f.push('<div class="'+e+'-pagesize">每页显示<select class="ui-select" style="width:45px">'),c=0,d=this.PAGE_SIZE.length;d>c;c++)f.push('<option value="'+this.PAGE_SIZE[c]+'">'+this.PAGE_SIZE[c]+"</option>");for(f.push("</select>条"),a.innerHTML=f.join(""),b.pageSize=b.pageSize||q,c=0,d=this.PAGE_SIZE.length;d>c&&this.PAGE_SIZE[c]!=b.pageSize;c++);},function(a,b){var a=f(a),c=this;this._bResizable=!1,this._eTotalPage=a[0].getElementsByTagName("em")[0],this._eTotalNum=a[2].getElementsByTagName("em")[0],this._uPager=i(m,a[3],this,g({},b)),this._uPager.$change=function(a){k(c,"change",null,[a,c._uPager._nPageSize])},this._uSelect=i(n,a[4].getElementsByTagName("select")[0],this),this._uSelect.$change=function(){k(c,"pagesizechange",null,[this.getValue()])}}),p=o.prototype,q=50;o.PAGE_SIZE=[10,20,50,100],p.init=function(){this._uPager.init(),this._uSelect.init(),this._eTotalPage.innerHTML=this._nTotalPage||1,this._eTotalNum.innerHTML=this._uPager._nTotal||0,this._uSelect.setValue(this._uPager._nPageSize)},p.render=function(a,b,c){var d=this._uPager;this._uSelect.setValue(c),b||0==b?(this._eTotalNum.innerHTML=b,d._nTotal=b):(this._eTotalPage.innerHTML=d._nPage||0,this._eTotalNum.innerHTML=d._nTotal||0,d._nTotal=d._nTotal||0),d._nPageSize=c||d._nPageSize,this._nTotalPage=e.ceil(b/c),this._eTotalPage.innerHTML=this._nTotalPage,d.go(a)},p.getPageSize=function(){return this._uPager._nPageSize},p.getPage=function(){return this._uPager._nPage},p.getTotal=function(){return this._uPager._nTotal},p.$setSize=h}();