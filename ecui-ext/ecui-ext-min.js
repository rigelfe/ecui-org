(function(){var A=ecui,z=A.dom,s=A.ui,a=A.string,k=A.ext,d=A.util,u=A.$create,l=A.$fastCreate,C=z.getPosition,j=z.children,r=z.create,B=z.moveElements,x=a.trim,n=a.encodeHTML,f=a.decodeHTML,c=d.getView,v=A.inherits,g=A.triggerEvent,q=A.setFocused,m=s.Control,w=m.prototype,y=s.Button,t=s.Editor=v(m,"ui-editor",null,function(G,D){var F=i[D.type];G.innerHTML=F.innerHTML+'<div class="ui-button ui-button-g">确定</div><div class="ui-button">取消</div><div style="display:none" class="ui-editor-tip"></div>';for(var E in F){if("[object Function]"==Object.prototype.toString.call(F[E])){if(E=="process"){F[E].call(this)}else{this[E]=F[E]}}}G=G.lastChild;this._eTip=G;this._uCancelBtn=l(this.Button,G=G.previousSibling,this,{command:"cancel"});this._uSubmitBtn=l(this.Button,G.previousSibling,this,{command:"submit",primary:"ui-button-g"})}),p=t.prototype,e=(p.Button=v(y,null,function(E,D){this._sCommand=D.command})).prototype,i={},b={};p.init=function(){this.$hide()};p.show=function(E){var H=C(E),D=c(),G=H.left,F=H.top;if(G+this.getWidth()>D.right){G=D.right-this.getWidth()}if(F+this.getHeight()>D.bottom){F=D.bottom-this.getHeight()}this.setPosition(G,F);this.focus()};p.$blur=function(){this.hide()};p.onhide=function(){this.setError("")};p.setError=function(D){D=x(D);this._eTip.innerHTML=D;if(D==""){this._eTip.style.display="none"}else{this._eTip.style.display=""}this.resize()};p.$resize=function(){var E=this._eMain,D=E.style;D.width=this._sWidth;D.height=this._sHeight;this.repaint()};e.$click=function(){var G=this.getParent();var J=G.getValue();var L=G._oOptions;var K=G.getParent();var E=K.editCell;var I=K.editField;var H={};var D;var F=G.getText?G.getText():G.getValue();F=n(F);if(this._sCommand=="cancel"){G.hide()}else{D=g(K,"editsubmit",H,[J,I]);if(D!==false){if("[object String]"==Object.prototype.toString.call(H.message)&&H.message!=""){G.setError(H.message)}else{H.value=(H.value!==undefined?H.value:J);E.innerHTML=H.value;G.setError("");G.hide()}}}};function o(D){var E;if(!b[D]){E=document.body.appendChild(r(t.TYPES));E=u(t,{main:E,type:D});E.cache();E.init();b[D]=E}return b[D]}function h(D,F,E){return function(){if(F!="custom"){EXT_EDITOR.edit(D,F,E)}else{(new Function("return "+E.handle)).call(null).call(null,D,E)}}}EXT_EDITOR=k.editor=function(){};EXT_EDITOR.register=function(D,E){i[D]=E};EXT_EDITOR.init=function(E,H,F){var I=r(),D=E.getTypes()[0],G=E.getBody();B(G,I,true);G.innerHTML='<div class="'+D+'-editor"><div></div><div class="'+D+'-editor-button"></div></div>';G.firstChild.lastChild.onclick=h(E,H,F);B(I,G.firstChild.firstChild,true);E.$setBody(G.firstChild.firstChild);I=null};EXT_EDITOR.edit=function(D,G,E){var H,F;if(E.getValue){if("[object Function]"==Object.prototype.toString.call(E.getValue)){H=E.getValue.call(null,D,E)}else{H=E.getValue}}else{H=f(x(D.getContent()))}F=o(G);F.show(D,H,E);q(F)};EXT_EDITOR.register("input",{innerHTML:'<input type="text" class="ui-editor-input" />',process:function(){this._eInput=this.getBody().firstChild},focus:function(){this._eInput.focus()},getValue:function(){return x(this._eInput.value)},setValue:function(D){this._eInput.value=D}});EXT_EDITOR.register("customSelect",{innerHTML:'<select class="ui-editor-select"></select>',process:function(){this._eSelect=this.getBody().firstChild},focus:function(){this._eSelect.focus()},getValue:function(){return this._eSelect.options[this._eSelect.selectedIndex].value},getText:function(){return this._eSelect.options[this._eSelect.selectedIndex].text},setValue:function(F){for(var D=0,E;E=this._eSelect.options[D];D++){if(E.value==F||E.text==F){E.selected=true;break}}},setDatasource:function(D){var G=this._eSelect,E,F,I;while(G.options[0]){G.remove(0)}for(E=0;F=D[E];E++){I=r("","","option");I.text=F.text;I.value=F.value;try{G.add(I,null)}catch(H){G.add(I)}}}})})();(function(){var b=ecui,c=b.ui,a=c.Select.prototype;a.clear=function(){var e=this.getItems()||[],d=e.length;while(d-->0){this.remove(0)}this._uOptions.reset()}})();(function(){var x=ecui,f=x.array,b=x.dom,n=x.string,F=x.ui,j=x.util,o,e=document,P=Math,R=P.max,v=P.min,t=f.indexOf,s=b.children,O=b.create,K=b.getParent,D=b.getPosition,a=b.getText,l=b.insertAfter,Q=b.insertBefore,q=b.moveElements,S=b.remove,H=n.encodeHTML,m=j.extend,z=j.getView,h=j.setDefault,k=x.$fastCreate,L=x.getAttributeName,A=x.getFocused,i=x.inherits,I=x.intercept,M=x.mask,w=x.restore,c=x.setFocused,N=x.triggerEvent,C=F.InputControl,y=C.prototype,d=F.Button,E=F.Scrollbar,p=F.Panel,T=p.prototype,J=F.Item,r=J.prototype,u=F.Items,B=F.Select,G=B.prototype;var g=F.SelectAsync=i(B,"ui-select-async",null,null);UI_SELECT_ASYNC_CLASS=g.prototype;UI_SELECT_ASYNC_CLASS.$activate=function(U){}})();(function(){var d=ecui,m=d.ui,g=d.dom,j=d.string,i=d.util,c=d.$fastcreate,h=d.$connect,a=d.inherits,n=d.triggerEvent,l=j.encodeHTML,f=m.Control,o=f.prototype,p=m.Select,e=p.prototype,b=m.CascadeSelect=a(p,null,function(r,q){},function(r,q){this._bTarget=q.target;h(this,function(s){this._cTarget=s},this._bTarget)}),k=b.prototype;k.$change=function(){e.$click.call(this);var r=this._cTarget;var q=this.getValue();n(r,"loaddata",function(s,u){var v=r;v.clear();for(var t=0,w;w=s[t];t++){v.add(w.text,null,{value:w.value})}if(u){v.setValue(u)}else{v.setSelectedIndex(0)}},[q])}})();(function(){var D=ecui,B=D.dom,a=D.string,m=D.array,x=D.ui,b=D.util,i,u=Math,v=B.create,h=B.children,F=b.extend,p=b.blank,l=D.$fastCreate,y=D.inherits,f=D.triggerEvent,n=x.Control,C=x.Button,E=x.Select,w=x.Item,t=x.Items,z=n.prototype,q=C.prototype,d=w.prototype,r=E.prototype;var o=x.Pager=y(n,"ui-pager",function(L,H){var K=this.getTypes()[0],J,G,I=[];if(!H.showCount||H.showCount<3){G=this._nShowCount=7}else{G=this._nShowCount=H.showCount}this._bOMSButton=H.omsButton!==false;I.push('<div class="'+K+"-button-prv "+K+'-button">上一页</div><div class="'+K+'-items">');for(J=0;J<G;J++){if(J==1||J==G-1){I.push('<div class="'+K+'-item-oms" ecui="disabled:true">...</div>')}I.push('<div class="'+K+'-item"></div>')}I.push('</div><div class="'+K+"-button-nxt "+K+'-button">下一页</div>');L.innerHTML=I.join("")},function(H,G){H=h(H);this._bResizable=false;this._nPage=G.page||1;this._nPageSize=G.pageSize||50;this._nTotal=G.total||0;this._uPrvBtn=l(this.Button,H[0],this);this.$setBody(H[1]);this._uNxtBtn=l(this.Button,H[2],this);this.$initItems()}),g=o.prototype,k=g.Button=y(C,"ui-pager-button",function(I,G){var H=this.getTypes()[0],J=v(H+"-icon");I.insertBefore(J,I.firstChild)}),c=k.prototype,s=(g.Item=y(w,"ui-pager-item",function(H,G){G.resizeable=false})).prototype;F(g,t);function e(J){var I=this.getParent(),H=I._nPage,G=I.getMaxPage(),K=this.getStep();z.$click.call(this);if(K.charAt(0)=="+"){H+=parseInt(K.substring(1),10);if(H==I._nPage){H=G}else{if(H>G){H=I._nPage}}}else{if(K.charAt(0)=="-"){H-=parseInt(K.substring(1),10);if(H==I._nPage){H=1}else{if(H<1){H=I._nPage}}}else{H=parseInt(K,10)}}if(I._nPage!=H){f(I,"change",null,[H])}}function A(H){var M=H._aPageBtn,N=H.getMaxPage(),O=H._nPage,I=H._nShowCount,K=parseInt(I/2,10),G=O-K>0?O-K:1,J,L,P;if(O==1){H._uPrvBtn.disable()}else{H._uPrvBtn.enable()}if(O==N||N==0){H._uNxtBtn.disable()}else{H._uNxtBtn.enable()}if(G+I-1>N&&N-I>=0){G=N-I+1}for(L=0;P=M[L];L++){J=G+L;P.setContent(J);P.setStep(J);P.setSelected(O==J);if(J>N){P.hide()}else{P.show()}}j(H)}function j(H){var J=H._aPageBtn,I=H._aOMSBtn,G=H.getMaxPage(),K;if(!H._bOMSButton){return}if(J[0].getContent()!="1"){J[0].setContent(1);J[0].setStep(1);I[0].show()}else{I[0].hide()}K=J[J.length-1];if(K.isShow()&&K.getContent()!=G){K.setContent(G);K.setStep(G);I[1].show()}else{I[1].hide()}}s.$setSize=p;s.setSelected=function(G){this.alterClass((G?"+":"-")+"selected")};c.setStep=s.setStep=function(G){this._sStep=G+""};c.getStep=s.getStep=function(){return this._sStep};c.$click=s.$click=e;g.getMaxPage=function(){return u.ceil(this._nTotal/this._nPageSize)};g.getTotal=function(){return this._nTotal};g.getTotal=function(){return this._nTotal};g.go=function(G){this._nPage=G;A(this)};g.setPageSize=function(G){this._nPageSize=G;this._nPage=1;A(this)};g.setTotal=function(G){this._nTotal=G;this._nPage=1;A(this)};g.init=function(){var H,I,G=this.getItems();this._uPrvBtn.setStep("-1");this._uNxtBtn.setStep("+1");this._aOMSBtn=[];this._aPageBtn=[];z.init.call(this);for(H=0;I=G[H];H++){I.init();if(H==1||H==G.length-2){this._aOMSBtn.push(I);I.hide()}else{this._aPageBtn.push(I)}}A(this)};g.$setSize=p})();(function(){var x=ecui,s=x.ui,w=x.dom,a=x.util,k=x.$fastCreate,u=x.inherits,c=x.triggerEvent,p=w.create,h=w.children,f=w.setStyle,o=w.addClass,q=w.removeClass,y=a.extend,j=a.blank,n=Math,i=s.Control,v=i.prototype,r=s.Item,b=r.prototype,m=s.Items;var e=s.CustomPager=u(i,"ui-custom-pager",function(C,A){var B=this.getTypes()[0];f(C,"display","inline-block");C.innerHTML='<span class="'+B+'-pre" style="display:inline-block">&lt;</span><span class="'+B+'-items" style="display:inline-block"><span ecui="value:1">1</span><span ecui="value:2">2</span><span ecui="value:3">3</span></span><span class="'+B+'-next" style="display:inline-block">&gt;</span>'},function(B,A){this._nPage=A.page-0||1;this._nTotal=A.total-0||100;this._nPagesize=A.pagesize-0||10;this._nMaxShow=A.maxShow-0||3;B=h(B);this._uPre=k(this.Pre,B[0],this,{userSelect:false});this._uNext=k(this.Next,B[2],this,{userSelect:false});this.$setBody(B[1]);this.$initItems();t(this,this._nPage)});var z=e.prototype;z.getValue=function(){if(this._cSelected){return this._cSelected.$getValue()}else{return null}};z.render=function(C,B,A){this._nPage=C||1;this._nTotal=B||0;this._nPagesize=A||10;t(this,this._nPage)};z.Pre=u(i);var g=z.Pre.prototype;z.Next=u(i);var l=z.Next.prototype;g.$click=function(){var A=this.getParent();var B=A.getValue()-1;t(A,B)};l.$click=function(){var A=this.getParent();var B=A.getValue()+1;t(A,B)};function t(E,D){E._nTotalPage=n.ceil(E._nTotal/E._nPagesize);if(E._nTotalPage<E.getItems().length){for(var C=0;C<E._nMaxShow-E._nTotalPage;C++){var B=E.getItems();E.remove(B[B.length-1])}}if(E._nTotalPage<=1){E.hide();return}var B=E.getItems();var G=B[0].$getValue();var A=B[B.length-1].$getValue();if(D<=1){D=1;E._uPre.disable()}else{E._uPre.enable()}if(D>=E._nTotalPage){D=E._nTotalPage;E._uNext.disable()}else{E._uNext.enable()}if(D<G){G=D;A=D+B.length}else{if(D>A){A=D;G=A-B.length+1}}for(var C=0;C<B.length;C++){var F=B[C];F.$setValue(C+G);if(D==F.$getValue()){F.$setSelected()}}}z.Item=u(i,null,function(B,A){A.userSelect=false},function(B,A){this._nValue=A.value});var d=z.Item.prototype;y(z,m);z.$alterItems=j;d.$click=function(){var A=this.getParent();var B=this.$getValue();t(A,B)};d.$setSelected=function(){var A=this.getParent();if(A._nValue==this.$getValue()){return}else{if(A._cSelected){q(A._cSelected.getOuter(),"ui-custom-pager-item-selected")}o(this.getOuter(),"ui-custom-pager-item-selected");A._cSelected=this;A._nValue=this.$getValue();c(A,"change",null,[A.getValue()])}};d.$setValue=function(A){this._nValue=A;this._sName=A;this.setContent(this._sName)};d.$getValue=function(){return this._nValue}})();(function(){var u=ecui,t=u.dom,a=u.string,j=u.array,q=u.ui,c=u.util,h,o=Math,p=t.create,f=t.children,w=c.extend,l=c.blank,i=u.$fastCreate,r=u.inherits,d=u.triggerEvent,k=q.Control,m=q.Pager,v=q.Select,s=k.prototype,e=m.prototype;var g=q.ExtPager=r(k,"ui-ext-pager",function(C,y){var B=this.getTypes()[0],A,x,z=[];if(y.pageOptions){this.PAGE_SIZE=y.pageOptions.split(",")}else{this.PAGE_SIZE=[10,20,50,100]}z.push('<div class="'+B+'-page">共<em></em>页</div>');z.push('<span style="float:left; margin-right:10px">，</span>');z.push('<div class="'+B+'-sum">共<em></em>条记录</div>');z.push('<div class="ui-pager"></div>');z.push('<div class="'+B+'-pagesize">每页显示<select class="ui-select" style="width:45px">');for(A=0,x=this.PAGE_SIZE.length;A<x;A++){z.push('<option value="'+this.PAGE_SIZE[A]+'">'+this.PAGE_SIZE[A]+"</option>")}z.push("</select>条");C.innerHTML=z.join("");y.pageSize=y.pageSize||n;for(A=0,x=this.PAGE_SIZE.length;A<x;A++){if(this.PAGE_SIZE[A]==y.pageSize){break}}},function(y,x){var y=f(y),z=this;this._bResizable=false;this._eTotalPage=y[0].getElementsByTagName("em")[0];this._eTotalNum=y[2].getElementsByTagName("em")[0];this._uPager=i(m,y[3],this,w({},x));this._uPager.$change=function(A){d(z,"change",null,[A,z._uPager._nPageSize])};this._uSelect=i(v,y[4].getElementsByTagName("select")[0],this);this._uSelect.$change=function(){d(z,"pagesizechange",null,[this.getValue()])}}),b=g.prototype,n=50;g.PAGE_SIZE=[10,20,50,100];b.init=function(){this._uPager.init();this._uSelect.init();this._eTotalPage.innerHTML=this._nTotalPage||1;this._eTotalNum.innerHTML=this._uPager._nTotal||0;this._uSelect.setValue(this._uPager._nPageSize)};b.render=function(A,z,x){var y=this._uPager;this._uSelect.setValue(x);if(z||z==0){this._eTotalNum.innerHTML=z;y._nTotal=z}else{this._eTotalPage.innerHTML=y._nPage||0;this._eTotalNum.innerHTML=y._nTotal||0;y._nTotal=y._nTotal||0}y._nPageSize=x||y._nPageSize;this._nTotalPage=o.ceil(z/x);this._eTotalPage.innerHTML=this._nTotalPage;y.go(A)};b.getPageSize=function(){return this._uPager._nPageSize};b.getPage=function(){return this._uPager._nPage};b.getTotal=function(){return this._uPager._nTotal};b.$setSize=l})();(function(){var w=ecui,j=w.array,u=w.dom,q=w.ui,b=w.util,f=j.indexOf,c=u.getText,v=u.remove,p=u.create,A=u.setInput,z=b.extend,m=b.inherits,o=w.getKey,t=w.mask,r=w.inherits,g=w.triggerEvent,e=q.InputControl,h=e.prototype,n=q.Items,x=q.Select,l=x.prototype,d=l.Item,B=d.prototype;var y=q.MultiSelect=r(x,"ui-multi-select",function(E,D){D.hide=true;if(D.value){D.value=D.value.toString()}},function(F,E){var D;if(E.maxlength){this._nTextLen=E.maxlength}if(E.textAll){this._sTextAll=E.textAll}if(E.textNone){this._sTextNone=E.textNone}if(E.maxSelected){this._nMaxSelected=E.maxSelected}else{if(E.selectAllButton){this.add("全部",0,{selectAllButton:true});this._bSelectAllBtn=true}}if(E.tip){this._bTip=true}if(E.value){this.setValue(E.value)}if(E.selectAll){this._bInitSelectAll=true}if(E.minSelected){this._nMinSelected=E.minSelected}this._eInput.disabled=true}),i=y.prototype,k=i.Item=r(d,"ui-multi-select-item",function(F,D){var E=this.getTypes()[0],G=p(E+"-icon");this._bSelectAllBtn=D.selectAllButton;this._sTip=D.tip?D.tip:c(F);F.insertBefore(G,F.firstChild);F=this._eInput=D.parent.getMain().appendChild(A(null,D.parent.getName(),"checkbox"));D.value===undefined?F.value="":F.value=D.value;F.style.display="none"}),a=k.prototype;function s(H,D){var E=H.getItems();if(!H._bSelectAllBtn){return}if(D===undefined){D=H.getSelected().length===E.length-1;E[0].$setSelected(D)}else{for(var F=0,G;G=E[F];F++){G.$setSelected(D)}}}function C(H){var G;if(H){var E=false;for(var D=0,F=H.getItems(),J,I=[];J=F[D++];){if(J.isSelected()){if(J._bSelectAllBtn){E=true}else{I.push(J._sTip)}}}G='<span title="'+I.join(",")+'">';if(H._sTextAll&&(I.length!=0||E)&&I.length==F.length+(H._bSelectAllBtn?-1:0)){I=H._sTextAll}else{if(I.length==0&&H._sTextNone){I=H._sTextNone}else{I=I.join(",");if(H._nTextLen&&I.length>H._nTextLen){I=I.substring(0,H._nTextLen)+"..."}}}if(H._bTip){I=G+I+"</span>"}H.$getSection("Text").setContent(I)}}z(i,n);a.$click=function(F){var E=this.getParent(),D=E.getSelected().length;B.$click.call(this,F);if(!this.isSelected()){if(!E._nMaxSelected||E._nMaxSelected>=D+1){this.setSelected(true)}}else{if(!E._nMinSelected||E._nMinSelected<=D-1){this.setSelected(false)}}};a.$dispose=function(){this._eInput=null;B.$dispose.call(this)};a.isSelected=function(){return this._eInput.checked};a.$setSelected=function(D){this._eInput.checked=D!==false;this.setClass(this.getPrimary()+(this._eInput.checked?"-selected":""))};a.setSelected=function(D){this.$setSelected(D);s(this.getParent(),this._bSelectAllBtn?D:undefined);C(this.getParent())};i.$alterItems=function(){l.$alterItems.call(this);s(this);C(this)};i.$append=function(D){l.$append.call(this,D);this.getMain().appendChild(A(D._eInput,this.getName()))};i.$cache=l.$cache;i.$intercept=function(D){for(var E=D.getControl();E;E=E.getParent()){if(E instanceof k){D.target=E.getOuter();return false}}this.$getSection("Options").hide();g(this,"change");D.exit()};i.$keydown=i.$keypress=i.$keyup=function(E){h["$"+E.type].call(this,E);if(!this.$getSection("Options").isShow()){return false}var D=o();if(D==13||D==32){if(E.type=="keyup"){D=this.getActived();D.setSelected(!D.isSelected())}return false}};i.$mousewheel=function(E){var D=this.$getSection("Options");if(D.isShow()){D.$mousewheel(E)}return false};i.$deactivate=l.$deactivate;i.$activate=function(E){var D=E.getControl();if(!(D instanceof k)){l.$activate.call(this,E)}};i.$ready=function(){s(this);C(this);if(this._bInitSelectAll){for(var D=0,E=this.getItems(),F;F=E[D++];){!F._bSelectAllBtn&&F.setSelected(true)}}};i.$remove=function(D){l.$remove.call(this,D);this.getMain().removeChild(D._eInput)};i.$setSize=l.$setSize;i.getSelected=function(){for(var E=0,F=this.getItems(),G,D=[];G=F[E++];){if(G.isSelected()&&!G._bSelectAllBtn){D.push(G)}}return D};i.getValue=function(){var E=this.getSelected(),G=[],F,D;for(F=0,D=E.length;F<D;F++){if(!E[F]._bSelectAllBtn){G.push(E[F]._eInput.value)}}return G};i.getAllValue=function(){var D=this.getItems();var F=[];var E=0;for(E=0;E<D.length;E++){if(!D[E]._bSelectAllBtn){F.push(D[E].getValue())}}return F};i.selectAll=function(){for(var D=0,E=this.getItems(),F;F=E[D++];){!F._bSelectAllBtn&&F.setSelected(true)}};i.isSelectAll=function(){for(var D=0,E=this.getItems(),F;F=E[D++];){if(!F.isSelected()){return false}}return true};i.setOptionSize=l.setOptionSize;i.setValue=function(D){if("[object Array]"!=Object.prototype.toString.call(D)){D=D.toString().split(",")}for(var E=0,F=this.getItems(),G;G=F[E++];){G.setSelected(f(D,G._eInput.value)>=0)}s(this);C(this)}})();(function(){var v=ecui,n=v.ui,s=v.dom,b=v.util,a=v.string,f=document,h=v.$fastCreate,p=v.inherits,x=s.moveElements,y=s.getPosition,m=s.create,d=s.children,w=b.extend,j=b.blank,o=function(z){return a.getByteLength(z,"gbk")},l=function(A,z){return a.sliceByte(A,z,"gbk")},q=n.Control,e=q.prototype,k=n.Items,c=n.MessageBar=p(q,"ui-message-bar",function(B,z){var C=m("","","ul"),A=this.getTypes()[0];x(B,C,true);B.innerHTML='<div class="'+A+'-title"><span class="'+A+'-title-icon"></span>系统消息</div><div class="'+A+'-scroll-msg" style="display:none"><div class="'+A+'-scroll-msg-inner" style="top:0px;left:0px">&nbsp;</div></div>';B.appendChild(C)},function(A,z){BODY=f.body;var B=m("","display:none;position:absolute");this._nPIndex=0;this._nSec=z.sec||5000;this._nMaxLen=z.maxlength||70;B.appendChild(A.lastChild);B.className="ui-message-bar-layer";BODY.appendChild(B);A=d(A);this.$setBody(B.firstChild);this._eScollMsg=A[1].firstChild;this._uLayer=h(this.Layer,B,this);this.$initItems()}),i=c.prototype,u=i.Layer=p(q,"ui-message-bar-layer"),g=u.prototype;w(i,k);function t(A,z,B){var C=A._eScollMsg;if(parseInt(C.style.top,10)<=-z){C.innerHTML=B;C.style.top="0px";if(A._oTimer!==null){A._oTimer=setTimeout(function(){A.$play()},A._nSec)}}else{C.style.top=(parseInt(C.style.top,10)-3)+"px";setTimeout(function(){t(A,z,B)},100)}}function r(A,z){if(o(A)>z){A=l(A,z-2)+"..."}return A}i.init=function(){var z=this.getItems();e.init.call(this);e.init.call(this._uLayer);this.$alterItems();this.play()};i.$mouseover=function(){var z=this._uLayer,A;if(this.getItems().length>0){A=y(this.getOuter());z.show();z.setPosition(A.left,A.top+this.getHeight());e.$activate.call(this);this.alterClass("+expend")}};i.$mouseout=function(){this._uLayer.hide();this.alterClass("-expend")};i.play=function(){var z=this;if(this._oTimer){return}else{this._oTimer=setTimeout(function(){z.$play()},this._nSec)}};i.$play=function(){var A=this.getItems(),C,z=this._eScollMsg.offsetHeight,B=this,D;if(A.length>1){this._nPIndex=(this._nPIndex+1)%A.length;C=A[this._nPIndex];D=r(C.getContent(),this._nMaxLen);this._eScollMsg.innerHTML+="<br />"+D;t(this,z,D)}else{if(A.length==1){this._eScollMsg.innerHTML=r(A[0].getContent(),this._nMaxLen);this._oTimer=null}}};i.stop=function(){clearTimeout(this._oTimer);this._oTimer=null};g.$setSize=function(){var z=this.getParent();e.$setSize.call(this,z.getWidth())};i.add=function(B,A,z){var D,C;if("string"==typeof B){C=m("","","li");C.innerHTML=B;this.getBody().appendChild(C)}else{C=B}B=k.add.call(this,C,A,z);B.getOuter().style.overflow="";return B};i.$alterItems=function(){var z=this.getItems(),A=this._eScollMsg;if(z.length>0){A.parentNode.style.display="";if(A.innerHTML=="&nbsp;"){A.innerHTML=r(this.getItems()[0].getContent(),this._nMaxLen);this._nPIndex=0}this.play()}else{A.parentNode.style.display="none";A.innerHTML="&nbsp";this.stop()}}})();(function(){var C=ecui,k=C.array,B=C.dom,s=C.ui,d=C.util,a=C.string,i=C.$fastCreate,o=C.setFocused,q=B.create,g=B.children,m=B.last,D=B.moveElements,E=B.getPosition,A=B.setText,u=C.inherits,b=C.isContentBox,t=C.getStatus,c=d.getView,f=C.triggerEvent,z=a.trim,j=s.Control,x=j.prototype,p=500,n=200,w=C.REPAINT,l=null;var e=s.Tip=u(j,"ui-tip",function(G,F){F.message=z(G.innerHTML)||F.message;G.innerHTML=""},function(G,F){this._sTarget=F.target;this._sMessage=F.message;this._oTimer=null;this._bAsyn=F.asyn===true;this._bLoad=false}),h=e.prototype,y=h.Layer=u(j,"ui-tip-layer",function(G,F){G.appendChild(q(this.getTypes()+"-corner"));G.appendChild(q())},function(G,F){G=g(G);this._eCorner=G[0];this.$setBody(G[1])}),r=y.prototype;function v(){var F;if(!l){F=document.body.appendChild(q(y.TYPES));l=i(y,F);l.cache();l.init()}return l}h.$mouseover=function(){var F=this;x.$mouseover.call(this);clearTimeout(this._oTimer);if(!this._bShow){if(this._bAsyn){var G=v();this.close();F._oTimer=setTimeout(function(){F._bLoad=false;f(F,"loadData",function(){F.open()})},p)}else{this._oTimer=setTimeout(function(){F.open()},p)}}};h.$mouseout=function(){var F=this;x.$mouseout.call(this);clearTimeout(this._oTimer);if(this._bShow){this._oTimer=setTimeout(function(){F.close()},n)}};h.$getTarget=function(F){return document.getElementById(F)};h.setTarget=function(F){this._sTarget=F};h.open=function(){var F=v();if(this._sTarget){var G=this.$getTarget(this._sTarget);if(G){if("[object String]"==Object.prototype.toString.call(G)){F.getBody().innerHTML=G}else{F.getBody().innerHTML=G.innerHTML}}}else{if(this._sMessage){F.setContent(this._sMessage)}}F.show(this);this._bShow=true};h.close=function(){v().hide();this._bShow=false};r.show=function(F){var L=E(F.getOuter()),K=this.getTypes()[0],M=c(),O=13,N=F.getWidth(),I=F.getHeight(),H=9,G=13,J=[];if(F){this._uHost=F}x.show.call(this);this.resize();if(L.left+this.getWidth()>M.right){L.left=L.left+N-this.getWidth()+H;J.push("-right")}else{L.left=L.left-H;J.push("-left")}if(L.top-O-this.getHeight()<M.top&&L.top+I+O+this.getHeight()<M.bottom){L.top+=I+O;J.push("-bottom")}else{L.top-=O+this.getHeight();J.push("-top")}this._eCorner.className=K+"-corner "+K+"-corner"+J.join("");this.setPosition(L.left,L.top)};r.$mouseover=function(){x.$mouseover.call(this);this._uHost.$mouseover()};r.$mouseout=function(){x.$mouseout.call(this);this._uHost.$mouseout()};r.$resize=function(){var G=this._eMain,F=G.style;F.width=this._sWidth;F.height=this._sHeight;this.repaint()}})();(function(){var s=ecui,r=s.dom,a=s.string,l=s.ui,b=s.util,p=b.attachEvent,j=r.create,q=a.trim,i=s.setFocused,h=b.blank,m=s.inherits,f=l.Control,n=f.prototype,c=l.InputControl,d=c.prototype,g=l.Input=m(c,"ui-input",function(v,u){u.resizable=false},function(w,u){var x,v=this.getType();this.getInput().style.border="";if(u.maxLength){this._sMaxLength=u.maxLength}if(u.tip){x=j(v+"-tip","display:none");x.innerHTML=u.tip;this.getBody().appendChild(x);this._eTip=x;p(this._eTip,"mousedown",k)}}),t=g.prototype,o=l.Textarea=m(g,"ui-textarea",function(v,u){u.inputType="textarea"});function k(v){var w=v||window.event,u;if(w.preventDefault){w.preventDefault()}else{w.cancelBuble=true}w=w.target||w.srcElement;u=w.parentNode.getControl();u.getInput().focus()}function e(v,u){if(v._eTip){v._eTip.style.display=u?"":"none"}}t.$keydown=function(){e(this,false)};t.$keyup=function(){var u=this.getValue();if(this._sMaxLength){if(baidu.string.getByteLength(u)>this._sMaxLength){this.setValue(baidu.string.subByte(u,this._sMaxLength))}}if(!u){e(this,true)}};t.$blur=function(){n.$blur.call(this);if(!this.getValue()){e(this,true)}};t.$setSize=h;t.setValue=function(u){d.setValue.call(this,u);e(this,u?false:true)};t.init=function(){if(!this.getValue()){e(this,true)}d.init.call(this)}})();(function(){var r=ecui,g=r.array,q=r.dom,n=r.ui,e=Date,b=g.indexOf,l=q.addClass,i=q.getParent,m=q.removeClass,p=q.setText,f=r.$fastCreate,o=r.inherits,c=r.triggerEvent,j=n.Control;var h=n.MonthViewOnly=o(j,"ui-monthviewonly",function(v,s){var u=this.getType(),w=[];v.style.overflow="auto";for(var t=0;t<12;t++){w.push('<td class="'+u+"-item"+this.Cell.TYPES+'">'+h.MONTH[t]+"月</td>"+((t+1)%3?"":"</tr><tr>"))}v.innerHTML='<table cellspacing="0"><tbody><tr>'+w.join("")+"</tr></tbody></table>"},function(v,t){this._aCells=[];for(var u=0,w=v.getElementsByTagName("TD"),x;x=w[u];){var s=f(this.Cell,x,this,{resizable:false});s._nMonth=u+1;this._aCells[u++]=s}this._nMonth=t.month||1;this._nYear=t.year||(new Date()).getFullYear();this.setView(this._nYear,this._nMonth)}),k=h.prototype,d=(k.Cell=o(j)).prototype;h.MONTH=["一","二","三","四","五","六","七","八","九","十","十一","十二"];function a(s,t){if(s._uSelected==t){return}if(s._uSelected){s._uSelected.alterClass("-selected")}if(t){t.alterClass("+selected")}s._uSelected=t}d.$click=function(t){var s=this.getParent();var u=s._nMonth;if(u!=this._nMonth){s._nMonth=this._nMonth;c(s,"change",t,[this._nMonth]);a(s,this)}};k.getMonth=function(){return this._nMonth};k.getYear=function(){return this._nYear};k.move=function(s){this.setView(this._nYear,this._nMonth+s)};k.clear=function(){this._uSelected=null;for(var s=0,t;t=this._aCells[s++];){t.alterClass("-selected")}};k.setView=function(s,t){this._nYear=s;this._nMonth=t;a(this,this._aCells[t-1])}})();(function(){var z=ecui,g=z.array,b=z.dom,I=z.ui,p=z.string,l=z.util,o=Date,a=RegExp,f=document,H=g.push,t=b.children,P=b.create,N=b.getParent,G=b.getPosition,s=b.moveElements,c=b.setText,K=p.formatDate,C=l.getView,n=z.$fastCreate,j=z.inherits,O=z.triggerEvent,d=z.setFocused,i=I.Control,v=i.prototype,e=I.Button,y=e.prototype,F=I.InputControl,B=F.prototype,D=I.Select,A=2002,h=(new Date()).getFullYear(),Q=I.MonthViewOnly,m=Q.Cell;var L=I.MonthCalendar=j(F,"ui-month-calendar",function(T,R){var S=this.getTypes()[0];R.hidden=true;T.innerHTML='<span class="'+S+'-text"></span><span class="'+S+'-cancel"></span><span class="'+S+'-button"></span>'},function(T,R){var V=t(T),S=this.getTypes()[0],U=P(S+"-panel","position:absolute;display:none");this._bTip=R.tip!==false;this._nYear=R.year;this._nMonth=R.month;this._eText=V[0];this._uCancel=n(this.Cancel,V[1],this);this._uButton=n(i,V[2],this);f.body.appendChild(U);this._uPanel=n(this.Panel,U,this,R);if(R.hideCancel==true){this._bHideCancel=true;this._uCancel.$hide()}}),J=L.prototype,q=(J.Cancel=j(i)).prototype,M=J.Panel=j(i,"ui-month-calendar-panel",function(W,R){var T=[],V=(new o()).getFullYear(),X=R.beginYear||A,Y=R.endYear||h,U=this.getTypes()[0];T.push('<div class="'+U+'-buttons"><div class="'+U+"-btn-prv"+e.TYPES+'"></div><select class="'+U+"-slt-year"+D.TYPES+'">');for(var S=X;S<Y+1;S++){T.push('<option value="'+S+'">'+S+"</option>")}T.push("</select>");T.push('<div class="'+U+"-btn-nxt"+e.TYPES+'"></div></div>');T.push('<div class="'+U+"-month-view"+Q.TYPES+'"></div>');W.innerHTML=T.join("")},function(S,ab){var W=[],R,U,X=this.getTypes()[0],Z=this.Button,V=this.Select,Y=ab.beginYear||A,aa=ab.endYear||h,T=this.MonthViewOnly;S=t(S);R=t(S[0]);this._beginYear=Y;this._endYear=aa;this._uPrvBtn=n(Z,R[0],this);this._uPrvBtn._nStep=-1;this._uYearSlt=n(V,R[1],this);this._uNxtBtn=n(Z,R[2],this);this._uNxtBtn._nStep=1;S=S[1];this._uMonthView=n(T,S,this);this._uYearSlt.setValue((new Date()).getFullYear())}),w=M.prototype,k=(w.Button=j(e,null)).prototype,u=(w.Select=j(D,null)).prototype,x=(w.MonthViewOnly=j(Q,null)).prototype,E='<span class="ui-calendar-default">请选择一个日期</span>';function r(R){var S=R._eText;if(S.innerHTML==""){R._uCancel.hide();if(R._bTip){S.innerHTML=E}}else{if(!R._bHideCancel){R._uCancel.show()}}}J.getYear=function(){return this._nYear};J.getMonth=function(){return this._nMonth};J.setDate=function(S,T){var R=S&&T?S+"年"+(T>9?T:"0"+T)+"月":"";if(this._uPanel.isShow()){this._uPanel.hide()}this._eText.innerHTML=R;this.setValue(R);this._nYear=S;this._nMonth=T;r(this)};J.$activate=function(U){var S=this._uPanel,R,V=G(this.getOuter()),T=V.top+this.getHeight();B.$activate.call(this,U);if(!S.isShow()){S.setDate(this._nYear,this._nMonth);R=C();S.show();S.setPosition(V.left+S.getWidth()<=R.right?V.left:R.right-S.getWidth()>0?R.right-S.getWidth():0,T+S.getHeight()<=R.bottom?T:V.top-S.getHeight()>0?V.top-S.getHeight():0);d(S)}};J.$cache=function(R,S){B.$cache.call(this,R,S);this._uButton.cache(false,true);this._uPanel.cache(true,true)};J.init=function(){B.init.call(this);this.setDate(this._nYear,this._nMonth);this._uPanel.init()};J.clear=function(){this.setDate()};q.$click=function(){var R=this.getParent();v.$click.call(this);R.clear()};q.$activate=y.$activate;w.$blur=function(){this.hide()};w.setDate=function(S,T){var R=new Date();S=S||R.getFullYear();this._uYearSlt.setValue(S);this._uMonthView.setView(S,T);this.setView(S,T)};w.setView=function(R,T){var S=this._uYearSlt,U=this._uMonthView;R=R||(new Date()).getFullYear();S.setValue(R);R&&U.setView(R,T)};w.getViewYear=function(){return this._uMonthView.getYear()};w.getViewMonth=function(){return this._uMonthView.getMonth()};w.$cache=function(R,S){this._uPrvBtn.cache(true,true);this._uNxtBtn.cache(true,true);this._uYearSlt.cache(true,true);this._uMonthView.cache(true,true);v.$cache.call(this,R,S)};w.init=function(){v.init.call(this);this._uYearSlt.init();this._uMonthView.init()};w.$change=function(T,U){var S=this.getParent();var R=this._uYearSlt.getValue();if(O(S,"change",T,[R,U])){S.setDate(R,U)}this.hide()};u.$change=function(){var S=this.getParent(),R=S.getParent(),U=S._uYearSlt;var T=R._nYear==U.getValue()?R._nMonth:null;S.setView(U.getValue(),T)};k.$click=function(){var V=this._nStep,S=this.getParent(),R=S.getParent(),T;var U=S._uYearSlt.getValue();var W=U-0+V;if(W<S._beginYear){W=S._endYear}if(W>S._endYear){W=S._beginYear}S._uMonthView.clear();if(W==R._nYear){S._uMonthView.setView(W,S.getViewMonth())}S._uYearSlt.setValue(W)};x.$change=function(R,S){O(this.getParent(),"change",R,[S])}})();(function(){var v=ecui,g=v.array,b=v.dom,H=v.ui,o=v.string,k=v.util,n=Date,a=RegExp,f=document,G=g.push,r=b.children,P=b.create,K=b.getParent,B=b.getPosition,q=b.moveElements,c=b.setText,J=o.formatDate,x=k.getView,m=v.$fastCreate,j=v.inherits,O=v.triggerEvent,d=v.setFocused,i=H.Control,s=i.prototype,e=H.Button,u=e.prototype,A=H.InputControl,w=A.prototype,z=H.Select,Q=H.MonthView,l=Q.Cell;var y=H.Calendar=j(A,"ui-calendar",function(T,R){var S=this.getTypes()[0];R.hidden=true;T.innerHTML='<span class="'+S+'-text"></span><span class="'+S+'-cancel"></span><span class="'+S+'-button"></span>'},function(V,T){var X=r(V),U=this.getTypes()[0],W=P(U+"-panel","position:absolute;display:none");this._bTip=T.tip!==false;if(T.date){var S=T.date.split("-");this._oDate=new n(parseInt(S[0],10),parseInt(S[1],10)-1,parseInt(S[2],10))}else{if(T.date===false){this._oDate=null}else{this._oDate=new n()}}var R=t(T.start,T.end);this._eText=X[0];this._uCancel=m(this.Cancel,X[1],this);this._uButton=m(i,X[2],this);this._bCancelButton=T.cancelButton!==false;if(!this._bCancelButton){this._uCancel.$hide()}f.body.appendChild(W);this._uPanel=m(this.Panel,W,this,{date:this._oDate,range:R})}),C=y.prototype,h=(C.Cancel=j(i)).prototype,F=C.Panel=j(i,"ui-calendar-panel",function(S,ab){var U=[],X=(new n()).getFullYear(),Y=this.getTypes()[0];var Z=new Date();var W=Z.getFullYear()-5;var aa=Z.getFullYear()+5;var R=ab.range.begin;var V=ab.range.end;if(R){W=R.getFullYear()}if(V){aa=V.getFullYear()}U.push('<div class="'+Y+'-buttons"><div class="'+Y+"-btn-prv"+e.TYPES+'"></div><select class="'+Y+"-slt-year"+z.TYPES+'">');for(var T=W;T<=aa;T++){U.push('<option value="'+T+'">'+T+"</option>")}U.push('</select><select class="'+Y+"-slt-month"+z.TYPES+'">');for(var T=1;T<=12;T++){U.push('<option value="'+T+'">'+(T<10?"0":"")+T+"</option>")}U.push('</select><div class="'+Y+"-btn-nxt"+e.TYPES+'"></div></div>');U.push('<div class="'+Y+"-month-view"+Q.TYPES+'"></div>');S.innerHTML=U.join("")},function(S,aa){var X=[],R,V,Y=this.getTypes()[0],Z=this.Button,W=this.Select,U=this.MonthView,T=aa.date;S=r(S);R=r(S[0]);this._uPrvBtn=m(Z,R[0],this);this._uPrvBtn._nStep=-1;this._uYearSlt=m(W,R[1],this);this._uMonthSlt=m(W,R[2],this);this._uNxtBtn=m(Z,R[3],this);this._uNxtBtn._nStep=1;S=S[1];this._uMonthView=m(U,S,this,{begin:aa.range.begin,end:aa.range.end})}),E=F.prototype,D=(E.Button=j(e,null)).prototype,L=(E.Select=j(z,null)).prototype,M=(E.MonthView=j(Q,null)).prototype,N='<span class="ui-calendar-default">请选择一个日期</span>',I="yyyy-MM-dd";function t(V,R){var S=new Date(),U=null,X=[S.getFullYear(),S.getMonth(),S.getDate()],T,W={y:0,M:1,d:2};if(V instanceof Date){U=U||{};U.begin=V}else{if(/^([-+]?)(\d+)([yMd])$/.test(V)){U=U||{};T=X.slice();if(!a.$1||a.$1=="+"){T[W[a.$3]]-=parseInt(a.$2,10)}else{T[W[a.$3]]+=parseInt(a.$2,10)}U.begin=new Date(T[0],T[1],T[2])}else{if("[object String]"==Object.prototype.toString.call(V)){U=U||{};V=V.split("-");U.begin=new Date(parseInt(V[0],10),parseInt(V[1],10)-1,parseInt(V[2],10))}}}if(R instanceof Date){U=U||{};U.end=R}else{if(/^([-+]?)(\d+)([yMd])$/.test(R)){U=U||{};T=X.slice();if(!a.$1||a.$1=="+"){T[W[a.$3]]+=parseInt(a.$2,10)}else{T[W[a.$3]]-=parseInt(a.$2,10)}U.end=new Date(T[0],T[1],T[2])}else{if("[object String]"==Object.prototype.toString.call(R)){U=U||{};R=R.split("-");U.end=new Date(parseInt(R[0],10),parseInt(R[1],10)-1,parseInt(R[2],10))}}}return U?U:{}}function p(R){var S=R._eText;if(S.innerHTML==""){R._uCancel.$hide();if(R._bTip){S.innerHTML=N}}else{if(R._bCancelButton){R._uCancel.show()}}}C.getDate=function(){return this._oDate};C.setDate=function(T){var S=this._uPanel,R=T!=null?J(T,I):"";if(this._uPanel.isShow()){this._uPanel.hide()}this._eText.innerHTML=R;w.setValue.call(this,R);this._oDate=T;p(this)};C.setValue=function(R){if(!R){this.setDate(null)}else{R=R.split("-");this.setDate(new Date(parseInt(R[0],10),parseInt(R[1],10)-1,parseInt(R[2],10)))}};C.$activate=function(U){var S=this._uPanel,R,V=B(this.getOuter()),T=V.top+this.getHeight();w.$activate.call(this,U);if(!S.isShow()){S.setDate(this.getDate());R=x();S.show();S.setPosition(V.left+S.getWidth()<=R.right?V.left:R.right-S.getWidth()>0?R.right-S.getWidth():0,T+S.getHeight()<=R.bottom?T:V.top-S.getHeight()>0?V.top-S.getHeight():0);d(S)}};C.$cache=function(R,S){w.$cache.call(this,R,S);this._uButton.cache(false,true);this._uPanel.cache(true,true)};C.init=function(){w.init.call(this);this.setDate(this._oDate);this._uPanel.init()};C.clear=function(){this.setDate(null)};C.setRange=function(S,R){this._uPanel._uMonthView.setRange(S,R)};h.$click=function(){var S=this.getParent(),R=S._uPanel;s.$click.call(this);S.setDate(null)};h.$activate=u.$activate;E.$blur=function(){this.hide()};E.setDate=function(R){var S=R!=null?R.getFullYear():(new Date()).getFullYear(),T=R!=null?R.getMonth()+1:(new Date()).getMonth()+1;this._uMonthView.$setDate(R);this.setView(S,T)};E.setView=function(R,U){var S=this._uMonthSlt,T=this._uYearSlt,V=this._uMonthView;T.setValue(R);S.setValue(U);V.setView(R,U)};E.getViewYear=function(){return this._uMonthView.getYear()};E.getViewMonth=function(){return this._uMonthView.getMonth()};E.$cache=function(R,S){this._uPrvBtn.cache(true,true);this._uNxtBtn.cache(true,true);this._uMonthSlt.cache(true,true);this._uYearSlt.cache(true,true);this._uMonthView.cache(true,true);s.$cache.call(this,R,S)};E.init=function(){s.init.call(this);this._uMonthSlt.init();this._uYearSlt.init();this._uMonthView.init()};E.$change=function(T,R){var S=this.getParent();if(O(S,"change",T,[R])){S.setDate(R)}this.hide()};L.$change=function(){var R=this.getParent(),T=R._uYearSlt,S=R._uMonthSlt;R.setView(T.getValue(),S.getValue())};D.$click=function(){var T=this._nStep,R=this.getParent(),S;S=new n(R.getViewYear(),R.getViewMonth()-1+T,1);R.setView(S.getFullYear(),S.getMonth()+1)};M.$change=function(S,R){O(this.getParent(),"change",S,[R])}})();(function(){var v=ecui,c=v.dom,C=v.ui,l=v.string,k=Date,b=RegExp,f=document,r=c.children,J=c.create,F=c.getParent,p=c.moveElements,E=l.formatDate,j=v.$fastCreate,i=v.inherits,H=v.triggerEvent,h=C.Control,s=h.prototype,e=C.Button,u=e.prototype,z=C.InputControl,w=z.prototype,x=C.Calendar,A=x.prototype,g=A.Cancel.prototype,B=A.Panel,G='<span class="ui-calendar-default">请选择一个日期</span>',a='<span class="ui-multi-calendar-default">请选择时间范围</span>',D="yyyy-MM-dd";var d=C.MultiCalendar=i(x,"ui-multi-calendar",function(L,K){K.hidden=true;K.yearRange&&(this._nYearRange=K.yearRange-0);if(K.remind){a='<span class="ui-calendar-default">'+K.remind+"</span>"}},function(M,K){var N=J(),L;N.innerHTML='<input type="hidden" name="'+(K.beginname?K.beginname:"beginDate")+'" /><input type="hidden" name="'+(K.endname?K.endname:"endDate")+'" />';if(K.bdate){L=K.bdate.split("-");this._oBegin=new Date(L[0],parseInt(L[1],10)-1,L[2])}if(K.edate){L=K.edate.split("-");this._oEnd=new Date(L[0],parseInt(L[1],10)-1,L[2])}L=r(N);this._eBeginInput=L[0];this._eEndInput=L[1];p(N,M,true)});var m=d.prototype;var q=m.Panel=i(h,"ui-multi-calendar-panel",function(){},function(O,L){var N=this.getTypes()[0],M=[],K=L.range||{};this._oRange=K;M.push('<div class="'+N+'-cal-area"><div class="'+N+'-text"><strong>起始时间：</strong><span></span></div><div class="'+B.TYPES+'"></div></div>');M.push('<div class="'+N+'-cal-area"><div class="'+N+'-text"><strong>结束时间：</strong><span></span></div><div class="'+B.TYPES+'"></div></div>');M.push('<div class="'+N+'-buttons"><div class="ui-button-g'+e.TYPES+'">确定</div><div class="'+e.TYPES+'">取消</div></div>');O.innerHTML=M.join("");O=r(O);this._eBeginText=O[0].firstChild.lastChild;this._eEndText=O[1].firstChild.lastChild;this._uBeginCal=j(this.Cal,O[0].lastChild,this,{range:K});this._uBeginCal._sType="begin";this._uEndCal=j(this.Cal,O[1].lastChild,this,{range:K});this._uEndCal._sType="end";this._uSubmitBtn=j(this.Button,O[2].firstChild,this);this._uSubmitBtn._sType="submit";this._uCancelBtn=j(this.Button,O[2].lastChild,this);this._uCancelBtn._sType="cancel"});var y=(m.Cancel=i(A.Cancel)).prototype;var I=q.prototype;var t=(I.Cal=i(B)).prototype;var n=(I.Button=i(e)).prototype;function o(K){var L=K._eText;if(L.innerHTML==""){K._uCancel.hide();if(K._bTip){L.innerHTML=a}}else{K._uCancel.show()}}m.init=function(){w.init.call(this);this.setDate({begin:this._oBegin,end:this._oEnd});this._uPanel.init()};m.setDate=function(L){var N=[],K,M;if(L==null){L={begin:null,end:null}}K=L.begin?E(L.begin,D):"";M=L.end?E(L.end,D):"";this._oBegin=L.begin;this._oEnd=L.end;this._eBeginInput.value=K;this._eEndInput.value=M;this._eInput.value=K+","+M;if(this._oBegin){N.push(K)}if(this._oEnd){N.push(M)}if(N.length==1){N.push(this._oEnd?"之前":"之后");N=N.join("")}else{if(N.length==2){N=N.join("至")}else{N=""}}this._eText.innerHTML=N;o(this)};m.getDate=function(){return{begin:this._oBegin,end:this._oEnd}};y.$click=function(){var K=this.getParent();g.$click.call(this);K.clearRange()};m.clearRange=function(){this._uPanel._oRange.begin=null;this._uPanel._oRange.end=null;this._uPanel._uBeginCal.setRange(null,null);this._uPanel._uEndCal.setRange(null,null)};I.setDate=function(M){var L=this._oRange,N,K;this._oBeginDate=M.begin;this._oEndDate=M.end;if(M.begin){this._eBeginText.innerHTML=E(M.begin,D)}else{this._eBeginText.innerHTML=""}if(M.end){this._eEndText.innerHTML=E(M.end,D)}else{this._eEndText.innerHTML=""}K=L.end?L.end:M.end;if(L.end&&M.end&&M.end.getTime()<L.end.getTime()){K=M.end}this._uBeginCal.setRange(L.begin,K,true);this._uBeginCal.setDate(M.begin);N=L.begin?L.begin:M.begin;if(L.begin&&M.begin&&M.begin.getTime()>L.begin.getTime()){N=M.begin}this._uEndCal.setRange(N,L.end,true);this._uEndCal.setDate(M.end)};I.$blur=function(){s.$blur.call(this);this.hide()};I.hide=function(){s.hide.call(this);var L=this.getParent();var K=L.getDate();if(L._nYearRange){if(K.end){this._oRange.begin=new Date(K.end);this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-L._nYearRange)}if(K.begin){this._oRange.end=new Date(K.begin);this._oRange.end.setFullYear(this._oRange.end.getFullYear()+L._nYearRange)}}};I.init=function(){s.init.call(this);this._uBeginCal.init();this._uEndCal.init()};I.$change=function(){var K=this.getParent(),L=this._oBeginDate,M=this._oEndDate;if(H(K,"change",[L,M])){K.setDate({begin:L,end:M})}this.hide()};I.$setDate=function(K,N){var L=N.charAt(0).toUpperCase()+N.substring(1);var M=this.getParent();this["_e"+L+"Text"].innerHTML=E(K,D);this["_o"+L+"Date"]=K;if(N=="begin"){if(M._nYearRange){this._oRange.end=new Date(K);this._oRange.end.setFullYear(this._oRange.end.getFullYear()+M._nYearRange)}this._uEndCal.setRange(K,this._oRange.end)}else{if(M._nYearRange){this._oRange.begin=new Date(K);this._oRange.begin.setFullYear(this._oRange.begin.getFullYear()-M._nYearRange)}this._uBeginCal.setRange(this._oRange.begin,K)}};t.$blur=function(){s.$blur.call(this)};t.$change=function(M,K){var L=this.getParent();this._oDateSel=K;L.$setDate(K,this._sType)};t.setRange=function(L,K,M){this._uMonthView.setRange(L,K,M)};n.$click=function(){var K=this.getParent();u.$click.call(this);if(this._sType=="submit"){H(K,"change")}else{K.hide()}}})();(function(){var z=ecui,y=z.dom,s=z.ui,a=z.string,i=z.ext,d=z.util,t=z.$create,j=z.$fastCreate,h=y.children,D=y.getPosition,q=y.create,B=y.moveElements,w=a.trim,l=a.encodeHTML,f=a.decodeHTML,c=d.getView,u=z.inherits,g=z.triggerEvent,p=z.setFocused,k=s.Control,v=k.prototype,x=s.Button,n=x.prototype,m=s.Input,C=m.prototype,A=s.Select,o=A.prototype,r=s.Item,e=r.prototype;var E=s.TableEditor=u(k,"ui-table-editor",function(H,F){var G=null;if(F.type!="url"){G='<div class="ui-'+F.type+'"></div>'}else{G=['<div class="ui-select" style="width:62px">',"</div>",'<div class="ui-input" style="margin-left:1px"></div>','<div class="ui-input" style="width:60px;margin-left:1px"></div>'].join("")}H.innerHTML=G},function(H,F){var I=this;var J=h(H);if(F.type=="input"){I._uInput=j(m,J[0],this,{})}else{if(F.type=="select"){I._uSelect=j(A,J[0],this,{})}else{if(F.type=="url"){I._uFront=j(A,J[0],this,{});I._uFront.setSize(62,22);I._uRoot=j(m,J[1],this,{});I._uRoot.setSize(100,22);I._uPath=j(m,J[2],this,{});I._uPath.setSize(60,22)}}}if(F.type=="select"||F.type=="input"){var K=I._uInput||I._uSelect;function G(M,L){g(M,"change",null,[M.getInnerControl(),M.target&&M.target.getInnerControl(),L]);if(M.target){G(M.target)}}K.onchange=function(){var L=I.rowData;G(I,L)}}else{I._uFront.onchange=I._uRoot.onchange=I._uPath.onchange=function(){var L=I.rowData;g(I,"change",null,[I._uFront,I._uRoot,I._uPath,L])}}});UI_TABLE_EDITOR_CLASS=E.prototype;UI_TABLE_EDITOR_CLASS.setValue=function(F){var G=this._uInput||this._uSelect;G.setValue(F)};UI_TABLE_EDITOR_CLASS.getValue=function(){var K=this._uInput||this._uSelect;var I=null;if(!K){var G={"1":"www","2":"无前缀"};var H=this._uFront.getValue();H=G[H];var F=this._uRoot.getValue();var J=this._uPath.getValue();I=H+F+J}else{I=K.getValue()}return I};UI_TABLE_EDITOR_CLASS.getInnerControl=function(){var F=this;var G=this._uInput||this._uSelect;if(!G){G=[F._uFront,F._uRoot,F._uPath]}return G};UI_TABLE_EDITOR_CLASS.show=function(G){var M=this;var G=G||M.showCell;var N=D(G),P=c(),H=N.left,O=N.top;var Q=this.getOuter();var I=this.rowData;v.show.call(this);this.resize();if(H+this.getWidth()>P.right){H=P.right-this.getWidth()}if(O+this.getHeight()>P.bottom){O=P.bottom-this.getHeight()}this.setPosition(0,0);G.appendChild(this.getOuter());Q.style.width=G.offsetWidth-2+"px";Q.style.height=G.offsetHeight-5+"px";if(this._uSelect){this._uSelect.setSize(G.offsetWidth-2,22)}else{if(this._uInput){this._uInput.setValue("");this._uInput.getOuter().style.width=(G.offsetWidth-2)+"px"}else{M._uFront.setSelectedIndex(0);M._uRoot.setValue("");M._uPath.setValue("");var J=M._uFront.getOuter().offsetWidth;var F=M._uRoot.getOuter().offsetWidth;M._uRoot.getOuter().style.width=(G.offsetWidth-130)+"px";var L=M._uPath.getOuter().offsetWidth;Q.style.width=J+F+L+9+"px"}}this.focus();if(Object.prototype.toString.call(this.getInnerControl())!=="[object Array]"){g(this,"beforeedit",null,[this.getInnerControl(),I])}else{var K=this.getInnerControl();K.push(I);g(this,"beforeedit",null,K)}};var b=function(){var J=ecui.getFocused();var L=null;if((J instanceof r)&&(J.getParent() instanceof A)){J=J.getParent()}if((J instanceof A)&&(J.getParent() instanceof E)){J=J.getParent()}if(J instanceof E){L=J}var I=function(N){var M=false;if(N==L){M=true}else{if(N.target){M=I(N.target)}}return M};var K=function(N){var M=false;if(N==L){M=true}else{if(N.parTarget){M=K(N.parTarget)}}return M};var H=[];var G=function(M){H.push(M);if(M.target&&baidu.array.indexOf(H,M.target)){G(M.target)}};var F=function(M){H.push(M);if(M.parTarget&&baidu.array.indexOf(H,M.parTarget)){F(M.parTarget)}};if(!L||(!I(this)&&!K(this))){G(this);F(this);H=baidu.array.unique(H);baidu.each(H,function(M){M.hide()})}};UI_TABLE_EDITOR_CLASS.$blur=function(G){var F=this;setTimeout(function(){b.call(F,G)},1)};UI_TABLE_EDITOR_CLASS.onhide=function(J){var G=this;var H=this.rowData;var F=this.getParent();var I=this._uInput||this._uSelect;var G=this;var L=this.editCell;document.body.appendChild(G.getOuter());var J={message:""};var K=null;if(!I){K=g(this,"editsubmit",J,[G._uFront,G._uRoot,G._uPath,H])}else{K=g(this,"editsubmit",J,[I,H])}if("[object String]"==Object.prototype.toString.call(J.message)&&J.message!=""){this.setError(J.message)}else{if(I&&I==this._uInput){J.value=(J.value!==undefined?J.value:I.getValue());L.innerHTML=J.value}else{if(I&&I==this._uSelect){L.innerHTML=I.getSelected()._eBody.innerText}else{J.value=(J.value!==undefined?J.value:G.getValue());L.innerHTML=J.value}}}};UI_TABLE_EDITOR_CLASS.focus=function(){var F=this._uInput||this._uSelect;z.setFocused(this,F)};UI_TABLE_EDITOR_CLASS.setAttached=function(F,J){var G=baidu.dom.children(F)[1];var I=this.getParent();var L=this._uSelect;var M=I._sEditCell;var K=G.innerHTML;L.clear();var H=undefined;baidu.each(J,function(N){if(K==N.text){H=N.value}L.add(N.text,null,{value:N.value})});L.setValue(H)};UI_TABLE_EDITOR_CLASS.setError=function(H){H=w(H);var F=this.getParent();var G=F._sEditCell;if(H){ecui.alert(H,function(){})}}})();(function(){var I=ecui,b=I.dom,e=I.array,O=I.ui,o=I.string,j=I.util,k=I.$fastCreate,i=I.inherits,U=I.triggerEvent,Q=I.dispose,R=I.$dispose,V=b.create,m=b.first,w=b.last,x=b.children,G=b.addClass,N=b.setStyle,c=b.setText,a=b.getText,t=b.removeClass,T=b.getParent,v=b.moveElements,M=b.getAttribute,L=b.getPosition,P=baidu.string.encodeHTML,H=e.remove,J=j.getView,n=j.extend,q=I.repaint,d=j.attachEvent,u=j.detachEvent,C=/chrome\/(\d+\.\d+)/i.test(navigator.userAgent)?+RegExp["\x241"]:undefined,X=Math,D=X.min,A=window,h=O.Control,z=h.prototype,B=O.Table,g=B.prototype,p=O.LockedTable,s=p.prototype,S=O.TableEditor,Y=S.prototype;var aa=O.CustomTable=i(p,"ui-table",function(ae,an){this._oOptions=an;this._aHeader=an.header;this._sSortby=an.sortby;this._sOrderby=an.orderby;this.editors={};if(!an.datasource){this._nLeftLock=an.leftLock||0;this._nRightLock=an.rightLock||0}var al=this.getTypes()[0];var ah=[];ah.push("<table><thead>");an.leftLock=an.leftLock||0;an.rightLock=an.rightLock||0;var ab=an.leftLock+an.rightLock;if(!an.datasource){N(ae,"width","100%")}else{N(ae,"width","auto");N(ae,"display","block")}if(!an.datasource){ah.push("<tr>");var ag;for(var ag=0;ag<=ab;ag++){ah.push("<th></th>")}ah.push("</tr>")}else{if("[object Array]"==Object.prototype.toString.call(an.fields[0])){var ak=0;var ag;for(ag=0;ag<an.fields.length;ag++){var ad=an.fields[ag];ah.push(l(ad,this,an.fields))}this._aColumns=[];for(var ag=0,ad;ad=an.fields[0][ag];ag++){if(ad.colspan){for(var af=0;af<ad.colspan;af++){this._aColumns.push(n({},an.fields[1][ak++]))}}else{this._aColumns.push(n({},ad))}}}else{ah.push(l(an.fields,this));this._aColumns=F(an.fields)}}ah.push("</thead><tbody>");if(!an.datasource){ah.push("<tr>");var ag;ah.push("<td></td>");ah.push("</tr>");an.leftLock=0;an.rightLock=0}else{this._aData=an.datasource;if(!this._aData.length){ah.push("<tr>");ah.push('<td class="'+al+'-empty-cell" align="left" colspan="'+this._aColumns.length+'">');ah.push(an.errorMsg?an.errorMsg:"暂无数据，请稍后再试");ah.push("</td>");ah.push("</tr>")}else{var ag;for(ag=0;ag<an.datasource.length;ag++){var am=an.datasource[ag];ah.push("<tr>");var af;for(af=0;af<this._aColumns.length;af++){var ad=this._aColumns[af];ah.push("<td");if(ad.checkbox){ad.width=16}ah.push(' width="'+ad.width+'"');ah.push(' style="width:'+ad.width+"px;min-width:"+ad.width+"px;max-width:"+ad.width+'px;"');ah.push(' class="');if(an.autoEllipsis){ah.push(al+"-cell-ellipsis ")}if(ad.editable){ah.push(al+"-cell-editable ")}if(ad.align){ah.push(al+"-cell-align-"+ad.align+" ")}ah.push('"');ad.editable&&ad.field&&ah.push(' edit-field="'+ad.field+'"')&&ah.push(' edit-type="'+ad.editType+'"')&&ad.target&&ah.push(' edit-target="'+ad.target+'"');ad.align&&ah.push(' align="'+ad.align+'"');ah.push(">");if(ad.editable){ah.push('<div class="'+al+'-cell-editor-container">');ah.push('<span class="'+al+'-cell-editor-button"></span>')}var aj=ad.content||ad.field;if(typeof aj=="function"){if(ad.checkbox){ah.push('<input type="checkbox"');ah.push(' class="'+al+'-checkbox"');ah.push(' data-rownum="'+ag+'"');ah.push(" />")}else{var ai=aj.call(null,am,ag);if(Object.prototype.toString.call(ai)=="[object String]"){if(an.autoEllipsis){ah.push('<div style="overflow:hidden; text-overflow:ellipsis;width:'+ad.width+"px;max-width:"+ad.width+"px;min-width:"+ad.width+'px;" title="'+ai+'">'+ai+"</div>")}else{if(ad.maxlength&&ai&&ai.length>ad.maxlength){ah.push('<span class="');ah.push(al+'-cell-limited"');ah.push(' title="'+ai+'">');ah.push(P(ai.substring(0,ad.maxlength)));ah.push("...");ah.push("</span>")}else{if(ad.editable){ah.push("<div>"+ai+"</div>");ah.push("</div>")}else{ah.push(ai)}}}}else{var ac=V();ac.appendChild(ai);ah.push(ac.innerHTML)}}}else{if(ad.detail){ah.push('<span style="margin-left:3px;margin-top:7px;float:right" ecui="type:tip;asyn:true;id:');ah.push("tip-"+am[ad.idField]+'"');ah.push("></span>")}if(ad.checkbox){ah.push('<input type="checkbox"');ah.push(' class="'+al+'-checkbox"');ah.push(' data-rownum="'+ag+'"');ah.push(" />")}else{if(ad.score){ah.push('<span ecui="type:score; static:true; max:');ah.push(ad.max+"; value:"+am[aj]);ah.push('"></span>')}else{if(an.autoEllipsis){ah.push('<div style="overflow:hidden; text-overflow:ellipsis;width:'+ad.width+"px;max-width:"+ad.width+"px;min-width:"+ad.width+'px;" title="'+P(am[aj])+'">'+P(am[aj])+"</div>")}else{if(ad.maxlength&&am[aj]&&am[aj].length>ad.maxlength){ah.push('<span class="');ah.push(al+'-cell-limited"');ah.push(' title="'+P(am[aj])+'">');ah.push(P(am[aj].substring(0,ad.maxlength)));ah.push("...");ah.push("</span>")}else{if(ad.editable){am[aj]=am[aj]||"";ah.push("<div>"+P(am[aj])+"</div>");ah.push("</div>")}else{am[aj]=am[aj]||"";ah.push(P(am[aj]))}}}}}}ah.push("</td>")}ah.push("</tr>")}}}ah.push("</tbody></table>");ae.innerHTML=ah.join("");return ae},function(ac,ab){ecui.init(ac);if(ab.fields&&ab.datasource){r(ab.fields,ab.datasource)}this.$bindCheckbox();return ac}),K=aa.prototype,y=["click","mouseup","mousedown"],Z={"click th.ui-table-hcell-sort":function(ab,ae){var ad=this.getAttribute("data-field"),ac;if(this.className.indexOf("-sort-desc")>=0){ac="asc"}else{if(this.className.indexOf("-sort-asc")>=0){ac="desc"}else{ac=this.getAttribute("data-orderby")||"desc"}}U(ae,"sort",null,[ad,ac])},"click input.ui-table-checkbox-all":function(ab,ac){ac.$refreshCheckbox(this.checked)},"click input.ui-table-checkbox":function(ab,ac){ac.$refreshCheckbox()},"click span.ui-table-cell-editor-button":function(am,ao){var aj=am||window.event;var ap=baidu.event.getTarget(aj);var ak=baidu.dom.next(ap);var al=ak.innerHTML;var ak=baidu.dom.getParent(ap);var ab=baidu.dom.getParent(ak);var an=baidu.dom.getAttr(ab,"edit-field");var ar=baidu.dom.getAttr(ab,"edit-type");var ae=ao._oOptions.datasource;var ah=ao._aRows;var ad=ecui.findControl(ab).getParent();var ai=baidu.array.indexOf(ah,ad);var ag=ae[ai];var aq={};baidu.each(ad._aElements,function(au){var av=baidu.dom.getAttr(au,"edit-field");if(av){aq[av]=au}});ao._sEditors=ao._sEditors||[];function at(ax){var ay=ao._sEditors[ax];var au=baidu.dom.getAttr(aq[ax],"edit-target");if(!ay){var aw=baidu.dom.create("div",{"class":"ui-table-editor"});document.body.appendChild(aw);ay=k(S,aw,ao,{type:ar,target:null});ao._sEditors[ax]=ay;var aA=ao.editors[ax];for(var az in aA){ay[az]=aA[az]}}ay.rowData=ag;if(au){var av=at(au);ay.target=av;ay.targetField=au;av.parTarget=ay}return ay}var ac=at(an);ao._showEditors=[];function af(aw,av){var au=aq[av];aw.show(x(au)[0]);aw.editCell=x(ak)[1];aw.showCell=x(au)[0];ao._showEditors.push(aw);if(aw.target){af(aw.target,aw.targetField)}}af(ac,an)}};function l(ak,ac,aj){var ai=ac.getTypes()[0];var ag=[];ag.push("<tr>");var ah=0;var af=0;for(af=0;af<ak.length;af++){var ad=ak[af];ag.push("<th ");ag.push('data-field="');if(Object.prototype.toString.call(ad.field)=="[object String]"){ag.push(ad.field)}if(ad.width){ag.push('" style="width:'+ad.width+"px;min-width:"+ad.width+"px;max-width:"+ad.width+"px;")}if(ad.editable&&ad.field){ac.editors[ad.field]=ac.editors[ad.field]||{}}if(ad.rowspan){ag.push('" rowspan="'+ad.rowspan)}if(ad.colspan){ag.push('" colspan="'+ad.colspan);var ae;var ab=0;for(ae=ah;ae<ah+ad.colspan;ae++){ab+=aj[1][ae].width}ag.push('" width="'+ab);ah+=ad.colspan}if(ad.sortable){ag.push('" class="'+ai+"-hcell-sort");if(ad.field&&ad.field==ac._sSortby){ag.push(" "+ai+"-hcell-sort-"+ac._sOrderby)}if(ad.order){ag.push('" data-orderby="'+ad.order.toLowerCase())}}ag.push('">');if(ad.name){ag.push(ad.name)}if(ad.checkbox){ag.push('<input type="checkbox" class="'+ai+'-checkbox-all" />')}if(ad.tip&&ad.tip.length){ag.push('<span ecui="type:tip; id:tip-');ag.push(ad.field);ag.push("; message:");ag.push(ad.tip);ag.push('"></span>')}ag.push("</th>")}ag.push("</tr>");return ag.join("")}function r(ah,ab){var ad=0;for(ad=0;ad<ab.length;ad++){var ae=ab[ad];for(var ac=0;ac<ah.length;ac++){var ag=ah[ac];if(ag.detail){var af="tip-"+ae[ag.idField];if(ecui.get(af)){ecui.get(af).onloadData=(function(ai,aj){return function(ak){aj.loadData(ai,ak)}})(ae,ag)}}}}}K.getData=function(){return this._aData};K.render=function(ag,ab,ah,am,af){var am=n({},am);am=n(am,this._oOptions);am.leftLock=this._nLeftLock;am.rightLock=this._nRightLock;am.fields=ag;am.datasource=ab||[];var ah=ah||{};am.sortby=ah.sortby;am.orderby=ah.orderby;am.errorMsg=af;if(!ab.length){am.leftLock=0;am.rightLock=0}u(A,"resize",q);if(!am.complex){var ai;var al;var ae;al=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var ak;for(ae=0;ak=al[ae];ae++){var ad;if(ak._aElements){var aj=ak.getCells();for(ad=0;cell=aj[ad];ad++){R(cell)}R(ak,true)}}}for(ae=0;ai=this._aHCells[ae];ae++){R(ai,true)}for(ai in this){if(/_u\w+/.test(ai)){Q(this[ai])}}var ac=this.getOuter();ac.innerHTML="";this.$setBody(ac);this.$resize();aa.client.call(this,ac,am);this._bCreated=false;this.cache(true,true);s.init.call(this);d(A,"resize",q);this.resize()};K.disposeUnit=function(af){u(A,"resize",q);var ac;var ad;ad=this._aHeadRows.concat(this._aRows,this._aLockedRow,this._aLockedHeadRow);var ab=0;var ae=function(){var ai=ad[ab];if(ai){var ah;if(ai._aElements){var ag=ai.getCells();for(ah=0;cell=ag[ah];ah++){R(cell)}R(ai,true)}ab++;setTimeout(ae,0)}else{af()}};ae();d(A,"resize",q)};K.$bindCheckbox=function(){var ab=this.getBody().getElementsByTagName("input"),ac,ae,ad=this.getTypes()[0];this._aCheckboxs=[];this._eCheckboxAll=null;for(ac=0;ae=ab[ac];ac++){if(ae.type=="checkbox"&&ae.className.indexOf(ad+"-checkbox-all")>=0){this._eCheckboxAll=ae}else{if(ae.type=="checkbox"&&ae.className.indexOf(ad+"-checkbox")>=0){this._aCheckboxs.push(ae)}}}};K.$refreshCheckbox=function(ae){var ac,ad,ab=true,af;for(ac=0;ad=this._aCheckboxs[ac];ac++){af=ad.parentNode.parentNode;if(ae!==undefined){ad.checked=ae}else{ab=ad.checked&&ab}if(ad.checked&&this._bCheckedHighlight){af.className+=" highlight"}else{if(this._bCheckedHighlight){af.className=af.className.replace(/\s+highlight/g,"")}}}if(this._eCheckboxAll){this._eCheckboxAll.checked=ae!==undefined?ae:ab}U(this,"checkboxChange")};K.$ready=function(){U(this,"sizechange")};K.$resize=function(){var ab=this;s.$resize.call(this);setTimeout(function(){U(ab,"sizechange");ab.$pagescroll()},100)};K.$pagescroll=function(){s.$pagescroll.call(this);if(this._uHScrollbar){f(this)}};K.getSelection=function(){if(!this._aCheckboxs||!this._aCheckboxs.length){return[]}var ad=[];for(var ac=0,ae;ae=this._aCheckboxs[ac++];){if(ae.checked){var ab=M(ae,"data-rownum")-0;ad.push(n({},this._aData[ab]))}}return ad};K.setSelection=function(ad){var ad=ad||[];for(var ac=0,ab=this._aCheckboxs.length;ac<ab;ac++){if(e.indexOf(ad,ac)>=0){this._aCheckboxs[ac].checked=true}else{this._aCheckboxs[ac].checked=false}}this.$refreshCheckbox()};K.init=function(){var ab,ac,ad=this.getOuter(),ae=this;s.init.call(this);for(ab=0;ac=y[ab];ab++){d(ad,ac,(function(af){return function(ag){var ah=ag||window.event;ah.targetElement=ah.target||ah.srcElement;ae.$fireEventHandler(af,ah)}})(ac))}};K.$fireEventHandler=function(af,ac){var ae=W(this.events,af),ad,ag,ah=ac.targetElement,ab;for(ad=0;ag=ae[ad];ad++){if(E(ah,ag.selector)){ag.handler.call(ah,ac,this)}}};K.$refresh=function(ae,ac){var ab=[],af=[];G(ae,this.getTypes()[0]);ab=this._aHCells;af=this._aRows.concat(this._aHeadRows,this._aLockedRow,this._aLockedHeadRow);for(var ad=0,ag;ag=ab[ad++];){Q(ag)}for(var ad=0,ag;ag=af[ad++];){Q(ag)}s.$refresh.call(this,ae,ac)};function f(ab){var ac;ac=ab._eBrowser?ab._eBrowser:ab._uHScrollbar.getOuter();ac.style.top=D(J().bottom-L(ab.getOuter()).top-ac.offsetHeight,ab.getHeight()-ac.offsetHeight)+"px";N(ac,"zIndex",1)}function W(ad,ae){var ab=[],af;ad=n({},ad);ad=n(ad,Z);for(var ac in ad){af={handler:ad[ac]};ac=ac.split(/\s+/);if(ac[0]==ae){af.selector=ac[1];ab.push(af)}}return ab}function E(ag,ab){var ad,af,ae,ac=true;if(!ag&&!ab){return false}ab.replace(/^([^.#]*)([.#]?)(.*)$/,function(ai,ah,ak,aj){ad=ah;ae=ak;af=aj});if(ad&&ag.tagName.toLowerCase()!=ad){ac=false}if(ae=="."&&!new RegExp("(^|\\s+)"+af+"(\\s+|$)").test(ag.className)){ac=false}if(ae=="#"&&ag.id!=af){ac=false}return ac}function F(ad){var ac=[];for(var ab=0,ae;ae=ad[ab++];){ac.push(n({},ae))}return ac}})();(function(){var x=ecui,i=x.array,v=x.dom,o=x.ui,c=x.util,a=x.string,g=x.ext,l=Math,z=l.max,u=l.min,h=x.$fastCreate,f=x.query,r=x.inherits,d=x.triggerEvent,q=x.dispose,w=x.getScrollNarrow,b=c.getView,t=c.toNumber,y=c.extend,k=c.blank,s=a.trim,n=v.create,A=v.moveElements,B=v.getPosition;getParent=v.getParent,insertBefore=v.insertBefore,first=v.first,children=v.children,getStyle=v.getStyle,indexOf=i.indexOf,UI_CONTROL=o.Control,UI_TIP=o.Tip,UI_CONTROL_CLASS=UI_CONTROL.prototype,UI_TABLE=o.Table,UI_CHECKBOX=o.Checkbox,UI_TABLE_CLASS=UI_TABLE.prototype,UI_TABLE_HCELL_CLASS=UI_TABLE_CLASS.HCell.prototype,UI_LOCKED_TABLE=o.LockedTable,UI_LOCKED_TABLE_CLASS=UI_LOCKED_TABLE.prototype,UI_FORM=o.Form,UI_FORM_CLASS=UI_FORM.prototype,UI_FORM_CLASS_HIDE=UI_FORM_CLASS.$hide;var p=o.ExtTable=r(UI_LOCKED_TABLE,"ui-table",function(E,D){D.browser=false},function(H,F){var K=n("ui-table-expend-layer","display:none;position:absolute"),D,J,G,E,I=this;this._oExpended=null;insertBefore(K,this._uLockedHead.getOuter());this._uRowExpendedLayer=h(UI_CONTROL,K,this);K=n("ui-table-head-shadow","display:none;position:absolute;left:0px");this._eMain.appendChild(K);this._uHeadShadow=h(UI_CONTROL,K,this);this._ePanelEmpty=this._eMain.appendChild(n("ui-table-panel-empty","display:none"));this._eEmpty=this._eMain.appendChild(n("ui-table-empty","position:absolute;left:0px;display:none"));this._eEmpty.innerHTML=F.emptyText||"暂无数据";D=this.getHCells();for(G=0;J=D[G];G++){K=J._oOptions;if(K.sortable){J.setClass("ui-table-hcell-sort");if(K.field==F.sortby){J.setClass("ui-table-hcell-sort-"+F.orderby)}}if(K.tip){H=n("ui-tip");J._uTip=h(UI_TIP,H,this,{target:K.tip});J.getBody().appendChild(H)}if(K.filter){J.setClass("ui-table-hcell-filter")}if(K.align){for(E=0,rows=this.getRows();E<rows.length;E++){if(rows[E]&&rows[E]._aElements[G]){rows[E]._aElements[G].className+=" ui-table-cell-align-"+K.align}}}if(K.editable&&K.edittype){for(E=0,rows=J.getCells();E<rows.length;E++){g.Editor.init(K.edittype,rows[E],(function(N,M,L){return function(){var Q=I.editorConfig||{},P=y({},Q[M]||{}),R=P.setValue,O=P.getValue;if(R){P.setValue=function(S){R.call(null,this,S,N,L)}}if(O){P.getValue=function(){return O.call(null,this,N,L)}}return P}})(E,K.field,rows[E].getOuter().getAttribute("data-ecui-editkey")));rows[E].$editorsubmit=(function(N,M,L){return function(Q,P){var O={index:N,field:M,key:L};O.beforeProcess=C(Q.beforeProcess,Q);O.afterProcess=C(Q.afterProcess,Q);O.setError=C(Q.setError,Q);return d(I,"editorsubmit",null,[P,O])}})(E,K.field,rows[E].getOuter().getAttribute("data-ecui-editkey"))}}}if(D[0]._oOptions.checkbox){D=[D[0]].concat(D[0].getCells());for(G=0;J=D[G];G++){E=s(J.getContent());if(E!="false"){J.setContent("");K=J.getBody().appendChild(n("ui-checkbox"));J._uCheckbox=h(UI_CHECKBOX,K,J,E?{value:E}:null);if(G!=0){J._uCheckbox.setSubject(D[0]._uCheckbox)}}else{J.setContent("&nbsp;")}}}if(this.getRows().length<=0){this.getBody().appendChild(this._ePanelEmpty);this._ePanelEmpty.style.display="";this._eEmpty.style.display="";this._uLockedMain.$hide()}}),e=p.prototype;function m(D){var E;E=D._eBrowser?D._eBrowser:D._uHScrollbar.getOuter();E.style.top=u(b().bottom-B(D.getOuter()).top-E.offsetHeight,D.getHeight()-E.offsetHeight)+"px"}function j(E,G){var I=E.getRows(),F,D=null,H=E._nLeft?E._nLeft:0;F=I[G].getCells();while(D=F[H++]){if(!!D.getOuter().offsetWidth&&D.getOuter().style.display!="none"){break}}return D}function C(D,E){return function(){D.apply(E,Array.prototype.slice.call(arguments))}}e.getCheckedRows=function(){var D=this.getHCell(0)._uCheckbox,G=[],E,F,H;if(D){E=D.getDependents();for(F=0;H=E[F];F++){if(H.isChecked()){G.push(H.getParent().getParent())}}}return G};e.getValues=function(){var D=this.getHCell(0)._uCheckbox,G=[],E,F,H;if(D){E=D.getDependents();for(F=0;H=E[F];F++){if(H.isChecked()){G.push(H.getValue())}}}return G};e.removeRow=function(E){var D=this._aRows[E].getCell(0),F=this.getRow(E);if(D._uCheckbox){q(D._uCheckbox)}if(F){F.hide=k}UI_LOCKED_TABLE_CLASS.removeRow.call(this,E);if(F){delete F.hide}};e.init=function(){var D,E,F=this.getHCells()[0];UI_LOCKED_TABLE_CLASS.init.call(this);if(F._oOptions.checkbox){D=[F].concat(F.getCells());for(E=0;F=D[E];E++){if(F._uCheckbox){F._uCheckbox.init()}}}};UI_TABLE_HCELL_CLASS.$click=function(){var F,E=this.getParent(),D=this._oOptions;UI_CONTROL_CLASS.$click(this);if(D.sortable){if(this.getOuter().className.indexOf("-desc")>=0){F="asc"}else{if(this.getOuter().className.indexOf("-asc")>=0){F="desc"}else{F=D.orderby||"desc"}}d(E,"sort",null,[D.field,F])}else{if(D.filter){ecui.get(D.filter).show(this,"right")}}};e.expendRow=function(F,L,K){var O=this.getRow(F),N=O.getCells(),G=this._uRowExpendedLayer,J,H,I,E=this._nLeft?this._nLeft:0;if(this._oExpended){this.collapseRow(this._oExpended.index)}d(this,"beforeexpendrow",null,[F]);J=j(this,F);H=J.getHeight();I=J.$getBasicHeight();if(!I){J.cache();I=J.$getBasicHeight()}this._oExpended={index:F,cellHeight:H};for(var E=0,M,D;M=N[E];E++){D=n("ui-table-expend-cell");D.style.height=(H-I)+"px";A(M.getOuter(),D,true);M.getOuter().appendChild(D);M.getOuter().style.verticalAlign="top"}J._bResizable=true;J.setSize(null,H+L+I);if("[object Function]"==Object.prototype.toString.call(K)){G.setContent(K.call(null,F))}else{G.setContent(K?K:"")}H=O.getY()+H+this._uHead.getHeight();G.setPosition(0,H+parseInt(this.getBody().style.top,10));G._nTop=H;G.show();G.setSize(this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight,L);this.resize();d(this,"afterexpendrow",null,[F,G.getBody()])};e.collapseRow=function(F){var K=this.getRow(F),E,J,D,G=this._nLeft?this._nLeft:0,I=this._uRowExpendedLayer;if(!this._oExpended){return}d(this,"beforecollapserow",null,[F,I.getBody()]);E=K.getCells();D=j(this,F);J=n();I.hide();for(var G=0,H;H=E[G];G++){A(first(H.getOuter()),J,true);H.getOuter().innerHTML="";A(J,H.getOuter(),true);H.getOuter().style.verticalAlign=""}D.setSize(null,this._oExpended.cellHeight);K._eFill.style.height=(this._oExpended.cellHeight-D.$getBasicHeight())+"px";this._oExpended=null;this.resize();d(this,"aftercollapserow",null,[F])};e.resizeExpended=function(){var G=this._uRowExpendedLayer,F=G.getOuter(),D=0,H,E;if(!this._oExpended){return}F=children(F);for(E=0;H=F[E];E++){D+=H.offsetHeight+parseInt(getStyle(H,"marginTop"),10)+parseInt(getStyle(H,"marginBottom"),10)}cell=j(this,this._oExpended.index);cell.setSize(null,this._oExpended.cellHeight+D+cell.$getBasicHeight());this.getRow(this._oExpended.index)._eFill.style.height=(this._oExpended.cellHeight+D)+"px";G.setSize(null,D);this.resize()};e.$setSize=function(F,D){var E=this;UI_LOCKED_TABLE_CLASS.$setSize.call(this,F,D);this._uHeadShadow.setSize(this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight);this._eEmpty.style.width=(this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight)+"px";if(this._uHead.getHeight()){this._eEmpty.style.top=this._uHead.getHeight()+"px"}if(!this._uVScrollbar){if(this._eBrowser){this._eBrowser.style.height=(w()+2)+"px";if(this._uHScrollbar.isShow()){this._eBrowser.style.display=""}else{this._eBrowser.style.display="none"}}this._eMain.appendChild(this._uHScrollbar.getOuter())}setTimeout(function(){E.$pagescroll.call(E)},0)};e.$scroll=function(){var D=this._uRowExpendedLayer;UI_LOCKED_TABLE_CLASS.$scroll.call(this);if(D.isShow()){D.setPosition(D.getX(),D._nTop-this.getScrollTop())}};e.$pagescroll=function(){var D=this._uHead;if(!this.isShow()){return}UI_LOCKED_TABLE_CLASS.$pagescroll.call(this);if(D.getOuter().style.top!="0px"){this._uHeadShadow.show();this._uHeadShadow.getOuter().style.top=t(D.getOuter().style.top)+D.getHeight()+"px"}else{this._uHeadShadow.hide()}if(!this._uVScrollbar){m(this)}};e.getData=function(){var I=this.getRows(),G=[],H,F,J,E,D;for(F=0;H=I[F];F++){J=[];E=0;while(D=H.getCell(E++)){J.push(D.getContent())}G.push(J)}return G};e.setChecked=function(D){var G=this.getRows(),D="|"+D.join("|")+"|",F,E;for(E=0;F=G[E];E++){if(F=F.getCell(0)._uCheckbox){if(D.indexOf("|"+F.getValue()+"|")>=0){F.setChecked(true)}}}};e.getHeaderData=function(){var I=this._aHeadRows.slice(),J=this.getColumnCount(),G=[],H,F,K,E,D;for(F=0;H=I[F];F++){K=[];E=0;while(E<J){D=H.getCell(E++);K.push(D?D.getContent():"")}G.push(K)}return G};e.highlight=function(D){var G;for(var F=0,E;E=D[F];F++){G=this.getRow(E);if(G&&G.getOuter().className.indexOf("highlight")<0){G.alterClass("+highlight");getParent(G._eFill).className=G.getMain().className}}};e.unHighlight=function(D){var G,F,E;if(!D||D.length<=0){F=this.getRows()}else{F=[];for(E=0;E<D.length;E++){F.push(this.getRow(D[E]))}}for(E=0;G=F[E];E++){if(G.getOuter().className.indexOf("highlight")>=0){G.alterClass("-highlight");getParent(G._eFill).className=G.getMain().className}}};e.getHeaderStructure=function(){var I=this._aHeadRows.slice(),G=[],H,F,J,E,D;for(F=0;H=I[F];F++){J=[];E=0;while(D=H._aElements[E++]){J.push({colSpan:D.getAttribute("colSpan"),rowSpan:D.getAttribute("rowSpan")})}G.push(J)}return G};e.setEmptyText=function(D){this._eEmpty.innerHTML=D};UI_TABLE_HCELL_CLASS.isShow=function(){if(!!this.getOuter().offsetWidth&&this.getOuter().style.display!="none"){return true}else{return false}};UI_TABLE_HCELL_CLASS.$hide=function(){this._sWidth4H=this._sWidth4H||this.getWidth();this.$setStyles("display","none",-this._sWidth4H)};UI_TABLE_HCELL_CLASS.$show=function(){if(this._sWidth4H){this.$$width=this._sWidth4H}this.$setStyles("display","",this.getWidth())};UI_FORM_CLASS.$hide=function(){var D,E,F;UI_FORM_CLASS_HIDE.call(this);D=f({type:p});for(E=0;F=D[E];E++){if(F&&F.isShow()){F.$pagescroll.call(F)}}}})();(function(){var c=ecui,k=c.ui,g=c.util,a=c.inherits,l=c.triggerEvent,f=g.blank,j=g.extend,d=k.Control,o=d.prototype,n=k.Items,m=k.InputControl,p=m.prototype;var e=k.Score=a(m,"ui-score",function(u,r){var q=r.max=r.max||5,t=[],s;r.hidden=true;r.value=r.value||0;for(s=1;s<=q;s++){t.push('<span ecui="score:'+s+'"></span>')}u.innerHTML=t.join("")},function(r,q){this._bStatic=(q["static"]===true);this.$initItems()}),i=e.prototype,h=i.Item=a(d,"ui-score-item",function(r,q){q.resizable=false},function(r,q){this._nScore=q.score}),b=h.prototype;j(i,n);i.init=function(){p.init.call(this);this.$score(this.getValue())};i.$score=function(t){var q=this.getItems(),r,s;t=t||this.getValue();for(r=0;s=q[r];r++){s.alterClass(r<t?"+marked":"-marked")}};i.setValue=function(q){p.setValue.call(this,q);this.$score(q)};i.$alterItems=f;b.getScore=function(){return this._nScore};b.$click=function(q){if(!this.getParent()._bStatic){this.getParent().setValue(this.getScore());p.$click.call(this)}};b.$mouseout=function(){if(!this.getParent()._bStatic){this.getParent().$score();o.$mouseout.call(this)}};b.$mouseover=function(){if(!this.getParent()._bStatic){this.getParent().$score(this.getScore());o.$mouseover.call(this)}};b.$setSize=f})();(function(){var y=ecui,D=y.ui,b=y.dom,d=y.array,n=y.string,h=y.util,i=y.$fastCreate,g=y.inherits,I=y.triggerEvent,t=b.children,k=b.first,r=b.last,G=b.getParent,J=b.create,K=b.insertBefore,j=b.insertAfter,C=b.setStyle,L=b.remove,x=b.addClass,H=b.getAttribute,p=b.removeClass,B=b.getPosition,q=b.moveElements,l=h.extend,m=h.blank,c=document,f=D.Control,u=f.prototype,F=D.Item,s=F.prototype,v=D.Items;var a=D.Toolbar=g(f,"ui-toolbar",function(P,N){var O=this.getTypes()[0]},function(P,W){var U=this.getTypes()[0];this._nMaxShow=W.maxShow||5;if(t(P).length<this._nMaxShow+1){var O=J("","","span");q(P,O,true);P.appendChild(O);this.$setBody(O);this.$initItems();var T=this.getItems()}else{var O=J("","","span");q(P,O,true);P.appendChild(O);this.$setBody(O);var S=J(U+"-more-out","","div");var R=this._nMaxShow-1;var O=t(O);for(var Q=R;Q<O.length;Q++){var N=J("","",O[Q].tagName);N.innerHTML=O[Q].innerHTML;N.setAttribute("ecui",H(O[Q],"ecui"));S.appendChild(N)}P.appendChild(S);this.$initItems();var T=this.getItems();this._MoreMenu=[];for(var Q=R;Q<O.length;Q++){this._MoreMenu.push(T[Q])}}this._nItems=this.getItems().length;for(var Q=0;Q<this._nItems;Q++){var V=this.getItems()[Q].getOuter();var O=J(U+"-text","","span");q(V,O,true);V.appendChild(O);if(t(P)[1]||Q<this._nItems-1){var O=J(U+"-space","","span");O.innerHTML="|";V.appendChild(O)}}if(t(P)[1]){var O=J(U+"-more","","div");q(t(P)[1],O,true);t(P)[1].appendChild(O);this._uMore=i(this.More,O,this,{});E(this)}if(this.getItems()&&this.getItems().length){this.getItems()[0].$setSelected()}}),e=a.prototype;e.getValue=function(){return this._cSelected.getValue()};function E(R,P){var O=R._uMore;var Q;if(O.getSelected()){Q=O.getSelected().getValue()}for(var N=0;N<R._MoreMenu.length;N++){var S=R._MoreMenu[N];if(Q==S.getValue()){S.show();if(P=="select"){S.$setSelected()}}else{S.hide()}}}var M=(e.More=g(f,"ui-toolbar-more",function(Q,N){var P=this.getTypes()[0];C(Q,"z-index",32764);var R=J(P+"-button","","span");R.innerHTML='<span style="vertical-align:middle">更多</span><span class="'+P+'-img"></span>';K(R,Q.firstChild);var R=J();Q.appendChild(R);Q=t(Q);for(var O=1;O<Q.length-1;O++){R.appendChild(Q[O])}},function(P,N){var O=this.getTypes()[0];x(r(P),O+"-options");C(r(P),"position","absolute");this._uOptions=i(this.Options,L(r(P)),this,{});this.$setBody(this._uOptions.getBody());this.$initItems();this._cSelected=this.getItems()[0]})).prototype;M.getSelected=function(){return this._cSelected};var w=(M.Options=g(f,"ui-toolbar-more-options")).prototype;M.$mouseover=function(){u.$mouseover.call(this);A(this)};M.$mouseout=function(){u.$mouseout.call(this);this._uOptions.hide()};function A(Q){var N=Q._uOptions;var P=N.getOuter();if(!G(P)){c.body.appendChild(P);Q.cache(false,true)}u.show.call(N);for(var O=0;O<Q.getItems().length;O++){var R=Q.getItems()[O];if(Q._cSelected==R){R.hide()}else{R.show()}}var S=B(Q.getOuter());N.setPosition(S.left+Q.getOuter().offsetWidth-P.offsetWidth-1,S.top+Q.getOuter().offsetHeight)}var o=(e.Item=g(F,"ui-toolbar-item",null,function(O,N){this._sValue=N.value===undefined?getText(O):""+N.value})).prototype;l(e,v);o.getValue=function(){return this._sValue};o.show=function(){I(this,"show");return true};o.hide=function(){I(this,"hide")};o.$setSelected=function(){var O=this.getParent();var N=this.getTypes()[0];if(O._cSelected){p(O._cSelected.getOuter(),N+"-selected")}x(this.getOuter(),N+"-selected");if(O._cSelected!=this){O._cSelected=this;I(O,"change")}I(O,"resize")};o.$click=function(){u.$click.call(this);this.$setSelected()};e.$alterItems=function(){};var z=(M.Item=g(F,null,null,function(O,N){this._sValue=N.value===undefined?getText(O):""+N.value})).prototype;l(M,v);z.getValue=function(){return this._sValue};z.$click=function(){var N=this.getParent();N._cSelected=this;E(N.getParent(),"select");I(N,"mouseout")}})();(function(){var t=ecui,o=t.ui,s=t.dom,a=t.string,i=t.$fastCreate,p=t.inherits,c=t.triggerEvent,m=t.getOptions,g=s.children,n=s.create,r=a.trim,k=o.Control,d=o.PsTip,q=k.prototype,l=o.Radio,j=l.prototype;var b=o.QueryTab=p(k,"ui-query-tab",null,function(x,u){var A=g(x),w=this.getTypes()[0],v,y,z=u.value;this._aItems=[];for(v=0;y=A[v];v++){y.className=r(y.className)+" "+w+"-item"+l.TYPES;this._aItems[v]=i(this.Item,y,this,m(y));if(z&&z==this._aItems[v].getValue()){this._aItems[v].setChecked(true);this._oCurChecked=this._aItems[v]}}}),e=b.prototype,h=e.Item=p(l,"ui-query-tab-item",null,function(v,u){var w;if(u.tip){w=n("ui-tip","","span");v.appendChild(w);this._uTip=i(d,w,this,{target:u.tip})}}),f=h.prototype;f.$click=function(){var u=this.getParent(),v=u._oCurChecked;j.$click.call(this);if(v&&v!=this){u._oCurChecked=this;c(this.getParent(),"change",null,[this.getValue()])}};f.getItems=function(){return this.getParent().getItems()};e.getItems=function(){return this._aItems.slice()};e.getValue=function(){return this._oCurChecked?this._oCurChecked.getValue():null};e.setValue=function(w){for(var u=0,v;v=this._aItems[u];u++){if(v.getValue()==w){v.setChecked(true);this._oCurChecked=v}}}})();(function(){var D=ecui,u=D.ui,C=D.dom,a=D.string,b=D.util,l=D.$fastCreate,x=D.inherits,e=D.triggerEvent,p=D.getOptions,s=D.setFocused,f=D.wrapEvent,v=D.addEventListener,j=C.children,t=C.create,A=a.trim,n=a.encodeHTML,w=a.getByteLength,r=a.sliceByte,z=b.attachEvent,o=b.blank,k=document,q=RegExp,c=navigator.userAgent,i=/msie (\d+\.\d)/i.test(c)?k.documentMode||(q.$1-0):undefined,m=u.Control,y=m.prototype,d=u.InputControl,h=d.prototype,B="gbk";var g=u.ExtEditor=x(m,"ui-ext-editor",function(G,E){var F=this.getTypes()[0];var H=['<div class="'+F+'-line-number"></div>','<div class="'+F+'-edit-area"></div>'];G.innerHTML=H.join("")},function(F,E){})})();(function(){var x=ecui,k=x.array,o=x.ui,k=x.array,v=x.dom,a=x.string,c=x.util,g=x.$fastCreate,h=x.getMouseX,q=x.inherits,m=x.getOptions,p=x.dispose,e=x.triggerEvent,y=c.extend,d=k.indexOf,y=c.extend,t=c.toNumber,f=v.getStyle,i=v.first,u=v.insertAfter,s=a.trim,l=c.blank,j=o.Control,r=j.prototype,b=o.TreeView,z=b.prototype,A=o.DataTree=q(b,"ui-data-tree",function(C,B){B.expandSelected=B.expandSelected===true;if(i(C)&&"divlabel".indexOf(i(C).tagName.toLowerCase())>=0){y(B,m(i(C)))}if(B.value){B.value+=""}B.resizable=false},function(C,B){this._aSelected=[];this._sValue=B.value;this._bHideRoot=B.hideRoot===true;this._bSelectAble=B.selectable!==false;this._bMultiSelect=B.multi===true;this._bAsyn=B.asyn;if(B.asyn&&this._aChildren.length<=0){this.add("Loadding",null);this.collapse();this._bNeedAsyn=true}}),n=A.prototype;function w(B){B.setClass(B.getPrimary()+(B._aChildren.length?B._bCollapsed?"-collapsed":"-expanded":""))}n.init=function(){z.init.call(this);if(this._bHideRoot&&this==this.getRoot()){this.hide();this.expand()}};n.$setParent=function(E){var B=this.getRoot(),D=B._aSelected,F=this.getParent(),C;if((C=d(D,this))>=0){B.$setSelected(this,false)}if(this!==B){remove(F._aChildren,this);w(F)}r.$setParent.call(this,E);if(this._eChildren){u(this._eChildren,this.getOuter())}};n.getValue=function(){return this._sValue};n.getText=function(){return s(this.getContent().replace(/<[^>]+>/g,""))};n.getSelected=function(){if(this==this.getRoot()){return this._aSelected.slice()}};n.getSelectedValues=function(){var C=[],B,D;if(this==this.getRoot()){for(B=0;D=this._aSelected[B];B++){C.push(D.getValue())}return this._bMultiSelect?C:C[0]}};n.setValues=function(B){var D;if(d(B,this._sValue)>=0){this.getRoot().$setSelected(this,true);D=this;while((D=D.getParent())&&D instanceof b){if(D.isCollapsed()){D.expand()}}}for(var C=0,D;D=this._aChildren[C];C++){D.setValues(B)}};n.getItemByValue=function(E){var C=null;if(this._sValue==E){C=this}for(var B=0,D;(D=this._aChildren[B])&&C==null;B++){C=D.getItemByValue(E)}return C};n.load=function(B){var C,D,E;for(C=0;D=this._aChildren[C];C++){p(D)}this._aChildren=[];this._eChildren.innerHTML="";for(C=0;D=B[C];C++){E=D.text;D=y({asyn:this._bAsyn},D);delete D.text;this.add(E,null,D).init()}};n.$expand=function(C){var B=C.getRoot();if(C._bNeedAsyn){e(B,"load",null,[C.getValue(),function(D){C.load(D)}]);C._bNeedAsyn=false}};n.$click=function(C){var B=null;if(C.getControl()==this){r.$click.call(this,C);if(h(this)<=t(f(this.getBody(),"paddingLeft"))){this[C=this.isCollapsed()?"expand":"collapse"]();e(this.getRoot(),C,null,[this])}else{if(d(this.getRoot()._aSelected,this)>=0){if(this._bMultiSelect){B=false}}else{B=true}this.getRoot().setSelected(this);e(this.getRoot(),"select",null,[this,B==true]);if(B!==null){e(this.getRoot(),"change",null,[this.getValue(),B])}}}};n.getSelectedText=function(){var C=[],B,D;if(this==this.getRoot()){for(B=0;D=this._aSelected[B];B++){C.push(D.getText())}return C.join(",")}};n.setSelectAble=function(C){var B=this.getRoot(),D;if(!this.enable&&(D=d(B._aSelected,this))>=0){B.$setSelected(this,false)}this._bSelectAble=C};n.$setSelected=function(E,B){var D,C;if(this==this.getRoot()){D=this._aSelected;C=d(D,E);if(B===true){if(C<0){D.push(E);E.alterClass("+selected")}}else{if(B===false){if(C>=0){D.splice(C,1);E.alterClass("-selected")}}}}};n.clearSelected=function(){var C,B,D;if(this==this.getRoot()){C=this._aSelected;while(D=C[0]){this.$setSelected(D,false)}}};n.setSelected=function(D,E){var C,B;if(this==this.getRoot()&&D._bSelectAble){C=this._aSelected;B=d(C,this);if((B=d(C,D))>=0){if(!E&&this._bMultiSelect){this.$setSelected(D,false)}}else{if(!this._bMultiSelect&&C.length>=1){this.$setSelected(C[0],false)}this.$setSelected(D,true)}if(D&&this._bExpandSelected){D.expand()}}};n.$setSize=l})();(function(){var B=ecui,m=B.array,A=B.dom,u=B.ui,c=B.util,a=B.string,k=B.$fastCreate,r=B.setFocused,v=B.dispose,s=A.create,i=A.children,E=A.moveElements,G=A.getPosition,w=B.inherits,b=c.getView,C=c.extend,n=c.blank,e=B.triggerEvent,l=u.Control,x=l.prototype,z=u.Button,o=z.prototype,F=u.DataTree,t=F.prototype,d=u.InputControl,h=d.prototype,g=u.InputTree=w(d,"ui-input-tree",function(K,I){var J=this.getTypes()[0],L=s();L.innerHTML='<div class="'+J+'-layer"  style="position:absolute;display:none; z-index:65535; height:230px; width:250px"><div class="'+F.types[0]+'"></div></div>';L=L.firstChild;E(K,L.lastChild,true);I._eLayer=document.body.appendChild(L);K.innerHTML='<span class="'+J+'-text">请选择</span><span class="'+J+'-cancel"></span><span class="'+J+'-button"></span><input type="hidden name="'+I.name+'"" />';I.hidden=true;if(I.value){I.value+=""}},function(J,I){var K;if(I.value){h.setValue.call(this,I.value)}K=i(J);this._multi=I.multi||false;this._textLength=I.textLength||15;this._eText=K[0];this._uCancel=k(this.Cancel,K[1],this);this._uLayer=k(this.Layer,I._eLayer,this,{asyn:I.asyn,multi:this._multi});I._eLayer=null;delete I._eLayer;if(I.hideCancel===true){this._bHideCancel=true;this._uCancel.$hide()}}),j=g.prototype,y=j.Layer=w(l,"ui-input-tree-layer",null,function(J,I){J.style.position="absolute";this._uTree=k(this.Tree,J.firstChild,this,{collapsed:true,asyn:I.asyn,multi:I.multi})}),f=y.prototype,F=u.DataTree,H=(j.Cancel=w(l)).prototype,q=f.Tree=w(F,null,null,function(J,I){this._bAsyn=I.asyn;if(I.asyn&&this._aChildren.length<=0){var K=this.add("Loading",null);K.canExpanded=false;this.collapse();this._bNeedAsyn=true}}),D=q.prototype;function p(I){if(I.getValue()==""){I._uCancel.hide()}else{if(!I._bHideCancel){I._uCancel.show()}}}j.$activate=function(){this._uLayer.show()};j.init=function(){var I=this.getValue();this.setValue(I);this._uLayer.init();h.init.call(this)};j.$setText=function(I){if(I&&I.length>this._textLength){I=I.substring(0,this._textLength)+"..."}if(!I){I="请选择"}this._eText.innerHTML=I};j.setValue=function(J){var I=this._uLayer._uTree;h.setValue.call(this,J);I.clearSelected();I.setValues([J]);this.$setText(I.getSelectedText());p(this)};j.clear=function(){var I=this._uLayer._uTree;I.clearSelected();h.setValue.call(this,"");this.$setText("");p(this)};j.clearState=function(){var I=this._uLayer._uTree;J(I);function J(K){K.collapse();var M=K.getChildren();if(M&&M.length){for(var L=0;L<M.length;L++){J(M[L])}}}};j.getTreeNodeByValue=function(I){return this._uLayer.getTreeNodeByValue(I)};j.setText=function(I){this.$setText(I)};j.expand=function(J,K){var I=this;this._uLayer.expand(J,function(){K.call(I)})};j.selectParent=function(J){var I=this._uLayer.getTreeNodeByValue(J);if(I!=I.getRoot()){I=I.getParent()}this.setValue(I.getValue())};f.init=function(){this._uTree.init();x.init.call(this)};f.$blur=function(){this.hide()};f.expand=function(K,L){var I=this._uTree,J=I.getItemByValue(K);if(J){J.expand();I.onexpand(J,L)}};f.getTreeNodeByValue=function(I){return this._uTree.getItemByValue(I)};f.show=function(){var J=this.getParent(),L,K,I;x.show.call(this);if(J){L=G(J.getOuter());I=b();K=L.top;L.top=K+J.getHeight();K=L.left;if(K+this.getWidth()>I.right){L.left=K+J.getWidth()-this.getWidth()}else{L.left=K}this.setPosition(L.left,L.top);r(this)}};H.$click=function(){var I=this.getParent();x.$click.call(this);I.$setText("");h.setValue.call(I,"");I._uLayer._uTree.clearSelected();p(I)};H.$activate=o.$activate;D.onselect=function(L,N){var O=this.getParent().getParent();var J=this.getParent()._uTree;var M=L.getValue();var K=L.getText();if(O._multi){var I=J.getSelectedValues().join(",");h.setValue.call(O,I);O.$setText(J.getSelectedText())}else{h.setValue.call(O,M);O.$setText(K);this.getParent().hide()}p(O)};D.onexpand=function(M,N){var L=this.getParent().getParent(),N=N||n;var J=L._uLayer.getOuter(),K=J.scrollTop;var I=function(){J.scrollTop=K;J=null};if(M._bNeedAsyn){e(L,"loadtree",null,[M.getValue(),function(O){M.load(O);N.call(null);I()}]);M._bNeedAsyn=false}else{N.call(null);I()}};D.load=function(I){var J,K,L;for(J=0;K=this._aChildren[J];J++){v(K)}this._aChildren=[];this._eChildren.innerHTML="";for(J=0;K=I[J];J++){L=K.text;K=C({asyn:this._bAsyn},K);delete K.text;this.add(L,null,K).init()}if(!I||I.length<=0){this.setClass(this.getPrimary())}}})();